<!--
  메뉴명: 사원등록
  수정내역:
  2018.12.14 성승익 : 신규작성
  -->
<div>
<div class="dews-container-panel" data-dews-fit-bottom="true">
  <div class="dews-container-item" data-dews-position="left" data-dews-width="300">
    <div class="custom-ui-condition-panel" id="CardListCondition" style="width: 300px; height: 47px;">
      <select id="cdt_hlofFgCd_ddl" class="dews-ui-dropdownlist" style="float: left; width: 83px; margin-right: 2px;" custom-dropdown-data-module="ETC" custom-dropdown-data-code="HLOFFGCD_N" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM">
      </select>
      <input id="cdt_keyword_tb" type="text" class="dews-ui-textbox" style="float: left; width: 162px; margin-right: 2px;" placeholder="부서/성명/사원번호" data-dews-placeholder-localize-key="D0026696">
      <button id="btn_search" class="dews-ui-button ico-search"></button>
    </div>
    <div class="dews-ui-cardlist" id="EmpCardList"></div>
  </div>
  <div class="dews-container-item" data-dews-position="normal">
    <!-- 퇴직자정보이관 버튼 생성 2021.01.04 -->
    <div class="dews-button-group">
      <button id="btn_edit_temp" class="dews-ui-button" style="display: none;"></button>
      <button id="btn_fileUpload_temp" class="dews-ui-button" style="display: none;"></button>
      <button id="btn_retireInfoTrans" class="dews-ui-button dews-ui-multilingual" data-dews-localize-key="D0084631">퇴직자정보이관</button>
    </div>
    <div class="dews-ui-tab-panel sub" id="mainTab">
      <!-- 프로필 패널 시작 -->
      <div class="dews-container-panel" data-dews-container-height="98" style="border: 1px solid #ccc; border-bottom: none; margin: 6px 0px 0px 0px;">
        <div class="dews-container-item" style="width:100%;" data-dews-position="left">
          <div class="dews-custom-profile-panel">
            <!-- 프로필사진 프레임 -->
            <div class="dews-custom-profile-photo-frame">
              <span class="dews-custom-profile-photo">
                <!-- 사진등록 포토업로더 -->
                <div style="display:none;">
                  <input id="photoUploader" type="file" class="dews-ui-file" data-dews-download-use="false" data-dews-file-key="customFileKey">
                </div>
                <img id="photoArea">
                <span class="dews-custom-profile-photo-edit-icon"></span>
              </span>
            </div>
            <div class="dews-custom-profile-info-frame">
              <div class="dews-custom-profile-employee">
                <span class="dews-custom-profile-name"></span>
                <span class="dews-custom-profile-position"></span>
              </div>
              <span class="dews-custom-profile-division">
                <span class="dews-custom-profile-bizarea no-space"></span>
                <span class="dews-custom-profile-updept no-space"></span>
                <span class="dews-custom-profile-dept no-space"></span>
                <span class="dews-custom-profile-duty no-space"></span>
              </span>
            </div>
            <div class="dews-custom-profile-button-frame">
              <span id="btn_edit" class="dews-custom-profile-button" style="width: 80px;">
                <span class="dews-custom-profile-info-edit-icon"></span>
                <span id="editBtnText" class="dews-custom-profile-button-frame-text dews-ui-multilingual" data-dews-localize-key="D0000266">수정</span>
              </span>
              <span id="btn_fileUpload" class="dews-custom-profile-button" style="width: 90px; top: -15px; position: relative;">
                <span class="dews-custom-profile-file-upload-icon"></span>
                <span class="dews-custom-profile-button-frame-text dews-ui-multilingual" data-dews-localize-key="D0003937">파일</span>
                <span id="fileCount" style="display: inline-block; position: relative; top: 4px; left: -18px;">(0)</span>
                <!-- <span class="dews-custom-profile-countbox">0</span> -->
              </span>
            </div>
          </div>
        </div>
      </div>
      <!-- 프로필 패널 끝 -->
      <ul class="dews-tab-items">
        <!-- 기본정보1 탭 시작 -->
        <li class="dews-tab-item" id="BasicInfo1Tab" data-dews-title="기본정보1" data-dews-localize-key="D0015418">
          <p>
            <button id="std_Z0001_chk_btn" class="dews-ui-button dews-ui-multilingual" data-dews-localize-key="D0112674">조합원번호 체크</button>
          </p>
          <div id="BasicInfo1FormPanel" class="dews-ui-form-panel">
            <ul>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000074">사원번호</label>
                <span>
                  <input id="fp_empNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="EMP_NO" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label>통합사원번호</label>
                <span>
                  <input id="fp_gempNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="GEMP_NO" data-custom-bind-table="HR_EMP_MST" data-custom-readonly="true" maxlength="40" style="width: 140px;">
                  <button id="btn_gempNo" class="dews-ui-button ico-search" disabled="true"></button>
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000324">내외국인</label>
                <span>
                  <select id="fp_frgnrCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="MA" custom-dropdown-data-code="P00200" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="FRGNR_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                  </select>
                </span>
              </li>
              <li id="li_resNo" style="display:none;">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013711">주민등록번호</label>
                <span>
                  <input id="fp_resNo_mtb" type="text" class="dews-ui-maskedtextbox" data-dews-mask="000000-0000000" style="display: none;" data-custom-bind-column="RES_NO" data-custom-bind-table="HR_EMP_MST">
                  <input id="fp_resNoMasked_mtb" type="text" class="dews-ui-maskedtextbox" data-dews-mask="000000-0000000" data-custom-bind-column="RES_NO" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <!-- 주민등록번호와 외국인식별번호를 내외국인 드롭다운 리스트가 바뀔때마다 display:none 으로 변경해주기 위해 조절해주는 조절용 <li> 테그 -->
              <li id="li_temp" style="display: none;">
                <span>
                </span>
              </li>
              <li id="li_frnNo" style="display:none;">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014807">외국인식별번호</label>
                <span>
                  <input id="fp_frnrInsertNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="FRNR_INSERT_NO" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0001231">성명</label>
                <span>
                  <input id="fp_korNm_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="KOR_NM" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014512">성별</label>
                <span>
                  <select id="fp_sexCd_ddl" class="dews-ui-dropdownlist" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00630" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="SEX_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000069">사업장</label>
                <span>
                  <input type="text" id="fp_bizareaCd_cp" class="dews-ui-codepicker" data-dews-code-field="BIZAREA_CD" data-dews-text-field="BIZAREA_NM" data-dews-help-code="H_MA_BIZAREA_MST_S" data-dews-help-size="medium" data-dews-help-params="" data-custom-bind-column="BIZAREA_CD" data-custom-bind-text="BIZAREA_NM" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000071">부서</label>
                <span>
                  <input type="text" id="fp_deptCd_cp" class="dews-ui-codepicker" data-dews-code-field="DEPT_CD" data-dews-text-field="DEPT_NM" data-dews-help-code="H_MA_DEPT_MST_S" data-dews-help-size="medium" data-dews-help-params="" data-custom-bind-column="DEPT_CD" data-custom-bind-text="DEPT_NM" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013840">그룹입사일</label>
                <span>
                  <input id="fp_groupecnyDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="GROUPECNY_DT" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000073">입사일</label>
                <span>
                  <input id="fp_jncoDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="JNCO_DT" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014838">퇴직기산일</label>
                <span>
                  <input id="fp_retireStdr_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="RETIRESTDR_DT" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0015401">퇴직일자</label>
                <span>
                  <input id="fp_retrDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="RETR_DT" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000070">재직구분</label>
                <span>
                  <select id="fp_hlofFgCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00750" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="HLOF_FG_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014558">퇴직사유</label>
                  <span>
                    <span class="dews-codepicker-wrapper dews-control k-textbox dews-control-activate k-space-right" id="fp_ccCd_cp-wrapper" style="border: 0px">
                      <input id="fp_retrReasonNm_tb" type="text" class="dews-ui-textbox" maxlength="90" data-custom-bind-column="RETR_REASON_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                      <button id="btnRetrReason" type="button" class="dews-codepicker-button custom-picker-button">
                        <span class="dews-icon icon-search"></span>
                      </button>
                  </span>
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000680">사원구분</label>
                <span>
                  <select id="fp_empTp_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00220" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="EMP_TP" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000018">비용센터</label>
                <span>
                  <input id="fp_ccCd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="CC_CD" data-dews-text-field="CC_NM" data-dews-help-code="H_MA_CC_MST_S" data-dews-help-size="big" data-dews-help-params="" data-custom-bind-column="CC_CD" data-custom-bind-text="CC_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014911">국적</label>
                <span>
                  <input id="fp_ntnlCd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-help-code="H_MA_CODEDTL_S" data-dews-help-size="medium" data-dews-help-params="module_cd=MA&field_cd=P00170" data-custom-bind-column="NTNL_CD" data-custom-bind-text="NTNL_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0006838">직위</label>
                <span>
                  <select id="fp_posiCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00640" custom-dropdown-add-all="true" data-dews-text-field="SYSDEF_NM" data-dews-value-field="SYSDEF_CD" data-custom-bind-column="POSI_CD" data-custom-bind-text="POSI_NM" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0008294">직급</label>
                <span>
                  <select id="fp_pstnCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00650" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="PSTN_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>
              <li id="fp_slstCd_li">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014381">호봉</label>
                <span>
                  <input id="fp_slstCd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="SLST_CD" data-dews-text-field="SLST_CD" data-dews-help-code="H_HR_PAYSTEP_INFO_S" data-dews-help-size="medium" data-dews-help-params="" data-custom-bind-column="SLST_CD" data-custom-bind-text="SLST_CD" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li id="fp_slstCd_li2">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014381">호봉</label>
                <span>
                  <input id="fp_slstCd_cp2" type="text" class="dews-ui-codepicker" data-dews-code-field="SLST_CD" data-dews-text-field="SLST_CD" data-dews-help-code="PAMPHM00100_slstCd_POP" data-dews-help-size="big" data-dews-help-custom="true" data-dews-help-view-url="~/view/HR/PAMPHM00100_slstCd_POP" data-dews-ajax="true" data-custom-bind-column="SLST_CD" data-custom-bind-text="SLST_CD" data-custom-bind-table="HR_EMP_MST" data-dews-help-title="호봉">
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000685">직책</label>
                <span>
                  <select id="fp_odtyCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00980" custom-dropdown-add-all="true" data-dews-text-field="SYSDEF_NM" data-dews-value-field="SYSDEF_CD" data-custom-bind-column="ODTY_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>
              <li id="fp_dutyCd_ddl_li">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013590">직무</label>
                <span>
                  <select id="fp_dutyCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00920" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="DUTY_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>
              <!-- 동서발전 전용 컴포넌트로 기존 드롭다운 직무 컨포넌트를 코드피커로 변경 (drs 적용) -->
              <li id="fp_dutyCd_ddl_li_x10005" class="drs-property-10005">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013590">직무</label>
                <span>
                  <input id="fp_dutyCd_cp_x10005" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-help-code="H_MA_CODEDTL_S" data-dews-help-size="medium" data-dews-help-params="module_cd=HR&field_cd=P00920" data-custom-bind-column="DUTY_CD" data-custom-bind-text="DUTY_NM" data-custom-bind-table="HR_EMP_MST" data-dews-localize-key="D0014912">
                </span>
              </li>

              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014516">비상연락</label>
                <span>
                  <input id="fp_emgncCntcNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="EMGNC_CNTC_NO" data-custom-bind-table="HR_EMPINFO_DTL" maxlength="20">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000940">메일주소</label>
                <span>
                  <input id="fp_emailNm_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="EMAIL_NM" data-custom-bind-table="HR_EMPINFO_DTL" maxlength="40">
                </span>
              </li>

              <li class="li-rowspan-2">
                <label class="rowspan-2 dews-ui-multilingual" data-dews-localize-key="D0014567">주민등록주소</label>
                <span class="colspan-2">
                  <input id="fp_resPostNo_zcp" type="text" class="dews-ui-zipcodepicker" style="width: 100px;" data-dews-bind-code="RES_POST_NO" data-dews-address-type="street" data-dews-address-bind="fp_baseResAddr_tb" data-custom-bind-column="RES_POST_NO" data-custom-bind-text="BASE_RES_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                  <input id="fp_baseResAddr_tb" type="text" class="dews-ui-textbox" maxlength="90" style="width: 403px; z-index: 1;" data-custom-bind-column="BASE_RES_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
                <span class="colspan-2">
                  <input id="fp_dtlResAddr_tb" type="text" class="dews-ui-textbox cols-2" maxlength="90" style="width: 506px; margin-top: -9px;" data-custom-bind-column="DTL_RES_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li class="li-invisible-cols-2"></li>

              <li id="fp_psnEmpNo_li">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0111446">인물번호</label>
                <span>
                  <input id="fp_psnEmpNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="PSN_EMP_NO" data-custom-bind-table="HR_EMP_MST" maxlength="20">
                </span>
              </li>

            </ul>
          </div>
        </li>
        <!-- 기본정보2탭 시작 -->
        <li id="BasicInfo2Tab" class="dews-tab-item" data-dews-title="기본정보2" data-dews-localize-key="D0015421">
          <div id="BasicInfo2FormPanel" class="dews-ui-form-panel">
            <ul>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014805">한자성명</label>
                <span>
                  <input id="fp_chcrtNm2_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="CHCRT_NM2" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014806">영문성명</label>
                <span>
                  <input id="fp_engFnmNm2_tb" type="text" class="dews-ui-textbox half-size" placeholder="First Name" data-custom-bind-column="ENG_FNM_NM2" data-custom-bind-table="HR_EMP_MST">
                  <input id="fp_engLnmNm2_tb" type="text" class="dews-ui-textbox half-size" placeholder="Last Name" data-custom-bind-column="ENG_LNM_NM2" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li class="li-rowspan-2">
                <label class="rowspan-2 dews-ui-multilingual" data-dews-localize-key="D0000654">영문주소</label>
                <span class="colspan-2">
                  <input id="fp_engAddr2_tb" type="text" class="dews-ui-textbox cols-2" maxlength="90" data-custom-bind-column="ENG_ADDR2" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
                <span class="colspan-2">
                  <input id="fp_engDtlAddr2_tb" type="text" class="dews-ui-textbox cols-2" maxlength="90" style="margin-top: -9px;" data-custom-bind-column="ENG_DTL_ADDR2" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li class="li-invisible-cols-2"></li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013841">직군</label>
                <span>
                  <select id="fp_ogrpCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00660" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="OGRP_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0015574">직렬</label>
                <span>
                  <select id="fp_seriCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P01740" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="SERI_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013842">직종</label>
                <span>
                  <select id="fp_jkndCd_ddl" class="dews-ui-dropdownlist" data-dews-show-tooltip="true" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00990" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="JKND_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014673">근무조</label>
                <!-- <span>
                  <select id="fp_tkgCd_ddl" class="dews-ui-dropdownlist"
                    custom-dropdown-data-module="ETC" custom-dropdown-data-code="WORKGROUP" custom-dropdown-add-all="true"
                    data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM"
                    data-custom-bind-column="TKG_CD" data-custom-bind-table="HR_EMP_MST">
                  </select>
                </span> -->
                <span>
                  <input id="fp_tkgCd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="HR_CD" data-dews-text-field="HR_CD_NM" data-dews-help-code="H_HR_CODEBASE_MST_S" data-dews-help-size="medium" data-dews-help-params="menu_cd=34" data-custom-bind-column="TKG_CD" data-custom-bind-text="TKG_NM" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013955">평가구분</label>
                <span>
                  <input id="fp_evalCsfCd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-help-code="H_MA_CODEDTL_S" data-dews-help-size="medium" data-dews-help-params="module_cd=HR&field_cd=P07330" data-custom-bind-column="EVAL_CSF_CD" data-custom-bind-text="EVAL_CSF_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014515">최종학력</label>
                <span>
                  <select id="fp_lastLeduCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00670" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="LAST_LEDU_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                  </select>
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0015419">양음구분</label>
                <span>
                  <select id="fp_atscolcCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P01020" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="ATSCOLC_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                  </select>
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013712">생년월일</label>
                <span>
                  <input id="fp_biryymmDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="BIRYYMM_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014549">근속기준일</label>
                <span>
                  <input id="fp_cnwkstdrDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="CNWKSTDR_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014728">주민등록상생년월일</label>
                <span>
                  <input id="fp_resUpptBiryymmDt_dp" type="text" class="dews-ui-datepicker" data-custom-readonly="true" data-custom-bind-column="RES_UPPT_BIRYYMM_DT" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014212">연차기산일</label>
                <span>
                  <input id="fp_anctRecknDt_dp" type="text" class="dews-ui-datepicker" style="width: 110px;" data-custom-bind-column="ANCT_RECKN_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                  <input id="fp_anctAddnumDy_tb" type="text" class="dews-ui-numerictextbox" style="width: 57px;" data-custom-bind-column="ANCT_ADDNUM_DY" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0073859">승호예정일</label>
                <span>
                  <input id="fp_mltplcStdDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="MLTPLC_STD_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0015420">최종승호일</label>
                <span>
                  <input id="fp_lastMltplcDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="LAST_MLTPLC_DT" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0073860">승급예정일</label>
                <span>
                  <input id="fp_ugrdStdDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="UGRD_STD_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013839">최종승급일</label>
                <span>
                  <input id="fp_lastUgrdDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="LAST_UGRD_DT" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0014960">유연근무시간코드</label>
                <span>
                  <input id="fp_fleBwrkTmCdNm_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="FLE_BWRK_TM_CD_NM" data-custom-bind-table="HR_EMP_MST" data-custom-readonly="true">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0013588">직무이력</label>
                <span>
                  <input id="fp_dutyHstNm_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="DUTY_HST_NM" data-custom-bind-table="HR_EMP_MST" data-custom-readonly="true">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000019">프로젝트</label>
                <span>
                  <input type="text" id="fp_pjtCd_cp" class="dews-ui-codepicker" data-dews-code-field="PJT_NO" data-dews-text-field="PJT_NM" data-dews-help-code="H_PS_PROJ_MST_S" data-dews-help-size="extra" data-dews-help-params="" data-custom-bind-column="PJT_CD" data-custom-bind-text="PJT_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000284">전화번호</label>
                <span>
                  <input id="fp_telNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="TEL_NO" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li id="fp_retire_dp_li">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0076485">정년퇴직일</label>
                <span>
                  <input id="fp_retire_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="LMTAG_RETR_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li class="drs-property-10062">
                <label class="dews-ui-multilingual" data-dews-localize-key="D0016179">임금피크시작일</label>
                <span>
                  <input id="fp_pay_start_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="WAGE_PEAK_START_DT" data-custom-bind-table="HR_PAYPEAK_MST" data-custom-readonly="true">
                </span>
              </li>
              <li class="useBlock">
                <label></label>
                <span>
                </span>
              </li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000008">비고</label>
                <span>
                  <input id="fp_rmkDc_tb" type="text" class="dews-ui-textbox cols-2" data-custom-bind-column="RMK_DC" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li class="li-invisible"></li>
              <li>
                <label class="dews-ui-multilingual" data-dews-localize-key="D0000968">비고1</label>
                <span>
                  <input id="fp_rmkDc1_tb" type="text" class="dews-ui-textbox cols-2" data-custom-bind-column="RMK_DC" data-custom-bind-table="HR_EMPINFO_DTL">
                </span>
              </li>
              <li class="li-invisible"></li>
              <!-- <li>
                <label>비고2</label>
                <span>
                  <input id="fp_rmkDc2_tb" type="text" class="dews-ui-textbox cols-2"
                    data-custom-bind-column="RMK_DC2" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li class="li-invisible"></li>
              <li>
                <label>사용자정의1</label>
                <span>
                  <input id="fp_custom1_tb" type="text" class="dews-ui-textbox"
                    data-custom-bind-column="CUSTOM" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label>사용자정의2</label>
                <span>
                  <input id="fp_custom2_tb" type="text" class="dews-ui-textbox"
                    data-custom-bind-column="CUSTOM" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label>사용자정의3</label>
                <span>
                  <input id="fp_custom3_tb" type="text" class="dews-ui-textbox"
                    data-custom-bind-column="CUSTOM" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li>
              <li>
                <label>직렬</label>
                <span>
                  <input id="fp_none3_tb" type="text" class="dews-ui-textbox"
                    data-custom-bind-column="NONE" data-custom-bind-table="HR_EMP_MST">
                </span>
              </li> -->
            </ul>
          </div>
        </li>
        <!-- 급여기초 탭 -->
        <li id="PayBaseTab" class="dews-tab-item" data-dews-title="급여기초" data-dews-localize-key="D0015458">
          <div class="custom-tab-container">
              <p>
                <button id="btn_calcFamily" class="dews-ui-button dews-ui-multilingual" data-dews-localize-key="D0015422">부양가족계산</button>
              </p>
              <div id="PayBaseFormPanel" class="dews-ui-form-panel">
                <ul>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015423">배우자공제</label>
                    <span>
                      <select id="fp_spoCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="SPO_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015424">부양가족20세</label>
                    <span>
                      <input id="fp_familyteyCnt_ntb" type="text" class="dews-ui-numerictextbox" data-dews-max-length="5" data-dews-min="0" data-custom-bind-column="FAMILYTEY_CNT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015425">부녀자공제</label>
                    <span>
                      <select id="fp_ladyHshrCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="LADY_HSHR_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015426">부양가족60세</label>
                    <span>
                      <input id="fp_familysiyCnt_ntb" type="text" class="dews-ui-numerictextbox" data-dews-max-length="5" data-dews-min="0" data-custom-bind-column="FAMILYSIY_CNT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015427">세대주여부</label>
                    <span>
                      <select id="fp_hshrYnCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="HSHR_YN_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015428">장애인</label>
                    <span>
                      <input id="fp_dspsnFamlCnt_ntb" type="text" class="dews-ui-numerictextbox" data-dews-max-length="5" data-dews-min="0" data-custom-bind-column="DSPSN_FAML_CNT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015429">생산직해당</label>
                    <span>
                      <select id="fp_prDrctWkrCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="PR_DRCT_WKR_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015430">수급자/위탁아동</label>
                    <span>
                      <input id="fp_spdmTrstChilCnt_ntb" type="text" class="dews-ui-numerictextbox" data-dews-max-length="5" data-dews-min="0" data-custom-bind-column="SPDM_TRST_CHIL_CNT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label data-dews-localize-key="D0073858">생산직총급여한도</label>
                    <span>
                      <select id="fp_prFrmlaM2500Yn_rdo" class="dews-ui-radio-group" data-custom-bind-column="PR_FRMLA_M2500_YN" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015432">다자녀추가공제</label>
                    <span>
                      <input id="fp_childSuppDdctCnt_ntb" type="text" class="dews-ui-numerictextbox" data-dews-max-length="5" data-dews-min="0" data-custom-bind-column="CHILD_SUPP_DDCT_CNT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015433">파견근로여부</label>
                    <span>
                      <select id="fp_dsptcLaborYn_rdo" class="dews-ui-radio-group" data-custom-bind-column="DSPTC_LABOR_YN" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015434">외국인단일세율</label>
                    <span>
                      <select id="fp_frnrSinglTrteCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00040" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="FRNR_SINGL_TRTE_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015435">국외근로여부</label>
                    <span>
                      <select id="fp_ocwCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="OCW_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015436">국외근로비과세</label>
                    <span>
                      <select id="fp_noabrodCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="ETC" custom-dropdown-data-code="ABROADTAX" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="NOABROD_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015437">학자금대상여부</label>
                    <span>
                      <select id="fp_sceprepayTrgtCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="SCEPREPAY_TRGT_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015438">학자금상환액</label>
                    <span>
                      <input id="fp_sceprepayAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="SCEPREPAY_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0092093">종교인소득반영</label>
                    <span>
                      <select id="fp_srcTaxBneiCd_ddl" class="dews-ui-dropdownlist" custom-dropdown-data-module="HR" custom-dropdown-data-code="P06300" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="SRC_TAX_BNEI_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0092094">학자금상환종료일</label>
                    <span>
                      <input id="fp_sceprepayAmt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="SCEPREPAY_END_DT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015439">거주자여부</label>
                    <span>
                      <select id="fp_residntCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="RESIDNT_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="1">Yes</option>
                        <option value="2">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015440">거주지국</label>
                    <span>
                      <input id="fp_resdncCd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-help-code="H_MA_CODEDTL_S" data-dews-help-size="medium" data-dews-help-params="module_cd=MA&field_cd=P00170" data-custom-bind-column="RESDNC_CD" data-custom-bind-text="RESDNC_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015441">국민연금해당</label>
                    <span>
                      <select id="fp_npncrrenncCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="ETC" custom-dropdown-data-code="PENSION" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="NPNCRRENNC_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015442">국민(사학)연금료</label>
                    <span>
                      <input id="fp_npnAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="NPN_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015443">건강보험해당</label>
                    <span>
                      <select id="fp_hlthinsInsCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="HLTHINS_INS_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015444">건강보험료</label>
                    <span>
                      <input id="fp_hlthinsAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="HLTHINS_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015445">고용보험해당</label>
                    <span>
                      <select id="fp_empyinsfoTargnoCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="EMPYINSFO_TARGNO_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0005960">고용보험료</label>
                    <span>
                      <input id="fp_empyinsfoAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="EMPYINSFO_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015561">노인장기요양경감</label>
                    <span>
                      <select id="fp_odsnRcperRducttrgetCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="ETC" custom-dropdown-data-code="YN" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="ODSN_RCPER_RDUCTTRGET_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015447">노인장기요양보험료</label>
                    <span>
                      <input id="fp_odsnLngtrrcperInsuAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="ODSN_LNGTRRCPER_INSU_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015446">산재보험해당</label>
                    <span>
                      <select id="fp_indusacInsuTrgtCd_rdo" class="dews-ui-radio-group" data-custom-bind-column="INDUSAC_INSU_TRGT_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0014399">수습종료일</label>
                    <span>
                      <!-- <select id="fp_loctaxAplcntarCd_ddl" class="dews-ui-dropdownlist"
                        data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM"
                        data-custom-bind-column="LOCTAX_APLCNTAR_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select> -->
                      <input id="fp_apntcExpyDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="APNTC_EXPY_DT" data-custom-bind-table="HR_EMP_MST">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0073861">감면대상자</label>
                    <span>
                      <select id="fp_reductTrgtFg_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P05200" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="REDUCT_TRGT_FG" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0073864">감면율</label>
                    <span>
                      <select id="fp_reductTpCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="reductTpCdDS" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="REDUCT_TP_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015449">감면종료일</label>
                    <span>
                      <input id="fp_reductEndDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="REDUCT_END_DT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label data-dews-localize-key="D0073821">감면적용구분</label>
                    <span>
                      <select id="fp_reductAplyFg_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P05900" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="REDUCT_APLY_FG" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0102068">경영성과급감면(중소)</label>
                    <span>
                      <select id="fp_reductMgtMrtp_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="reductMgtMrtpDS" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="MGT_MRTP_REDUCT_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <span></span>
                  </li>

                  <!-- <li>
                    <label>세액조정</label>
                    <span>
                      <select id="fp_taxamtDdctRt_ddl" class="dews-ui-dropdownlist"
                        custom-dropdown-data-module="HR" custom-dropdown-data-code="P01470" custom-dropdown-add-all="true"
                        data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM"
                        data-custom-bind-column="TAXAMT_DDCT_RT" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label>과표조정금액</label>
                    <span>
                      <input id="fp_taxstdSuppAmt_tb" type="text" class="dews-ui-numerictextbox"
                        data-custom-bind-column="TAXSTD_SUPP_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li> -->
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015452">은행(급여)</label>
                    <span>
                      <input id="fp_bank1Cd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="BANK_CD" data-dews-text-field="FNLT_NM" data-dews-help-code="H_HR_BANK_MST_S" data-dews-help-size="big" data-dews-help-params="combo0=KR" data-custom-bind-column="BANK1_CD" data-custom-bind-text="BANK1_NM" data-custom-bind-table="HR_EMPPAY_DTL">
                      <input id="fp_accnt1No_tb" type="text" class="dews-ui-textbox" style="width: 157px; margin: 0px 2px 0px 2px; z-index: 1;" maxlength="30" placeholder="계좌번호" data-custom-bind-column="ACCNT1_NO" data-custom-bind-table="HR_EMPPAY_DTL" data-dews-placeholder-localize-key="D0001201">
                      <input id="fp_dpsr1Nm_tb" type="text" class="dews-ui-textbox" style="width: 100px; z-index: 1;" maxlength="50" placeholder="예금주" data-custom-bind-column="DPSR1_NM" data-custom-bind-table="HR_EMPPAY_DTL" data-dews-placeholder-localize-key="D0001200">
                      <label for="repAccChk1" style="margin-left: 2px;" data-dews-localize-key="D0101613">대표계좌</label>
                      <input type="checkbox" id="repAccChk1" class="dews-ui-checkbox" style="z-index: 1;" data-custom-bind-column="DLGT_ACNT_CD" data-custom-bind-table="HR_EMPPAY_DTL" data-dews-bind-checked-value="1" data-dews-bind-unchecked-value="0">
                    </span>
                  </li>
                  <li class="li-invisible" style="z-index: -1;"></li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015453">은행(경비)</label>
                    <span>
                      <!-- data-dews-help-code="H_CI_BANK_MST_S" data-dews-help-width="800" data-dews-help-height="610" 도움창 변경 -> 관련핌스 : M20211130082 -->
                      <input id="fp_bank2Cd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="BANK_CD" data-dews-text-field="FNLT_NM" data-dews-help-code="H_HR_BANK_MST_S" data-dews-help-size="big" data-dews-help-params="combo0=KR" data-custom-bind-column="BANK2_CD" data-custom-bind-text="BANK2_NM" data-custom-bind-table="HR_EMPPAY_DTL">
                      <input id="fp_accnt2No_tb" type="text" class="dews-ui-textbox" style="width: 157px; margin: 0px 2px 0px 2px; z-index: 1;" maxlength="30" placeholder="계좌번호" data-custom-bind-column="ACCNT2_NO" data-custom-bind-table="HR_EMPPAY_DTL" data-dews-placeholder-localize-key="D0001201">
                      <input id="fp_dpsr2Nm_tb" type="text" class="dews-ui-textbox" style="width: 100px; z-index: 1;" maxlength="50" placeholder="예금주" data-custom-bind-column="DPSR2_NM" data-custom-bind-table="HR_EMPPAY_DTL" data-dews-placeholder-localize-key="D0001200">
                      <label for="repAccChk2" style="margin-left: 2px;" data-dews-localize-key="D0101613">대표계좌</label>
                      <input type="checkbox" id="repAccChk2" class="dews-ui-checkbox" style="z-index: 1;" data-custom-bind-column="DLGT_ACNT_CD" data-custom-bind-table="HR_EMPPAY_DTL" data-dews-bind-checked-value="2" data-dews-bind-unchecked-value="0">
                    </span>
                  </li>
                  <li class="li-invisible" style="z-index: -1;"></li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0000230">계정유형</label>
                    <span>
                      <select id="fp_accttypeCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00310" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="ACCTTYPE_CD" data-custom-bind-table="HR_EMPPAY_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0017031">예산유형</label>
                    <span>
                      <input id="fp_bgTpCd_cp" type="text" class="dews-ui-codepicker readonly" data-dews-code-field="BG_TP_CD" data-dews-text-field="BG_TP_NM" data-dews-help-code="H_HR_SLACCT_MST_S" data-dews-help-width="600" data-dews-help-height="530" data-dews-help-params="" data-custom-bind-column="BG_TP_CD" data-custom-bind-text="BG_TP_NM" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015454">연봉</label>
                    <span>
                      <input id="fp_anicAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="ANIC_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015455">월급</label>
                    <span>
                      <input id="fp_mntslrAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="MNTSLR_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015456">일급</label>
                    <span>
                      <input id="fp_fstclssAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="FSTCLSS_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015457">시급</label>
                    <span>
                      <input id="fp_tmpayAmt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="TMPAY_AMT" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label data-dews-localize-key="D0015562">건강보험증번호</label>
                    <span>
                      <input id="fp_hlthinsNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="HLTHINS_NO" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label data-dews-localize-key="D0099700">국민연금관리번호</label>
                    <span>
                      <input id="fp_npnmanage_no" type="text" class="dews-ui-textbox" data-custom-bind-column="NPNMANAGE_NO" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0014913">체류자격</label>
                    <span>
                      <input id="fp_stayQua_cd" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="STAY_QUA_CD" data-custom-bind-text="STAY_QUA_NM" data-dews-help-size="medium" data-dews-help-params="module_cd=HR&field_cd=P05310" data-dews-help-code="H_MA_CODEDTL_S" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label data-dews-localize-key="D0073428">근로자원부번호</label>
                    <span>
                      <input id="fp_empyinsfoNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="EMPYINSFO_NO" data-custom-bind-table="HR_EMPPAY_DTL">
                    </span>
                  </li>
                </ul>
              </div>
          </div>
        </li>
        <li id="PersonalInfoTab" class="dews-tab-item" data-dews-title="인적사항" data-dews-localize-key="D0015485">
          <div class="custom-tab-container">
              <div id="PersonalInfoFormPanel" class="dews-ui-form-panel">
                <ul>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0014400">채용구분</label>
                    <span>
                      <select id="fp_hireFgCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00730" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="HIRE_FG_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0014401">입사구분</label>
                    <span>
                      <select id="fp_jncoFgCd_ddl" class="dews-ui-dropdownlist" style="width: 110px;" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00720" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="JNCO_FG_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                      <input id="fp_jncoExtgCnt_ntb" type="text" class="dews-ui-numerictextbox" style="width: 57px;" data-custom-bind-column="JNCO_EXTG_CNT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015459">거주구분</label>
                    <span>
                      <select id="fp_liveFgCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P03560" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="LIVE_FG_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015460">결혼여부</label>
                    <span>
                      <select id="fp_mrrgYn_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P01140" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="MRRG_YN" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015461">종교</label>
                    <span>
                      <select id="fp_rlgnFgCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00880" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="RLGN_FG_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015462">결혼일</label>
                    <span>
                      <input id="fp_mrrgDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="MRRG_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015463">신장</label>
                    <span>
                      <input id="fp_sttrQt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="STTR_QT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015464">체중</label>
                    <span>
                        <input id="fp_wghtQt_ntb" type="text" class="dews-ui-numerictextbox" data-custom-bind-column="WGHT_QT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015465">시력(좌/우)</label>
                    <span>
                      <input id="fp_sghtLeftQt_ntb" type="text" class="dews-ui-numerictextbox" style="width: 80px;" data-dews-format="#,##0.0" data-dews-decimals="1" data-dews-restrict-decimals="true" data-custom-bind-column="SGHT_LEFT_QT" data-custom-bind-table="HR_EMPINFO_DTL">
                        /
                      <input id="fp_sghtRghtQt_ntb" type="text" class="dews-ui-numerictextbox" style="width: 80px;" data-dews-format="#,##0.0" data-dews-decimals="1" data-dews-restrict-decimals="true" data-custom-bind-column="SGHT_RGHT_QT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015466">혈액형</label>
                    <span>
                      <select id="fp_bldtpCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00830" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="BLDTP_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015467">취미</label>
                    <span>
                      <input id="fp_hobCd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-help-code="H_MA_CODEDTL_S" data-dews-help-size="medium" data-dews-help-params="module_cd=HR&field_cd=P00890" data-custom-bind-column="HOB_CD" data-custom-bind-text="HOB_CD_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                      <input id="fp_hobNm_tb" type="text" class="dews-ui-textbox" style="width: 331px; margin: 0px 2px 0px 2px; z-index: 1;" data-custom-bind-column="HOB_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li class="li-invisible"></li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015468">특기</label>
                    <span>
                      <input id="fp_tlntCd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-help-code="H_MA_CODEDTL_S" data-dews-help-size="medium" data-dews-help-params="module_cd=HR&field_cd=P00890" data-custom-bind-column="TLNT_CD" data-custom-bind-text="TLNT_CD_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                      <input id="fp_tlntNm_tb" type="text" class="dews-ui-textbox" style="width: 331px; margin: 0px 2px 0px 2px; z-index: 1;" data-custom-bind-column="TLNT_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li class="li-invisible"></li>
                  <li class="li-rowspan-2">
                    <label class="rowspan-2 dews-ui-multilingual" data-dews-localize-key="D0015469">현재주소</label>
                    <span class="colspan-2">
                      <input id="fp_curPostNo_zcp" type="text" class="dews-ui-zipcodepicker" style="width: 100px;" data-dews-bind-code="CUR_POST_NO" data-dews-address-type="street" data-dews-address-bind="fp_baseCurAddr_tb" data-custom-bind-column="CUR_POST_NO" data-custom-bind-text="BASE_CUR_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                      <input id="fp_baseCurAddr_tb" type="text" class="dews-ui-textbox" maxlength="90" style="width: 403px; z-index: 1;" data-custom-bind-column="BASE_CUR_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                    <span class="colspan-2">
                      <input id="fp_dtlCurAddr_tb" type="text" class="dews-ui-textbox cols-2" maxlength="90" style="width: 506px; margin-top: -9px;" data-custom-bind-column="DTL_CUR_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li class="li-invisible-cols-2"></li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0014823">장애인여부</label>
                    <span>
                      <select id="fp_dsbYnCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="ETC" custom-dropdown-data-code="YN" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="DSB_YN_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015470">장애구분</label>
                    <span>
                      <select id="fp_dsbFgCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P01150" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="DSB_FG_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015471">장애종류</label>
                    <span>
                      <select id="fp_dsbTp_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00860" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="DSB_TP" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015472">장애등급</label>
                    <span>
                      <select id="fp_dsbGrdCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00870" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="DSB_GRD_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015481">보훈여부</label>
                    <span>
                      <select id="fp_vtrnTrgtCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="ETC" custom-dropdown-data-code="YN" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="VTRN_TRGT_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015473">장애인정일</label>
                    <span>
                      <input id="fp_dsbAckDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="DSB_ACK_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0029061">보훈구분</label>
                    <span>
                      <select id="fp_vtrnFgCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P03550" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="VTRN_FG_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li id="fp_dsbTmnn_dt_li_X10062">
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0083859">장애해지일</label>
                    <span>
                      <input id="fp_dsbTmnn_dt" type="text" class="dews-ui-datepicker" data-custom-bind-column="DSB_TMNN_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015482">보훈관계</label>
                    <span>
                      <select id="fp_vtrnRelCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00710BOHUN" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="VTRN_REL_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015483">보훈등급</label>
                    <span>
                      <select id="fp_vtrnGrdCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00850" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="VTRN_GRD_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015484">보훈번호</label>
                    <span>
                      <input id="fp_vtrnNo_tb" type="text" class="dews-ui-textbox" maxlength="90" data-custom-bind-column="VTRN_NO" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015474">병역구분</label>
                    <span>
                      <select id="fp_mtrscFgCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00760" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="MTRSC_FG_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015475">제대구분</label>
                    <span>
                      <select id="fp_dmblzFgCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00810" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="DMBLZ_FG_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015476">군별</label>
                    <span>
                      <select id="fp_amftCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00770" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="AMFT_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015477">계급</label>
                    <span>
                      <select id="fp_mlhCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00800" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="MLH_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015478">미필사유</label>
                    <span>
                      <select id="fp_exmtReasonCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00790" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="EXMT_REASON_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0073863">역종</label>
                    <span>
                      <select id="fp_cossCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P06990" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="COSS_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015479">입대일자</label>
                    <span>
                      <input id="fp_enstDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="ENST_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0015480">제대일자</label>
                    <span>
                      <input id="fp_layoffDt_dp" type="text" class="dews-ui-datepicker" data-custom-bind-column="LAYOFF_DT" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label class="dews-ui-multilingual" data-dews-localize-key="D0073862">군번</label>
                    <span>
                      <input id="fp_ssnNo_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="SSN_NO" data-custom-bind-table="HR_EMPINFO_DTL">
                    </span>
                  </li>
                  <li>
                    <label data-dews-localize-key="D0017134">병과</label>
                    <span>
                      <select id="fp_bmsCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P00780" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="BMS_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                      </select>
                    </span>
                  </li>
                </ul>
              </div>
          </div>

        </li>
        <li id="EtcInfoTab" class="dews-tab-item" data-dews-title="기타정보" data-dews-localize-key="D0073822">
          <div class="custom-tab-container">
            <div id="EtcInfoFormPanel" class="dews-ui-form-panel">
              <ul>
                <li>
                  <label data-dews-localize-key="D0070019">전화번호(기타)</label>
                  <span>
                    <input id="fp_tel2No_tb" type="text" class="dews-ui-textbox" data-custom-bind-column="TEL2_NO" data-custom-bind-table="HR_EMPINFO_DTL">
                  </span>
                </li>
                <li>
                  <label id="fp_gwLcnsCd_lb" class="dews-ui-multilingual" data-dews-localize-key="D0113427">GW라이선스</label>
                  <span id="fp_gwLcnsCd_sp">
                    <select id="fp_gwLcnsCd_ddl" class="dews-ui-dropdownlist" data-dews-selectable="SELECTABLE" data-dews-selectable-false-value="N" custom-dropdown-data-module="HR" custom-dropdown-data-code="P01580" custom-dropdown-add-all="true" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-custom-bind-column="GW_LCNS_CD" data-custom-bind-table="HR_EMPINFO_DTL">
                    </select>
                  </span>
                </li>
                <li>
                  <label data-dews-localize-key="D0070018">은행(기타)</label>
                  <span>
                    <input id="fp_bank3Cd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="BANK_CD" data-dews-text-field="FNLT_NM" data-dews-help-code="H_HR_BANK_MST_S" data-dews-help-size="big" data-dews-help-params="combo0=KR" data-custom-bind-column="BANK3_CD" data-custom-bind-text="BANK3_NM" data-custom-bind-table="HR_EMPPAY_DTL">
                    <input id="fp_accnt3No_tb" type="text" class="dews-ui-textbox" style="width: 157px; margin: 0px 2px 0px 2px; z-index: 1;" maxlength="30" placeholder="계좌번호" data-custom-bind-column="ACCNT3_NO" data-custom-bind-table="HR_EMPPAY_DTL" data-dews-placeholder-localize-key="D0001201">
                    <input id="fp_dpsr3Nm_tb" type="text" class="dews-ui-textbox" style="width: 170px; z-index: 1;" maxlength="50" placeholder="예금주" data-custom-bind-column="DPSR3_NM" data-custom-bind-table="HR_EMPPAY_DTL" data-dews-placeholder-localize-key="D0001200">
                  </span>
                </li>
                <li class="li-invisible"></li>
                <li class="li-rowspan-2">
                  <label class="rowspan-2" data-dews-localize-key="D0029049">본적</label>
                  <span class="colspan-2">
                    <input id="fp_prmdmclPostNo_zcp" type="text" class="dews-ui-zipcodepicker" style="width: 100px;" data-dews-bind-code="RES_POST_NO" data-dews-address-type="street" data-dews-address-bind="fp_prmdmclAddr_tb" data-custom-bind-column="PRMDMCL_POST_NO" data-custom-bind-text="PRMDMCL_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                    <input id="fp_prmdmclAddr_tb" type="text" class="dews-ui-textbox" maxlength="90" style="width: 403px; z-index: 1;" data-custom-bind-column="PRMDMCL_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                  </span>
                  <span class="colspan-2">
                    <input id="fp_dtlPrmdmclAddr_tb" type="text" class="dews-ui-textbox cols-2" maxlength="90" style="width: 506px; margin-top: -9px;" data-custom-bind-column="DTL_PRMDMCL_ADDR" data-custom-bind-table="HR_EMPINFO_DTL">
                  </span>
                </li>
                <li class="li-invisible-cols-2"></li>
                <li class="drs-property-10005">
                  <label data-dews-localize-key="D0080907">희망직무</label>
                  <span>
                    <input id="fp_hopeDuty1Cd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-help-code="H_MA_CODEDTL_S" data-dews-help-size="medium" data-dews-help-params="module_cd=HR&field_cd=P00920" data-custom-bind-column="HOPE_DUTY1_CD" data-custom-bind-text="HOPE_DUTY1_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                  </span>
                </li>
                <li class="drs-property-10005">
                  <label data-dews-localize-key="D0080908">잘할수있는직무</label>
                  <span>
                    <input id="fp_hopeDuty2Cd_cp" type="text" class="dews-ui-codepicker" data-dews-code-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-help-code="H_MA_CODEDTL_S" data-dews-help-size="medium" data-dews-help-params="module_cd=HR&field_cd=P00920" data-custom-bind-column="HOPE_DUTY2_CD" data-custom-bind-text="HOPE_DUTY2_NM" data-custom-bind-table="HR_EMPINFO_DTL">
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </li>
        <li id="AdditionalInfoTab" class="dews-tab-item" data-dews-title="추가정보" data-dews-localize-key="D0001204"></li>
        <li id="LookupTab" class="dews-tab-item" data-dews-title="조회사항" data-dews-localize-key="D0015486"></li>
      </ul>
    </div>
  </div>
</div>
</div>
<script src="/view/js/HR/hr.common.js"></script>

<style>
  #content_PAMPHM00100 #CardListCondition {
    padding: 10px 10px 10px 10px;
    background-color: #f5f5f5;
    border-top: 2px solid #666;
    border-left: 1px solid #d9d9d9;
    border-right: 1px solid #d9d9d9;
  }
  /* 카드리스트 */
  #content_PAMPHM00100 #EmpCardList {
    height: calc(100% - 50px)!important;
    border: 1px solid #ccc;
  }
  #content_PAMPHM00100 #EmpCardList>.k-grid-content {
    height: calc(100% - 28px)!important;
  }
  /* 프로필패널 - 사진 프레임 */
  #content_PAMPHM00100 .dews-custom-profile-panel {
    height: inherit;
    width: inherit;
    background-color: #e6ecf5;
  }
  #content_PAMPHM00100 .dews-custom-profile-photo-frame {
    height: inherit;
    width: 107px;
    position: relative;
    float: left;
  }
  #content_PAMPHM00100 .dews-custom-profile-button-frame {
    width: 300px;
    height: inherit;
    padding-top: 33px;
    float: right;
    text-align: right;
    position: absolute;
    right: 10px;
  }
  #content_PAMPHM00100 .dews-custom-profile-photo {
    display: block;
    height: 80px;
    width: 80px;
    background: url('/view/images/HR/hr_profile.png');
    background-size: 80px 80px;
    border-radius: 50%;
    position: absolute;
    top: calc(50% - 80px/2);
    left: calc(50% - 80px/2);
  }
  #content_PAMPHM00100 .dews-custom-profile-photo-edit-icon {
    display: none;
    height: 30px;
    width: 30px;
    background: rgba(255,255, 255,0.9) url('/view/images/HR/ico_editpic.png') no-repeat center;
    border-radius: 50%;
    cursor: pointer;
    position: absolute;
    top: 50px;
    left: 53px;
  }

  /* 프로필패널 - 성명/직위/소속 프레임 */

  #content_PAMPHM00100 .dews-custom-profile-info-frame {
    float: left;
    min-height: inherit;
    padding: 25px 0px 25px 0px
  }
  #content_PAMPHM00100 .dews-custom-profile-info-frame .no-space {
    float: left;
  }
  #content_PAMPHM00100 .dews-custom-profile-employee {
    display: block;
    height: 26px;
    font-weight: bold;
    font-size: 18px;
    color: #000;
    text-align: left;
  }
  #content_PAMPHM00100 .dews-custom-profile-division {
    display: block;
    height: 21px;
    font-size: 13px;
    color: #666;
    text-align: left;
  }

  /* 프로필패널 - 버튼 프레임(수정/파일) */
  #content_PAMPHM00100 .dews-custom-profile-button {
    display: inline-block;
    width: 67px;
    height: 30px;
    border: 1px solid #bcc8ce;
    background-color: transparent;
    border-radius: 28px;
    margin-right: 4px;
    cursor: pointer;
  }
  #content_PAMPHM00100 .dews-custom-profile-button:hover {
    border: 1px solid #777;
  }
  #content_PAMPHM00100 .dews-custom-profile-info-edit-icon {
    display: block;
    float: left;
    top: calc(50% - 8px);
    left: 12px;
    position: relative;
    margin-right: 3px;
    width: 16px;
    height: 16px;
    background: url('/view/images/HR/ico_modify.png') no-repeat center;
  }
  #content_PAMPHM00100 #btn_fileUpload {
    margin-right: 18px;
  }
  #content_PAMPHM00100 .dews-custom-profile-file-upload-icon {
    display: block;
    float: left;
    top: calc(50% - 8px);
    left: 12px;
    position: relative;
    margin-right: 3px;
    width: 16px;
    height: 16px;
    background: url('/view/images/HR/ico_attach.png') no-repeat center;
  }
  #content_PAMPHM00100 .dews-custom-profile-button-frame-text {
    display: block;
    float: left;
    top: calc(50% - 10px);
    left: 12px;
    position: relative;
  }
  /* #content_PAMPHM00100 .dews-custom-profile-countbox {
    display: inline-block;
    float: left;
    top: calc(50% - 8px);
    left: 12px;
    position: relative;
    margin-right: 3px;
    width: 16px;
    height: 16px;
    line-height: 1.2;
  } */
  /* container 영역 */
  #content_PAMPHM00100 .dews-container-item.normal {
    min-width: 699px;
  }
  /* tab-title 영역 설정 */
  #content_PAMPHM00100 .dews-tab-titles {
    height: 30px;
  }
  #content_PAMPHM00100 .dews-tab-item-title {
    padding: 4px 15px 0;
  }
  /* tab-items 영역 설정 */
  #content_PAMPHM00100 .dews-tab-items {
    overflow: auto;
    padding-top: 0px;
    border: 1px solid #ccc;
    height: calc(100% - 134px);
    min-width: 699px;
  }
  /* tab-item 영역설정 */
  #content_PAMPHM00100 .dews-tab-item {
    padding: 20px 10px 0px 10px;
    min-width: 680px;
  }
  /* 프로필패널 아래의 탭컨텐트 사이즈 조절 (기본정보1, 기본정보2) */
  #content_PAMPHM00100 #BasicInfo1Tab .dews-tab-content,
  #content_PAMPHM00100 #BasicInfo2Tab .dews-tab-content,
  #content_PAMPHM00100 #EtcInfoTab .dews-tab-content {
    height: calc(100% - 98px)!important;
  }
  /* 폼패널 */
  #content_PAMPHM00100 .dews-form-panel-form ul {
    padding: 0px 0px 10px 0px;
  }
  #content_PAMPHM00100 .dews-form-panel-form ul>li {
    margin: 0px;
    width: 336px;
    border-bottom: 1px solid #e0e0e0;
  }
  #content_PAMPHM00100 #BasicInfo1FormPanel,
  #content_PAMPHM00100 #BasicInfo2FormPanel,
  #content_PAMPHM00100 #PayBaseFormPanel,
  #content_PAMPHM00100 #PersonalInfoFormPanel,
  #content_PAMPHM00100 #EtcInfoFormPanel {
    /* height: 560px!important; */
    border-bottom: none;
    /* overflow: visible; */
  }
  #content_PAMPHM00100 .dews-form-panel-form ul>li>label {
    width: 146px;
    height: 39px;
    line-height: 36px;
    padding: 0px 8px 0px 0px;
    font-size: 12px #000;
    background-color: #f5f5f5;
  }
  #content_PAMPHM00100 .dews-form-panel-form ul>li>label.rowspan-2 {
    height: 70px;
    line-height: 72px;
  }
  #content_PAMPHM00100 .dews-form-panel-form ul>li>span {
    width: 190px;
    height: 39px;
    padding: 6px 6px 6px 6px;
  }
  #content_PAMPHM00100 .dews-form-panel-form ul>li.col-2.row-2 {
    height: 71px;
  }
  #content_PAMPHM00100 .dews-form-panel-form ul>li.li-invisible {
    height: 40px;
  }
  #content_PAMPHM00100 .dews-form-panel-form ul>li.li-invisible-cols-2 {
    height: 71px;
  }
  #content_PAMPHM00100 .cols-2 {
    z-index: 1;
    width: 506px;
  }
  #content_PAMPHM00100 .li-rowspan-2 {
    height: 71px;
  }
  #content_PAMPHM00100 .half-size {
    width: 84px;
  }
  /* 조합원번호 체크 */
  #content_PAMPHM00100 #std_Z0001_chk_btn {
    margin-bottom: 5px;
    float: right;
  }
  /* 부양가족계산버튼 */
  #content_PAMPHM00100 #btn_calcFamily {
    margin-bottom: 5px;
    float: right;
  }
  /* 퇴직자정보이관버튼 2021.01.04 */
  #content_PAMPHM00100 #btn_retireInfoTrans {
    margin-bottom: 5px;
    float: right;
  }
  #content_PAMPHM00100 .custom-picker-button {
    margin: 1px 1px 0px 0px;
  }
  #content_PAMPHM00100 .drs-property-10005 {
    display: none;
  }
  #content_PAMPHM00100 .drs-property-10062 {
    display: none;
  }

  /* 라디오버튼 일반 */
  /* #content_PAMPHM00100 label[custom-readonly="false"].dews-radio-group-item span:before {
    background: #fff;
    border: 1px solid #ccc;
  }
  #content_PAMPHM00100 label[custom-readonly="false"].dews-radio-group-item input:checked + span:after {
    background: #c3c3c3;
  } */
  /* 라디오그룹 읽기전용속성 */
  /* #content_PAMPHM00100 label[custom-readonly="true"].dews-radio-group-item span:before {
    background: #f2f2f2;
    border: 1px solid #ccc;
  }
  #content_PAMPHM00100 label[custom-readonly="true"].dews-radio-group-item input:checked + span:after {
    background: #c3c3c3;
  } */
</style>

<script>
  //# sourceURL=PAMPHM00100.js
  dews.ready(function () {
    dews.ui.mainbuttons.delete.useDefaultConfirm = false;

    let changeEndFlag = false;
    let secondRepAccCkhFlag = false; // 대표계좌 체크 이벤트가 두번째 타는건지 저장하는 변수
    let changeRetrDateGempNo = new Array(); // '퇴사일자(퇴직일자)'가 빈칸에서 날짜가 입력된 사원들
    let tempChangeRetrDateGempNo = new Array();
    let changeRetrDateList = new Map();
    let btn_edit_flag = true;
    let btn_fileUpload_flag = true;

    // ▦▦▦▦▦▦ 변수선언 ▦▦▦▦▦▦
    {
      var dewself = this;

      dewself.version.view = '1.0.23072604';
      dewself.version.service = 'PersonalAdministrationManagementPHMService';
      // var today = new Date().toISOString().slice(0,10).replace(/-/g,"");
      var today = dews.date.format(new Date(), 'yyyyMMdd');
      var CONFIG;
      var ciCtrlConfig_CI00012 = "";  // 통합사원번호 채번규칙 통합(ci)환경설정 ['1' : 자동(통합자동채번등록), '2' : 자동(사원번호), '3' : 수기]
      var objConfigMst = derp.HR.getConfigMstData('COM001|COM002|COM005|COM006|COM007|COM024|PAY016|ETC014|SLA002|SLA003|COM042|COM047|COM048', null, null); // HR_CONFIG_MST 객체
      var objConfigDtl = derp.HR.getConfigDtlData('COM006|COM007|PAY016|ETC014', null, null); // HR_CONFIG_DTL 객체
      var hrSessionData = derp.HR.getHrSessionData();
      var companySessionData = derp.HR.getCompanySessionData();
      var tabAuthChecker = objConfigMst.COM005[0].CHAR_CD_VAL_DC;
      var configMstCom042 = objConfigMst.COM042[0].CHAR_CD_VAL_DC; // [인사환경설정]메뉴의 '사원등록계정유형변경사용여부'
      var configMstCom047 = objConfigMst.COM047[0].CHAR_CD_VAL_DC; // [인사환경설정]메뉴의 'GW라이선스 사용여부'
      var configMstCom048 = objConfigMst.COM048[0].CHAR_CD_VAL_DC; // [인사환경설정]메뉴의 '사원구분별권한설정'

      var formerTabId;
      var totalData = {};             // 데이터 저장 객체
      // var objCodebaseMst = {};        // HR_CODEBASE_MST 객체
      var objCodeDtl = {};            // MA_CODEDTL + @ 객체
      var objDdlDataSource = {};      // 드롭다운 데이터소스 객체
      var cardListParam = {};
      var deadlineData = getPayDeadlineData();
      var dtSrcTaxBneiCd;
      var ruleIsExtValId; // 인사환경설정 채번규칙일 경우 고용구분이 맞지 않을때 수정가능하도록 구분하는 변수(M20220103163)
      // 환경설정 값에 탭별권한을 사용여부에 따라 처리 변경?
      var deptOrderConfig;
      derp.HR.setHrDetail(dewself.fp_bizareaCd_cp, dewself.fp_deptCd_cp, null, dewself); // 컨트롤 M/D 연결

      getCiCtrlConfig('CI','CI00012', 'Y');  // 통합사원번호 채번규칙 통합(ci)환경설정 ['1' : 자동(통합자동채번등록), '2' : 자동(사원번호), '3' : 수기]

      if(dews.ui.page.mainEnv.drsCode == '20171' || dews.ui.page.mainEnv.drsCode == '20172') {
        dewself.$content.find("#fp_slstCd_li").remove();
      }else {
        dewself.$content.find("#fp_slstCd_li2").remove();
      }

      if (tabAuthChecker === '1' && dews.ui.page.menu.id === 'PAMPHM00100' && (dewself.user.empCode||'UNREGISTERED') === 'UNREGISTERED') {
        dews.error(dews.localize.get('권한이 없는 사용자입니다.', 'M0005943', '', 'PAMPHM00100'));
        dews.ui.page.close();

        return false;
      }

      if(configMstCom047 == '2') {
        // 기타정보TAB 에 GW라이선스 항목 숨김 처리.
        dewself.$content.find("#fp_gwLcnsCd_lb").text("");
        dewself.$content.find("#fp_gwLcnsCd_sp").children().css("display", "none");
      }

      dewself.$content.find("#repAccChk1").parent().css("margin-left", 5);
      dewself.$content.find("#repAccChk2").parent().css("margin-left", 5);

      if(dewself.obj != null && dewself.obj != undefined) {
        if(dewself.obj.menu_id == 'COCHRM00200') { // '통합사원조회' 메뉴에서 전달 받았으면
          if(dewself.obj.emp_no != null && dewself.obj.emp_no != undefined) {
            dewself.cdt_keyword_tb.text(dewself.obj.emp_no);
          }
        }
      }

      // [권한그룹메뉴설정] 메뉴의 버튼통제 로직
      if(dewself.authority) {
        for(const authBtn of dewself.authority.menuControl) {
          // console.log("통제 authBtn:", authBtn);
          if(authBtn.control == "btn_edit_temp") {
            dewself.$content.find("#btn_edit_temp").hide();
            if(authBtn.flag == "12") { // 12:권한통제(보임)
              dewself.$content.find("#btn_edit").show();
              btn_edit_flag = true;
            }else {
              dewself.$content.find("#btn_edit").hide();
              btn_edit_flag = false;
            }
          }else if(authBtn.control == "btn_fileUpload_temp") {
            dewself.$content.find("#btn_fileUpload_temp").hide();
            if(authBtn.flag == "12") { // 12:권한통제(보임)
              dewself.$content.find("#btn_fileUpload").show();
              btn_fileUpload_flag = true;
            }else {
              dewself.$content.find("#btn_fileUpload").hide();
              btn_fileUpload_flag = false;
            }
          }
        }
      }

      // 빈 모델
      var emptyModel;
      // 카드리스트
      var EmpCardList;
      var EmpCardListDataSource;
      var currentRowUid;
      var standardConfigSet;
      var CompUtil = {};
      var detailConds = {
        bizarea_cd: null,
        dept_cd: null,
        emp_tp: null,
        ogrp_cd: null,
        jknd_cd: null,
        duty_cd: null,
        pstn_cd: null,
        // slst_cd_from: null,
        // slst_cd_to: null,
        slst_cd: null,
        odty_cd: null,
        posi_cd: null,
        cc_cd: null,
        pjt_cd: null,
        pickerData: null,
        configMstCom048: configMstCom048
      };
      var StandardConfigSet;
      var requiredItemList = getRequiredItemList();
      var defaultRequiredItemList = requiredItemList.default;
      var configRequiredItemList = requiredItemList.config;
      CompUtil = derp.HR.ComponentUtil.getInstance(dewself);
      StandardConfigSet = CompUtil.getStandardConfig('PAMPHM00100');
      CompUtil.makeComponent(StandardConfigSet);


      // 관련핌스 : P20211202004 급여계산에서 선택된 사원번호 검색어 부분 세팅
      if(dewself.initialData != undefined) {
        if(dewself.initialData.caller_nm != 'powersearch') { // 파워검색에서 넘어온 파라미터가 아니면
          dewself.cdt_keyword_tb.text(dewself.initialData.EMP_NO);
        }
      }
    }

    // ▦▦▦▦▦▦ DRS코드별 변경로직 적용 ▦▦▦▦▦▦
    {
      console.log('DRS CODE: ', dewself.mainEnv.drsCode);
      setDrsProperties(dewself.mainEnv.drsCode);

    }

    // ▦▦▦▦▦▦ 태그 Attribute 추가 ▦▦▦▦▦▦
    {
      setBindingAttributes();
    }

    // ▦▦▦▦▦▦ 개인 마스킹정보 설정 ▦▦▦▦▦▦
    {
      setSecureMask();
    }

    // ▦▦▦▦▦▦ 변수 초기화 ▦▦▦▦▦▦
    {
      emptyModel = getEmptyDataSet();
      var isDigitValid;
      var controlDigitData;

      CONFIG = makeConfigSettings(objConfigMst, objConfigDtl);
      console.log('CONFIG SET', CONFIG);
      setControlConfig(CONFIG.CONTROL);   // 통제항목설정값 적용
      setEtcTabVisible(CONFIG.ETCTABAUTH);
      if ((dewself.user.empCode||'UNREGISTERED') !== 'UNREGISTERED') {
        setTabAuthConfig(CONFIG.TABAUTH);
      }

      isDigitValid = CONFIG.DIGIT.config; // 코드자리수통제값 검증 결과(맞으면 true)

    }

    // ▦▦▦▦▦▦ 드롭다운리스트 데이터소스 초기화 ▦▦▦▦▦▦
    {
      let hrCodeList = '';
      // 패키지 사용코드
      hrCodeList = 'P00040|P00220|P00310|P00630|P00640|P00650|P00660|P00670|P00700|P00710|P00720|P00730|' +
                   'P00750|P00760|P00770|P00780|P00790|P00800|P00810|P00830|P00850|P00860|P00870|P00880|' +
                   'P00900|P00910|P00920|P00930|P00980|P00990|P01020|P01040|P01045|P01140|P01150|P01333|' +
                   'P01470|P01480|P01500|P01510|P01550|P01740|P02280|P03200|P03300|P03550|P05200|P05900|' +
                   'P06980|P06990|P07300|P03560|P01120|P00915|P06300|P05310|P01580|';
      // EWP 전용코드
      hrCodeList += 'P00960|ZA04_10005|ZA05_10005|ZA42_10005|ZR39_10005|ZA43_10005|ZA44_10005|ZA45_10005|ZA46_10005|ZA47_10005|ZA53_10005|ZA54_10005|ZA55_10005|ZA56_10005|';

       // 가스기술공사 전용코드
       hrCodeList += 'Z310_10062|Z103_10062';
      getCodeData('MA', 'P00170|P00200|P00440|', null, null, null, null, null);
      getCodeData('HR', hrCodeList, null, null, null, null, null);

      // 상단 공백값 추가.
      objCodeDtl.HR.P06980.unshift({FIELD_CD: 'P06980', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});
      objCodeDtl.HR.P01120.unshift({FIELD_CD: 'P01120', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});
      objCodeDtl.HR.P00915.unshift({FIELD_CD: 'P00915', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});
      // 추가 2021.05.10
      objCodeDtl.HR.P07300.unshift({FIELD_CD: 'P07300', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // SUB 페이지 학력 그리드 - 구분 컬럼
      objCodeDtl.HR.P00700.unshift({FIELD_CD: 'P00700', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // SUB 페이지 학력 그리드 - 졸업여부 컬럼
      //추가 2021.06.15
      objCodeDtl.HR.P00860.unshift({FIELD_CD: 'P00860', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // 인적사항 - 장애종류 컬럼
      objCodeDtl.HR.P00870.unshift({FIELD_CD: 'P00870', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // 인적사항 - 장애등급 컬럼
      objCodeDtl.HR.P00850.unshift({FIELD_CD: 'P00850', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // 인적사항 - 보훈등급 컬럼
      objCodeDtl.HR.P00710.unshift({FIELD_CD: 'P00710', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // 인적사항 - 보훈관계 컬럼

      //추가 2021.09.23(동서발전 전용)
      objCodeDtl.HR.ZA53_10005.unshift({FIELD_CD: 'ZA53_10005', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // 추가정보 - 전문원
      objCodeDtl.HR.ZA54_10005.unshift({FIELD_CD: 'ZA54_10005', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // 추가정보 - 준전문원
      objCodeDtl.HR.ZA55_10005.unshift({FIELD_CD: 'ZA55_10005', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // 추가정보 - 노조전임자
      objCodeDtl.HR.ZA56_10005.unshift({FIELD_CD: 'ZA56_10005', SYSDEF_CD: '', SYSDEF_NM: '', FLAG_CD: null});  // 추가정보 - 승진직급

      makeReductDS(); // 감면율, 경영성과급감면(중소) 드롭다운리스트 데이터소스 세팅

      // objCodebaseMst = derp.HR.getCodebaseMstData('34', null, null, null, null);
      getEtcData();
      // // 근무조
      // objCodeDtl['ETC']['WORKGROUP'] = getWorkgroupCode(objCodebaseMst)['34'];

      // 좌측상단 재직구분 별도
      // 종료일 조회안되게 제거
      objCodeDtl['ETC']['HLOFFGCD_N'] = objCodeDtl.HR.P00750.filter(function(data) {
                                          return data.END_DT == null || data.END_DT >= today;
                                        });

      // YN
      objCodeDtl['ETC']['YN'] = [
        { SYSDEF_CD: 'Y', SYSDEF_NM: 'Yes' },
        { SYSDEF_CD: 'N', SYSDEF_NM: 'No' },
      ];
      // 사원등록 SUB 페이지에서 사용할 null 값이 추가된 YN (2021.05.10)
      objCodeDtl['ETC']['YN_NULL'] = [
        { SYSDEF_CD: '', SYSDEF_NM: '' },       // 공백
        { SYSDEF_CD: 'Y', SYSDEF_NM: 'Yes' },
        { SYSDEF_CD: 'N', SYSDEF_NM: 'No' },
      ];
      // 검색용 재직구분
      objCodeDtl['ETC']['EMPTP'] = [
        { SYSDEF_CD: '1', SYSDEF_NM: dews.localize.get('재직', 'D0013764', '', 'PAMPHM00100') },
        { SYSDEF_CD: '2', SYSDEF_NM: dews.localize.get('휴직', 'D0014476', '', 'PAMPHM00100') },
        { SYSDEF_CD: '3', SYSDEF_NM: dews.localize.get('퇴직', 'D0015487', '', 'PAMPHM00100') },
      ];
      // 국민연금해당
      objCodeDtl['ETC']['PENSION'] = [
        { SYSDEF_CD: 'Y', SYSDEF_NM: 'Yes' },
        { SYSDEF_CD: 'N', SYSDEF_NM: 'No' },
        { SYSDEF_CD: 'S', SYSDEF_NM: dews.localize.get('사학연금', 'D0015405', '', 'PAMPHM00100') },
      ];
      objCodeDtl.HR.P06300.unshift({FIELD_CD: "P06300", SYSDEF_CD: "", SYSDEF_NM: ""});
      dtSrcTaxBneiCd = dews.ui.dataSource("dtSrcTaxBneiCd", {
        data: objCodeDtl.HR.P06300
      });

      // 핌스: P20221229023
      if(objCodeDtl['ETC']) {
        if(objCodeDtl['ETC']['ABROADTAX']) { // 국외근로비과세
          for(abdtaxIdx = 0; abdtaxIdx < objCodeDtl['ETC']['ABROADTAX'].length; abdtaxIdx++) {
            if(objCodeDtl['ETC']['ABROADTAX'][abdtaxIdx].SYSDEF_CD == 'M03') {
              objCodeDtl['ETC']['ABROADTAX'].splice(abdtaxIdx, 1);
              break;
            }
          }
        }
      }

      /* 하드코드 사용안하고 공통코드로 변경 (시작) 2021.01.07 */
      // 거주구분
      // objCodeDtl['ETC']['LIVEFG'] = [
      //   { SYSDEF_CD: '1', SYSDEF_NM: dews.localize.get('월세', 'D0015402', '', 'PAMPHM00100') },
      //   { SYSDEF_CD: '2', SYSDEF_NM: dews.localize.get('전세', 'D0015403', '', 'PAMPHM00100') },
      //   { SYSDEF_CD: '3', SYSDEF_NM: dews.localize.get('자택', 'D0015404', '', 'PAMPHM00100') },
      // ];
      /* 하드코드 사용안하고 공통코드로 변경 (끝)2021.01.07 */

      objCodeDtl.HR.P00710BOHUN = getCopiedArray(objCodeDtl.HR.P00710);
      objCodeDtl.HR.P00710 = objCodeDtl.HR.P00710.filter(function(data) {
        return data.FLAG_CD !== '0';
      });

      if(configMstCom048 == '2') { // [인사환경설정]메뉴의 '사원구분별권한설정' '사용'이면
        getPermissionUseList();
      }
      objDdlDataSource = derp.HR.makeDataSourceObject(objCodeDtl);    // objCodeDtl의 모듈별 각 항목을 dataSource 객체로 변환시켜 합침.
      derp.HR.setDataSourceInComponent(dewself, objDdlDataSource);    // objDdlDataSource 를 각각 매핑되는 컴포넌트에 setDataSource 함.

      if(dewself.mainEnv.drsCode == '20006') {
        let empty = {};
        empty['SYSDEF_CD'] = '';
        empty['SYSDEF_NM'] = '전체';
        objCodeDtl['ETC']['HLOFFGCD_N'].insert(0, empty);

        dewself.cdt_hlofFgCd_ddl.setDataSource(objCodeDtl['ETC']['HLOFFGCD_N']); // 사원리스트 조회되는 상단 재직구분 콤보박스
      }

      dewself.fp_srcTaxBneiCd_ddl.setDataSource(dtSrcTaxBneiCd);
    }

    // ▦▦▦▦▦▦ 컨디션패널 데이터 초기화 ▦▦▦▦▦▦
    {
      if(dewself.obj != null && dewself.obj != undefined) {
        if(dewself.obj.menu_id == 'COCHRM00200') { // '통합사원조회' 메뉴에서 전달 받았으면
          if(dewself.obj.hlof_fg_cd != null && dewself.obj.hlof_fg_cd != undefined) {
            dewself.cdt_hlofFgCd_ddl.value(dewself.obj.hlof_fg_cd); // 1:재직, 2:휴직, 3:퇴직
          }else {
            dewself.cdt_hlofFgCd_ddl.value('1');
          }
        }else {
          if(dewself.initialData.caller_nm == 'powersearch') {
            dewself.cdt_hlofFgCd_ddl.value(dewself.initialData.hlof_fg_cd); // 재직구분
            dewself.cdt_keyword_tb.text(dewself.initialData.emp_no);
          }else {
            dewself.cdt_hlofFgCd_ddl.value('1');
          }
        }
      }else {
        dewself.cdt_hlofFgCd_ddl.value('1');
      }
    }

    // ▦▦▦▦▦▦ 그리드 데이터소스 초기화 ▦▦▦▦▦▦
    {
      EmpCardListDataSource = dews.ui.dataSource('EmpCardListDataSource', {
        async: false,
        transport: {
          read: {
            type: 'post',
            url: dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_empCardList_list'),
            data: function () {
              dews.ui.loading.show();
              cardListParam.empy_tp_cd = '1';
              cardListParam.hlof_fg_cd = dewself.cdt_hlofFgCd_ddl.value();
              cardListParam.keyword = dewself.cdt_keyword_tb.text();
              return {
                empy_tp_cd: '1',
                hlof_fg_cd: dewself.cdt_hlofFgCd_ddl.value(),
                keyword: dewself.cdt_keyword_tb.text(),
                // 상세조건
                bizarea_cd_pipe: detailConds.bizarea_cd,
                dept_cd_pipe: detailConds.dept_cd,
                emp_tp_pipe: detailConds.emp_tp,
                ogrp_cd_pipe: detailConds.ogrp_cd,
                jknd_cd_pipe: detailConds.jknd_cd,
                duty_cd_pipe: detailConds.duty_cd,
                pstn_cd_pipe: detailConds.pstn_cd,
                // slst_cd_from: detailConds.slst_cd_from,
                // slst_cd_to: detailConds.slst_cd_to,
                slst_cd: detailConds.slst_cd,
                odty_cd_pipe: detailConds.odty_cd,
                posi_cd_pipe: detailConds.posi_cd,
                cc_cd_pipe: detailConds.cc_cd,
                pjt_cd_pipe: detailConds.pjt_cd,
              }
            }
          }
        },
        error: function (e) {
          dews.error(e);
        },
        pageSize: 3000,
        schema: {
          model: {
            id: 'EMP_NO',
            fields: [
              { field: 'EMP_NO' },
              { field: 'KOR_NM' },
              { field: 'PSTN_CD'},
              { field: 'PSTN_CD_FOR_ORDER'}, //  정렬을 위한 직급코드
              { field: 'PSTN_CD_DISP_SQ'},   // 직급코드의 표시순번
              { field: 'POSI_CD'},
              { field: 'POSI_CD_FOR_ORDER'},  // 정렬을 위한 직위코드
              { field: 'POSI_CD_DISP_SQ'},  // 직위코드의 표시순번
              { field: 'DEPT_CD'},
              { field: 'DEPT_NM'},
              { field: 'BIZAREA_CD'},
              { field: 'EMP_TP'},
              { field: 'GROUPECNY_DT' },
              { field: 'JNCO_DT' },
              { field: 'RETIRESTDR_DT'},
              { field: 'APNTC_EXPY_DT'},
              { field: 'REDUCT_END_DT'},
              { field: 'DEPT_START_DT'},
              { field: 'SORT_SQ', type: 'number'},
              { field: '_uid' },
              /* 2021.01.04  퇴직자정보이관 수정으로 인한 추가*/
              { field: 'RFLT_YN' }
            ]
          }
        }
      });
    }

    // ▦▦▦▦▦▦ 그리드 초기화 ▦▦▦▦▦▦
    {
      EmpCardList  = dews.ui.cardlist(dewself.$EmpCardList, {
        autoBind: false,
        selectable: true,
        dataSource: EmpCardListDataSource,
        cardStyle: 'spacing',
        totalCount: {
          template: '{0}명',
          format: ''
        },
        title: '사원',
        // height: 400,
        template:
          '<div class="dews-cardlist-template">' +
          '<div class="dews-cardlist-main-text" custom-bind-data-column="KOR_NM">' +
          '<p class="bold">#: !data.KOR_NM ? "" : data.KOR_NM #</p>' +
          '</div>' +
          '<div class="dews-cardlist-sub-text" custom-bind-data-column="DEPT_NM">' +
          '<p class="color">#: !data.DEPT_NM ? "" : data.DEPT_NM #</p>' +
          '</div>' +
          '<div class="dews-cardlist-right-text" custom-bind-data-column="EMP_NO">' +
          '<p>#: !data.EMP_NO ? "" : data.EMP_NO #</p>' +
          '</div></div>',
        css:
          '.fontsize { font-size: 13px} .k-dropdown.k-header { width : 100px!important}',
        sort: drsSortCardList(dewself.mainEnv.drsCode),
        editable: {
          createAt: 'top',
          update: false
        },
        rowAdd: function (e) {
          currentRowUid = e.row.data.uid;
          totalData[e.row.data.uid] = {};
          totalData[e.row.data.uid] = getCopiedObject(emptyModel);
          totalData[e.row.data.uid]['saveFlag'] = 'added';
          totalData[e.row.data.uid]['validation'] = false;
          totalData[e.row.data.uid]['CI_PHOTO_MST']['ROWSTATE'] = 'none';
          totalData[e.row.data.uid]['HR_EMP_SDTL'] = [];
          setDefaultData(e.row.data.uid);

          // 사원번호 채번규칙이 수동('2')이 아닐때
          if (CONFIG.NUMBERING.config.type !== 'MANUAL') {
            if(!ruleIsExtValId){
              totalData[e.row.data.uid]['HR_EMP_MST']['EMP_NO'] = 'AUTO-NUMBERING';
              EmpCardList.setValue(e.row.index, 'EMP_NO', 'AUTO-NUMBERING');
            }
          }

          // 통합환경설정-통합사원번호채번규칙이 수동('3')이 아닐때
          if (ciCtrlConfig_CI00012 !== '3') {
            if(!ruleIsExtValId){
              totalData[e.row.data.uid]['HR_EMP_MST']['GEMP_NO'] = 'AUTO-NUMBERING';
              EmpCardList.setValue(e.row.index, 'GEMP_NO', 'AUTO-NUMBERING');
              dewself.fp_gempNo_tb.text('AUTO-NUMBERING');
            }
          }

          setTimeout(function() {
            // 신규 대상 추가 시 편집모드 on
            if (dewself.$content.find('#btn_edit').hasClass('on') === false) {
              dewself.$content.find('#btn_edit').click();
            } else {
              makeComponentReadonly(false); // 컴포넌트 활성화
            }
          }, 0);
        },
        dataBound: function (e) {
          dews.ui.loading.hide();
          //setTotalEmpCount(EmpCardList.dataItems().length);
        },
        change: function (e) {
          console.log('CHANGE!!!!!');
          console.log('totalData:::::::::::::::::::::', totalData);
          if (isFocusValid(EmpCardList.select())) {
            currentRowUid = e.row.data.uid;
            if (totalData.hasOwnProperty(e.row.data.uid) === false) {
              totalData[currentRowUid] = {};
              totalData[currentRowUid] = getEmpData(e.row.data.EMP_NO);
              totalData[currentRowUid]['saveFlag'] = 'none';
              totalData[currentRowUid]['empNo'] = e.row.data.EMP_NO;
              totalData[currentRowUid]['validation'] = false;
            }

            makeRadioGroupEnable(); // 패널에 bind 하기 전에 라디오버튼 활성화 해줘야 함, 활성화 안해주면 라디오버튼에 bind가 안됨
            bindDataToPhotoObject(totalData[currentRowUid]);
            bindDataToProfilePanel(totalData[currentRowUid]);

            bindDataToFormPanel(totalData[currentRowUid]);
            console.log('CHANGE STATE', totalData[currentRowUid]['saveFlag']);

            if (totalData[currentRowUid]['HR_EMPINFO_DTL']['FRGNR_CD'] === '2') {  // 외국인
              dewself.fp_resNo_mtb.required(false);
              dewself.fp_frnrInsertNo_tb.required(true);

              // 외국인단일세율 디폴트값, 활성화 추가 2021.01.05
              dewself.fp_frnrSinglTrteCd_ddl.value(totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD'] == null || totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD'] == "" ? "1" : totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD']);
              dewself.fp_frnrSinglTrteCd_ddl.enable(true);
            }
            else {
              dewself.fp_resNo_mtb.required(true);
              dewself.fp_frnrInsertNo_tb.required(false);

              // 외국인단일세율 디폴트값, 비활성화 추가 2021.01.05
              if(totalData[currentRowUid]['HR_EMPINFO_DTL']['FRGNR_CD'] === '1') {  // 내국인
                dewself.fp_frnrSinglTrteCd_ddl.value(totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD'] == null || totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD'] == "" ? "1" : totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD']);
                dewself.fp_frnrSinglTrteCd_ddl.enable(false);
              }
              else {
                dewself.fp_frnrSinglTrteCd_ddl.value(totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD'] == null || totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD'] == "" ? "1" : totalData[currentRowUid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD']);
                dewself.fp_frnrSinglTrteCd_ddl.enable(true);
              }
            }

            // 수정중일 경우에만 적용
            if (dewself.$content.find('#btn_edit').hasClass('on')) {
              // setComponentActivation(true);
              if (totalData[currentRowUid]['saveFlag'] === 'added') {
                allowFirstTimeInput(CONFIG.CONTROL);
              } else { // 신규 추가된 사원이 아니면
                makeComponentReadonly(false); // 컴포넌트 활성화
                setComponentActivation(true);
              }

              // 사원번호 readonly 추가작업
              if (CONFIG.NUMBERING.config.type === 'MANUAL') { // MANUAL(사번부여규칙 2:수동부여)
                if (totalData[currentRowUid]['saveFlag'] === 'added') {
                  dewself.fp_empNo_tb.readonly(false);
                } else {
                  dewself.fp_empNo_tb.readonly(true);
                }
              }
              if(CONFIG.NUMBERING.config.type === 'RULE') { // MANUAL(사번부여규칙 3:채번규칙으로부여)
                if(totalData[currentRowUid]['saveFlag'] === 'added' && ruleIsExtValId) {
                  dewself.fp_empNo_tb.readonly(false);
                }else {
                  dewself.fp_empNo_tb.readonly(true);
                }
              }

              // 통합사원번호 readonly 추가작업
              if (ciCtrlConfig_CI00012 === '3') {   // 통합사원번호채번규칙이 수동
                if (totalData[currentRowUid]['saveFlag'] === 'added') {
                  dewself.fp_gempNo_tb.readonly(false);
                  dewself.btn_gempNo.enable(true);
                } else {
                  dewself.fp_gempNo_tb.readonly(true);
                  dewself.btn_gempNo.enable(false);
                }
              }
              else {                                 // 통합사원번호채번규칙이 자동
                if (totalData[currentRowUid]['saveFlag'] === 'added') {
                  dewself.fp_gempNo_tb.readonly(true);
                  dewself.btn_gempNo.enable(true);
                } else {
                  dewself.fp_gempNo_tb.readonly(true);
                  dewself.btn_gempNo.enable(false);
                }
              }
            }else { // 수정중이지 않으면
              makeComponentReadonly(true); // 모두 비활성화
            }

            // 퇴직자반영여부 컬럼으로 인한 탭 비활성화 로직 추가 2021.01.04
            if (e.row.data != undefined) {
              if (e.row.data.RFLT_YN != 'Y') {

                // 수정중일 경우에만 적용
                if (dewself.$content.find('#btn_edit').hasClass('on')) {
                  retireCheckEnableTab(false); // 'Y'가 아닐 때, 활성화
                }

                // 수정, 파일 버튼 보이기
                if(btn_edit_flag) {
                  dewself.$btn_edit.show();
                }else {
                  dewself.$btn_edit.hide();
                }

                if(btn_fileUpload_flag) {
                  dewself.$btn_fileUpload.show();
                }else {
                  dewself.$btn_fileUpload.hide();
                }

                // 부양가족계산 버튼 보이기
                dewself.btn_calcFamily.enable(true);

                setCodepickerParams();
                if (dewself.$content.find('#btn_edit').hasClass('on')) { // 수정중일 경우에만 적용
                  setComponentActivation(true);
                }
                isEmpDataValid();
              }
              else {
                retireCheckEnableTab(true); // 'Y'이면, 비활성화

                // 수정, 파일 버튼 숨기기
                if(btn_edit_flag) {
                  dewself.$btn_edit.show();
                }else {
                  dewself.$btn_edit.hide();
                }

                if(btn_fileUpload_flag) {
                  dewself.$btn_fileUpload.show();
                }else {
                  dewself.$btn_fileUpload.hide();
                }

                // 부양가족계산 버튼 비활성화
                dewself.btn_calcFamily.enable(false);
              }
            }

            if(configMstCom042 == '1') {
              if(CONFIG.CONTROL.use == false) { // [인사환경설정]-'사원등록항목통제'가 '미사용' 이면
                //사원이 체인지될 때 [급여기초]탭에 '계정유형'에 따른 '예산유형'의 필수값 여부 체크 한번 해주기 2021.01.21
                if (CONFIG.BUDGET.applyType === '1' && CONFIG.BUDGET.useConnect === '1') { // [급여전표기준등록]의 '전표적용방식'이 '1'(사원)이고 '예산연결사용여부'가 '1'사용이면
                  if (dewself.fp_accttypeCd_ddl.value() === '') {  // '계정유형'이 없는 경우 필수체크에서 제외함
                    dewself.fp_bgTpCd_cp.required(false);
                  } else {
                    dewself.fp_bgTpCd_cp.required(true);  // '예산유형'은 필수값으로 통제
                  }
                }
              }
            }else if(configMstCom042 == '2') {
              dewself.fp_bgTpCd_cp.required(false);
              dewself.fp_accttypeCd_ddl.readonly(true); // '계정유형' 읽기전용으로 설정
              dewself.fp_bgTpCd_cp.readonly(true); // '예산유형' 읽기전용으로 설정
            }

            // 내외국인 체인지에 따른 주민등록번호 / 외국인식별번호 컨트롤 변경해가며 보여주기
            if(JSON.stringify(totalData) !== '{}' && totalData[currentRowUid]['HR_EMPINFO_DTL']['FRGNR_CD'] == '1') {
              changeResFrnNo('1');              // 내국인
            }
            else if(JSON.stringify(totalData) !== '{}' && totalData[currentRowUid]['HR_EMPINFO_DTL']['FRGNR_CD'] == '2') {
              changeResFrnNo('2');              // 외국인
            }
            else {
              changeResFrnNo('1');              // 내국인
            }
          } else {
            bindDataToPhotoObject(getCopiedObject(emptyModel));
            bindDataToFormPanel(getCopiedObject(emptyModel));
            bindDataToProfilePanel(getCopiedObject(emptyModel));

            // 내외국인 체인지에 따른 주민등록번호 / 외국인식별번호 컨트롤 변경해가며 보여주기
            // 디폴트 내국인 적용
            // 내외국인 체인지에 따른 주민등록번호 / 외국인식별번호 컨트롤 변경해가며 보여주기
            if(JSON.stringify(totalData) !== '{}' && totalData[currentRowUid]['HR_EMPINFO_DTL']['FRGNR_CD'] == '1') {
              changeResFrnNo('1');              // 내국인
            }
            else if(JSON.stringify(totalData) !== '{}' && totalData[currentRowUid]['HR_EMPINFO_DTL']['FRGNR_CD'] == '2') {
              changeResFrnNo('2');              // 외국인
            }
            else {
              changeResFrnNo('1');              // 디폴트 내국인 적용
            }
          }
          dewself.fp_deptCd_cp.setHelpParams({
            auth_bizarea: dewself.fp_bizareaCd_cp.code()
          });
        },
        changing: function (e) {
          // 사업장 부서 set 부분 -> changing부분에 넣어야 함.
          // 이벤트가 탈때마다 fp_bizareaCd_cp, fp_deptCd_cp를 변경해야 하기 때문.\
          derp.HR.setHrDetail(dewself.fp_bizareaCd_cp, dewself.fp_deptCd_cp, null, dewself); // 컨트롤 M/D 연결
        }

      });
    }

    function getDeptOrderConfig(){    // GET: 부서정보정렬기준
        dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_getDeptOrderConfig'), {
          async: false
        }).done(function (data) {
          deptOrderConfig = data;
        }).fail(function (xhr, status, error) {
          dews.alert(error, 'error');
        });
      }
    getDeptOrderConfig();

    var card= dews.ui.cardlist(dewself.$EmpCardList);
    card._card.thead.find('.dews-dropdownlist-wrapper').on('change', function (e) {
      var column,
      select = $(e.target);
      column = select.find('option[selected="selected"]')[0].value;

      if(column == 'DEPT_CD'){
        if(deptOrderConfig == "1"){
          EmpCardListDataSource.sort([{field: 'BIZAREA_CD', dir: 'asc'}, {field: 'DEPT_CD', dir: 'asc'}, {field: 'SORT_SQ', dir: 'asc'}, {field: 'DEPT_START_DT', dir: 'asc'}, {field: 'EMP_NO', dir: 'asc'}]);
        }else{
          EmpCardListDataSource.sort([{field: 'BIZAREA_CD', dir: 'asc'}, {field: 'SORT_SQ', dir: 'asc'}, {field: 'DEPT_CD', dir: 'asc'}, {field: 'DEPT_START_DT', dir: 'asc'}, {field: 'EMP_NO', dir: 'asc'}]);
        }
      }else if(column == 'POSI_CD') {
        EmpCardListDataSource.sort([{field: 'POSI_CD_DISP_SQ', dir: 'asc'}, {field: 'POSI_CD_FOR_ORDER', dir: 'asc'},{field: 'EMP_NO', dir: 'asc'}]);
      }else if(column == 'PSTN_CD') {
        EmpCardListDataSource.sort([{field: 'PSTN_CD_DISP_SQ', dir: 'asc'}, {field: 'PSTN_CD_FOR_ORDER', dir: 'asc'},{field: 'EMP_NO', dir: 'asc'}]);
      }
    });

    // ▦▦▦▦▦▦ 파일업로더 초기화 ▦▦▦▦▦▦
    {
    }

    // ▦▦▦▦▦▦ 메인버튼 이벤트 ▦▦▦▦▦▦
    {
      // 조회
      dews.ui.mainbuttons.search.on('click', function(e) {
        console.log('scrollTOp');
        if (isEmpDataChanged()) {

          dews.confirm(dews.localize.get('변경된 사항이 있습니다.\n저장하시겠습니까?', 'M0000809', '', 'PAMPHM00100'), 'question').yes(function (e) {
            if (isDataValid2()) {
              saveTotalData();
              totalData = {};
              dewself.$content.find('.k-grid-content.k-auto-scrollable').scrollTop(0);
              if (EmpCardListDataSource.pageSize() != 3000) {  // pageSize가 변경되었을 때만 세팅
                EmpCardListDataSource.pageSize(3000);
              }
              EmpCardListDataSource.read();
            } else {
              return false;
            }
          }).no(function (e) {
            totalData = {};
            dewself.$content.find('.k-grid-content.k-auto-scrollable').scrollTop(0);
            if (EmpCardListDataSource.pageSize() != 3000) {  // pageSize가 변경되었을 때만 세팅
              EmpCardListDataSource.pageSize(3000);
            }
            EmpCardListDataSource.read();
          });
        } else {
          totalData = {};
          dewself.$content.find('.k-grid-content.k-auto-scrollable').scrollTop(0);
          if (EmpCardListDataSource.pageSize() != 3000) {  // pageSize가 변경되었을 때만 세팅
            EmpCardListDataSource.pageSize(3000);
          }
          EmpCardListDataSource.read();
        }
      });

      // 추가
      dews.ui.mainbuttons.add.on('click', function(e) {
        // isDigitValid = false;
        if (isDigitValid === true) {  // 코드자리수통제값 검증 결과(맞으면 true)
          EmpCardList.addRow();
          if(dewself.mainEnv.drsCode == '20189') {
            selectMaxEmpNoAllCom();
          }
        } else {
          switch(CONFIG.NUMBERING.config.type) { // 사번부여규칙
            case 'AUTO': // 1:자동부여
              dews.alert(dews.localize.get('[자동채번등록]메뉴에서 설정한 "구분+채번단위+Serial자리수"와 [코드자리수통제]메뉴의 "통제자리수"와 같거나(이하) 합니다.', 'M0013408', '', 'PAMPHM00100'), 'error');
              break;
            case 'RULE':  // 3:채번규칙으로부여
              dews.alert(dews.localize.get('인사환경설정 메뉴에서 사번부여규칙을', 'D0111214', '', 'PAMPHM00100') + ' ' + controlDigitData.CTRL_CNT + dews.localize.get('자리로 변경해주세요.', 'M0005944', '', 'PAMPHM00100'), 'error');
              break;
          }
        }
      });

      // 삭제
      dews.ui.mainbuttons.delete.on('click', function(e) {
        if (totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['saveFlag'] === 'added') {
          delete totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')];
          EmpCardList.removeRow(EmpCardList.select());
        } else {
          let dialog;
          let initData;
          initData = {
            emp_no: EmpCardList.getValue(EmpCardList.select(), 'EMP_NO'),
          };

          dialog = dews.ui.dialog('PAMPHM00100_deleteCheck_POP', {
            url: '/view/HR/PAMPHM00100_deleteCheck_POP',
            title: dews.localize.get('사원데이터체크', 'D0015494', '', 'PAMPHM00100'),
            width: 380,
            height: 600,
            initData: initData,
            ok: function (data) {
              if (data === 0) {
                let target = EmpCardList.select();
                let targetUid = EmpCardList.getValue(target, 'uid');
                EmpCardList.removeRow(target);
                totalData[targetUid]['saveFlag'] = 'deleted';
                dews.ui.snackbar.ok(dews.localize.get('저장을 해야 삭제가 완료됩니다.', 'M0005945', '', 'PAMPHM00100'));
              } else {
                dews.ui.snackbar.warning(dews.localize.get('선택된 사원의 잔여데이터가 존재합니다.', 'M0005946', '', 'PAMPHM00100'));
              }
            },
          });
          dialog.open();
        }
      });

      // 저장
      dews.ui.mainbuttons.save.on('click', function(e) {
        if (isDataValid()) {
          saveTotalData();
        }
      });
    }

    // ▦▦▦▦▦▦ 버튼 이벤트 ▦▦▦▦▦▦
    {
      // 닫기
      dewself.closing.on(function (e) {
        console.log(dews.localize.get(" 메뉴닫기", 'D0025836', '', 'PAMPHM00100'));
        if (isEmpDataChanged()) {
          focusButtonAfterConfirm();
          return dews.confirm(dews.localize.get('저장하지 않은 변경사항이 존재합니다.\n그래도 닫기를 계속하시겠습니까?', 'M0005264', '', 'PAMPHM00100')).no(function () {
            e.preventDefault();
          }).promise();
        }

      });


      // 카드리스트 상세조회 버튼
      dewself.$btn_search.on('click', function(e) {

        dialog = dews.ui.dialog('PAMPHM00100_detailSearch_POP', {
          url: '/view/HR/PAMPHM00100_detailSearch_POP',
          title: dews.localize.get('상세검색', 'D0004328', '', 'PAMPHM00100'),
          width: 500,
          height: 500,
          initData: detailConds,
          ok: function (selectedConds) {
            detailConds = selectedConds;
          },
        });
        dialog.open();
      });

      // 사진 수정 버튼
      dewself.$content.find('.dews-custom-profile-photo-edit-icon').on('click', function(e) {
          dews.confirm('사진을 수정 및 삭제하시겠습니까?',
            [
              { title: '수정',
                callback: function(e) {
                e._close();
                dewself.$content.find('#photoUploader').click();
              }},
              { title: '삭제',
                callback: function(e) {
                e._close();

                let uid = EmpCardList.getValue(EmpCardList.select(), 'uid');
                let ftsObj = dewself.photoUploader.getFile();

                if(totalData[uid]['CI_PHOTO_MST']['NEW_FILE_DC'] == null) {
                  dews.ui.snackbar.warning("삭제할 사진이 없습니다.");
                }else {
                  totalData[uid]['CI_PHOTO_MST']['ROWSTATE'] = 'deleted';
                  if (totalData[uid]['saveFlag'] === 'none') {
                    totalData[uid]['saveFlag'] = 'updated';
                    totalData[uid]['changed'] = true;
                  }

                  let target = dewself.$content.find('.dews-custom-profile-photo');

                  target.css('background-image', 'url("/view/images/HR/hr_profile.png")');
                  target.css('background-repeat', 'no-repeat');
                  target.css('background-position', 'center');
                  target.css('background-size', '80px 80px');
                }
              }},
              { title: '취소',
                callback: function(e) {
                e._close();
              }}
            ]
            );
      });

      // 수정버튼
      dewself.$content.find('#btn_edit').on('click', function(e) {
        if (dewself.$content.find('#btn_edit').hasClass('on')) {
          dewself.$content.find('#btn_edit').removeClass('on');

          dewself.$content.find('#fp_resNo_mtb').parent().css('display', 'none');
          dewself.$content.find('#fp_resNoMasked_mtb').parent().css('display', 'block');
          dewself.$content.find('#fp_resNoMasked_mtb').css('display', 'none');
          dewself.$content.find('.dews-custom-profile-photo-edit-icon').css('display', 'none');
          makeComponentReadonly(true);
          dewself.$content.find('#editBtnText').text(dews.localize.get('수정', 'D0000266', '', 'PAMPHM00100'));
        } else {
          dewself.$content.find('#btn_edit').addClass('on');
          makeComponentReadonly(false);
          setComponentActivation(true);

          dewself.$content.find('#fp_resNo_mtb').parent().css('display', 'block');
          dewself.$content.find('#fp_resNoMasked_mtb').parent().css('display', 'none');
          dewself.$content.find('.dews-custom-profile-photo-edit-icon').css('display', 'block');
          dewself.$content.find('#editBtnText').text(dews.localize.get('수정중', 'D0015495', '', 'PAMPHM00100'));
        }
      });

      // 조합원번호 체크 버튼
      if(dewself.mainEnv.drsCode == '20086') {
        dewself.$content.find('#std_Z0001_chk_btn').on('click', function(e) {
          // dews.alert("조합원번호 체크 클릭 됨");
          if(dewself.std_Z0001.text()) {
            dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_checkUnistNo_20086'), {
              async: false,
              data: {
                kor_nm: dewself.fp_korNm_tb.text(),
                email_nm: dewself.fp_emailNm_tb.text(),
                unist_no: dewself.std_Z0001.text()
              }
            }).done(function (data) {
              if(data == '0') {
                dews.ui.snackbar.warning(dews.localize.get('등록되지 않은 조합원 번호입니다.', 'M0108784', '', 'PAMPHM00100'));
              }else if(data == '1') {
                dews.ui.snackbar.ok(dews.localize.get('사용 가능한 조합원 번호입니다.', 'M0108785', '', 'PAMPHM00100'));
              }
            }).fail(function (xhr, status, error) {
              dews.error(xhr.responseJSON.message);
            });
          }else {
            dews.ui.snackbar.warning(dews.localize.get('조합원번호를 입력 후 체크버튼을 클릭해 주세요.', 'M0108770', '', 'PAMPHM00100'));
          }
        });
      }

      dewself.mainTab.on('change', function(e){
        formerTabId = e.closeItem._item.context.id;
      });

      // 추가정보 탭
      // dewself.$content.find('.dews-tab-titles').children().eq(4).on('click', function(e) {
        dewself.$content.find('.dews-tab-titles span:nth-last-child(2)').on('click', function(e) {
        if (isEmpDataChanged()) {
          dews.confirm(dews.localize.get('변경된 사항이 있습니다.\n저장하시겠습니까?', 'M0000809', '', 'PAMPHM00100'), 'question').yes(function () {
            if (isDataValid2()) {
              saveTotalData();
              openSubpageTab('AdditionalInfoTab');
            } else {
              dewself.mainTab.items.getById(formerTabId).select();
              dews.ui.snackbar.error(dews.localize.get('입력되지 않은 필수값이 있습니다.', 'M0000036', '', 'PAMPHM00100'));
              return false;
            }
          }).no(function () {
            EmpCardListDataSource.read();
            openSubpageTab('AdditionalInfoTab');
          });
        } else {
          openSubpageTab('AdditionalInfoTab');
        }
      });

      // 조회사항 탭
      // dewself.$content.find('.dews-tab-titles').children().eq(5).on('click', function(e) {
        dewself.$content.find('.dews-tab-titles span:nth-last-child(1)').on('click', function(e) {
        if (isEmpDataChanged()) {
          dews.confirm(dews.localize.get('변경된 사항이 있습니다.\n저장하시겠습니까?', 'M0000809', '', 'PAMPHM00100'), 'question').yes(function () {
            if (isDataValid2()) {
              saveTotalData();
              openSubpageTab('LookupTab');
            } else {
              dewself.mainTab.items.getById(formerTabId).select();
              dews.ui.snackbar.error(dews.localize.get('입력되지 않은 필수값이 있습니다.', 'M0000036', '', 'PAMPHM00100'));
              return false;
            }
          }).no(function () {
            EmpCardListDataSource.read();
            openSubpageTab('LookupTab');
          });
        } else {
          openSubpageTab('LookupTab');
        }
      });

      // 퇴직사유 다이얼로그 호출 버튼
      dewself.$btnRetrReason.on('click', function(e) {
        let uid = EmpCardList.getValue(EmpCardList.select(), 'uid');
        let initData = {};
        initData.RETR_REASON_CD = totalData[uid]['HR_EMPINFO_DTL']['RETR_REASON_CD'];
        initData.RETR_REASON_NM = totalData[uid]['HR_EMPINFO_DTL']['RETR_REASON_NM'];
        initData.RETR_DTL_REASON_DC = totalData[uid]['HR_EMPINFO_DTL']['RETR_DTL_REASON_DC'];


        dialog = dews.ui.dialog('PAMPHM00100_retireReason_POP', {
          url: '/view/HR/PAMPHM00100_retireReason_POP',
          title: dews.localize.get('퇴직사유', 'D0014558', '', 'PAMPHM00100'),
          width: 600,
          height: 150,
          initData: initData,
          ok: function (closeObj) {
            console.log('ok data', closeObj);
            totalData[uid]['HR_EMPINFO_DTL']['RETR_REASON_CD'] = closeObj['RETR_REASON_CD'];
            totalData[uid]['HR_EMPINFO_DTL']['RETR_REASON_NM'] = closeObj['RETR_REASON_NM'];
            totalData[uid]['HR_EMPINFO_DTL']['RETR_DTL_REASON_DC'] = closeObj['RETR_REASON_DTL'];
            dewself.fp_retrReasonNm_tb.text(closeObj['RETR_REASON_NM'], true);
            if(totalData[uid]['saveFlag'] === 'none') {
              totalData[uid]['saveFlag'] = 'updated';
            }
            console.log('totalData aft dialog', totalData);
          },
        });
        dialog.open();
      });
    }

    // ▦▦▦▦▦▦ 팝업버튼 이벤트 ▦▦▦▦▦▦
    {
      // 첨부파일
      dewself.$content.find('#btn_fileUpload').on('click', function(e) {
        let dialog;
        let initData;
        initData = {
          emp_no: EmpCardList.getValue(EmpCardList.select(), 'EMP_NO'),
          fileDataSource: totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMPFILE_INFO'],
          fileObjFormat: getCopiedObject(emptyModel['HR_EMPFILE_INFO'])
        };

        dialog = dews.ui.dialog('PAMPHM00100_fileUpload_POP', {
          url: '/view/HR/PAMPHM00100_fileUpload_POP',
          title: dews.localize.get('첨부파일등록', 'D0013833', '', 'PAMPHM00100'),
          width: 510,
          height: 285,
          initData: initData,
          ok: function (data) {
            let empTotalData = totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')];
            empTotalData['HR_EMPFILE_INFO'] = data.filter(function(o, i) { return o.isDeleteFile !== true});
            let empFileLength = empTotalData.HR_EMPFILE_INFO.length || 0;
            let profileFileCount = (empTotalData.HR_EMPFILE_INFO !== null) ? '(' + empFileLength + ')': '(0)';
            dewself.$content.find('#fileCount').text(profileFileCount);
          },
        });
        dialog.open();
      });

      // 부양가족계산
      dewself.$btn_calcFamily.on("click", function(e) {
        var dialog;
        var initData;

        dialog= dews.ui.dialog('PAMPHM00100_countDependents_POP', {
          url: '/view/HR/PAMPHM00100_countDependents_POP',
          title: dews.localize.get('부양가족계산', 'D0015422', '', 'PAMPHM00100'),
          width : 800,
          height : 510,
          buttons: 'none',
          ok: function(data) {
            dews.ui.mainbuttons.search.click();
          }
        });

        dialog.open();
      });

      // 퇴직자정보이관 2021.01.04
      dewself.$btn_retireInfoTrans.on("click", function(e) {
        var dialog;
        var initData;

        dialog= dews.ui.dialog('PAMPHM00100_retireInfoTrans_POP', {
          url: '/view/HR/PAMPHM00100_retireInfoTrans_POP',
          title: dews.localize.get('퇴직자정보이관', 'D0084631', '', 'PAMPHM00100'),
          width : 800,
          height : 465,
          buttons: 'none',
          ok: function(data) {
            dews.ui.mainbuttons.search.click();
          }
        });

        dialog.open();
      });

      // 통합사원번호 도움창 2022.04.05
      dewself.$btn_gempNo.on("click", function(e) {
        // 내외국인에 따른 주민등록번호, 외국인식별번호가 입력되어 있는지 검증
        if(dewself.fp_frgnrCd_ddl.value() === '1') {        // 내국인
          if(totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid].HR_EMP_MST.RES_NO == null
              || totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid].HR_EMP_MST.RES_NO == ''
              || totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid].HR_EMP_MST.RES_NO == undefined) {
                dews.ui.snackbar.error("주민등록번호를 먼저 입력해주세요.");
                return false;
          }
          else {
            var initData = {
              resOrFrnNoText: totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid].HR_EMP_MST.RES_NO,
              gubun_fg: '1',
              selfIndex: 0,
              cdCompany: dewself.mainEnv.companyCd
            };

            var dialog = dews.ui.dialog("PAMPHM00100_searchGempNo_POP", {
              url: '/view/HR/PAMPHM00100_searchGempNo_POP',
              title:"통합사원번호연결",
              width: 746,
              height: 537,
              ok: function (data){
                if(data){
                  // 자동입력일때
                  if(ciCtrlConfig_CI00012 !== '3') {
                    dewself.fp_gempNo_tb.text(data.gemp_no);
                    totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid]['HR_EMP_MST']['GEMP_NO'] = data.gemp_no;
                  }
                  // 수기입력일때
                  else {
                    if(data.gemp_no == "AUTO-NUMBERING") {
                      // 팝업창 열기 이전데이터 유지
                    }
                    else {
                      dewself.fp_gempNo_tb.text(data.gemp_no);
                      totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid]['HR_EMP_MST']['GEMP_NO'] = data.gemp_no;
                    }
                  }
                }
                else {
                  // 팝업창 열기 이전데이터 유지
                }
              },
              close: function(){
              }
            });
            dialog.setInitData(initData);
            dialog.open();
          }

        }
        else if(dewself.fp_frgnrCd_ddl.value() === '2') {   // 외국인
          if(totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid].HR_EMPINFO_DTL.FRNR_INSERT_NO == null
              || totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid].HR_EMPINFO_DTL.FRNR_INSERT_NO == ''
              || totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid].HR_EMPINFO_DTL.FRNR_INSERT_NO == undefined) {
                dews.ui.snackbar.error("외국인식별번호를 먼저 입력해주세요.");
                return false;
          }
          else {
            var initData = {
              resOrFrnNoText: totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid].HR_EMPINFO_DTL.FRNR_INSERT_NO,
              gubun_fg: '2',
              selfIndex: 0,
              cdCompany: dewself.mainEnv.companyCd
            };

            var dialog = dews.ui.dialog("PAMPHM00100_searchGempNo_POP", {
              url: '/view/HR/PAMPHM00100_searchGempNo_POP',
              title:"통합사원번호연결",
              width: 746,
              height: 537,
              ok: function (data){
                if(data){
                  // 자동입력일때
                  if(ciCtrlConfig_CI00012 !== '3') {
                    dewself.fp_gempNo_tb.text(data.gemp_no);
                    totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid]['HR_EMP_MST']['GEMP_NO'] = data.gemp_no;
                  }
                  // 수기입력일때
                  else {
                    if(data.gemp_no == "AUTO-NUMBERING") {
                      // 팝업창 열기 이전데이터 유지
                    }
                    else {
                      dewself.fp_gempNo_tb.text(data.gemp_no);
                      totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid]['HR_EMP_MST']['GEMP_NO'] = data.gemp_no;
                    }
                  }
                }
                else {
                  // 팝업창 열기 이전데이터 유지
                }
              },
              close: function(){
              }
            });
            dialog.setInitData(initData);
            dialog.open();
          }
        }
        else {
          // 여기는 들어올일 없음~.~
        }
      });

    }

    // ▦▦▦▦▦▦ 체인지 이벤트 ▦▦▦▦▦▦
    {
      //포토 체인지
      dewself.photoUploader.on('change', function(e) {
        let uid = EmpCardList.getValue(EmpCardList.select(), 'uid');
        let ftsObj = dewself.photoUploader.getFile();
        dewself.photoUploader.getDownloadUrl().done(function(url) {
          let target = dewself.$content.find('.dews-custom-profile-photo');
          let imageUrl = 'url(' + url + ')';
          target.css('background-image', imageUrl);
          target.css('background-repeat', 'no-repeat');
          target.css('background-position', 'center');
          target.css('background-size', '80px 80px');
        });

        totalData[uid]['CI_PHOTO_MST']['NEW_FILE_DC'] = ftsObj.fileKey;
        totalData[uid]['CI_PHOTO_MST']['ORGL_FILE_DC'] = ftsObj.filename;
        totalData[uid]['CI_PHOTO_MST']['ORGL_FEXTSN_DC'] = ftsObj.extension;
        totalData[uid]['CI_PHOTO_MST']['FILE_VR'] = ftsObj.size;
        totalData[uid]['CI_PHOTO_MST']['ROWSTATE'] = 'added';
        if (totalData[uid]['saveFlag'] === 'none') {
          totalData[uid]['saveFlag'] = 'updated';
          totalData[uid]['changed'] = true;
        }
      });

      // // 폼패널 체인지 이벤트
      $.each(dewself.$content.find('.dews-ui-form-panel'), function(index, context) {
        dewself[context.id].on('change', function(e) {
          console.log('FormPanel Change Event::', e);
          if (e.$source !== undefined && JSON.stringify(totalData) !== '{}') {
            let uid = getCurrentRowValue(EmpCardList, 'uid', null);

            // 사원번호, 외국인식별번호 값의 공백제거
            if (e.$source.context.id === 'fp_empNo_tb' || e.$source.context.id === 'fp_frnrInsertNo_tb') {
              $(e.$source.context).val($(e.$source.context).val().replace(/\s/g, ''));
            }

            // 폼패널 입력값 유효성 체크
            if(uid) {
              checkFormInputDataValid(e, uid);
            }
          }
        });
      });

      // 내외국인 체인지 2021.01.05
      dewself.fp_frgnrCd_ddl.on('change', function(e) {
        if (dewself.fp_frgnrCd_ddl.value() == "1") { // 내국인
          dewself.fp_frnrSinglTrteCd_ddl.value("1");
          dewself.fp_frnrSinglTrteCd_ddl.enable(false);
          dewself.fp_ntnlCd_cp.clearData();
          dewself.fp_stayQua_cd.clearData();

          // 주민등록번호 / 외국인식별번호 컨트롤 변경해가며 보여주기
          changeResFrnNo('1');
        }
        else if (dewself.fp_frgnrCd_ddl.value() == "2") { // 외국인
          dewself.fp_frnrSinglTrteCd_ddl.enable(true);

          // 주민등록번호 / 외국인식별번호 컨트롤 변경해가며 보여주기
          changeResFrnNo('2');
        }
        //여긴 어차피 안들어오겠다....  change에서 처리해줘서.... 그래도 나중을 위해서...~.~
        else {
          dewself.fp_frnrSinglTrteCd_ddl.value("1");
          dewself.fp_frnrSinglTrteCd_ddl.enable(false);
        }
      });

      // 좌측상단 재직구분 변경시 환경설정 객체에 넣어줌
      dewself.cdt_hlofFgCd_ddl.on('change', function(e) {
        CONFIG.HLOFFGCD_N = dewself.cdt_hlofFgCd_ddl.value();
      });

      // 사원번호 키다운 ★신규추가일떄만★
      dewself.$fp_empNo_tb.keydown(function(key) {
        if (key.keyCode === 13){
          /**** console.log("핌스번호 : D20201231166 방지"); ***/
          /**** 해당 이벤트로 사원추가 후 내외국인 디폴트값이 외국인일때 주민등록번호 컨트롤이 두개다 보이는 현상 방지 ***/

          setTimeout(function() {
            console.log(dews.localize.get("주민등록번호 컨트롤 두개 오픈되는 현상 방지", "D0084632", '', 'PAMPHM00100'));
          }, 150);
        }
      });

      // dewself.$
    }

    // ▦▦▦▦▦▦ 기타 이벤트 ▦▦▦▦▦▦
    {
      // 스페이스바 입력 막는 로직이었으나 JB IE11에서 동작하지 않는 관계로 로직 대체함
      // dewself.$content.find('#fp_empNo_tb, #fp_frnrInsertNo_tb').on('keyup keydown focusout', function(e) {
      //   $(e.target).val($ (e.target).val().replace(/\s/g, ''));
      // });
      // 국외근로비과세 툴팁 event on
      dewself.$content.find('span[aria-owns="fp_noabrodCd_ddl_listbox"]').on('focus', function(e) {
        $('#fp_noabrodCd_ddl_listbox li').on('mouseover', function(e) {
          dews.ui.tooltip.show($(e.currentTarget), {
            type: 'normal',
            fadeOutTime: 0,   //툴팁이 사라지지 않습니다.
            position: 'left',
            text: $(e.currentTarget).html()
          });
          console.log('currentTarget', e.currentTarget);
        });
      });

      // 국외근로비과세 툴팁 event off
      dewself.$content.find('span[aria-owns="fp_noabrodCd_ddl_listbox"]').on('blur', function(e) {
        $('#fp_noabrodCd_ddl_listbox li').off('mouseover');
      });

      dewself.fp_noabrodCd_ddl.on('select', function(e) {
        $('span.tooltip.left').remove();
      });


      // // 부서 코드피커 클릭시 사업장 입력여부 체크
      // dewself.$fp_deptCd_cp.siblings('.dews-codepicker-button').find('.dews-icon.icon-search').on('click', function (e) {
      //   if (dewself.fp_bizareaCd_cp.code() == null || dewself.fp_bizareaCd_cp.code() == '') {
      //     dews.alert('사업장은 필수입력 항목입니다.', 'warning');
      //     e.stopImmediatePropagation(); // 이벤트 전파 막음 return false
      //   }
      // });

      // Enter Key 누를때 카드리스트 검색어로 조회
      dewself.$cdt_keyword_tb.keydown(function(key) {
        if (key.keyCode === 13){
          dews.ui.mainbuttons.search.click();
        }
      });

      dewself.$EmpCardList.find('.k-grid-content').on('scroll', function (e) {
        let currentScrollHeight = e.target.scrollTop;
        let totalScrollHeight = e.target.scrollHeight - e.target.offsetHeight;
        if (currentScrollHeight === totalScrollHeight) {
          if (EmpCardListDataSource.pageSize() <= EmpCardListDataSource.data().length) {
            EmpCardListDataSource.pageSize(EmpCardListDataSource.pageSize() + 3000);
            // EmpCardListDataSource.pageSize(EmpCardListDataSource.pageSize() + 100);
          }
        }
      });

      // 주민등록주소
      dewself.$fp_resPostNo_zcp.on('setData', function(e) {
        console.log('zipcode', e);
        let addressText = getZipcodeAddress(e);
        dewself.fp_baseResAddr_tb.text(addressText);
        totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMPINFO_DTL']['BASE_RES_ADDR'] = addressText;
      });


      // 현재 주소
      dewself.$fp_curPostNo_zcp.on('setData', function(e) {
        console.log('zipcode', e);
        let addressText = getZipcodeAddress(e);
        dewself.fp_baseCurAddr_tb.text(addressText);
        totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMPINFO_DTL']['BASE_CUR_ADDR'] = addressText;
      });

      // 본적 주소
      dewself.$fp_prmdmclPostNo_zcp.on('setData', function(e) {
        console.log('zipcode', e);
        let addressText = getZipcodeAddress(e);
        dewself.fp_prmdmclAddr_tb.text(addressText);
        totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMPINFO_DTL']['PRMDMCL_ADDR'] = addressText;
      });


      // // 원적주소 : 항목삭제요청으로 주석처리
      // dewself.$fp_originPostNo_zcp.on('setData', function(e) {
      //   console.log('zipcode', e);
      //   let address = '';
      //   switch (e.userSelectedType) {
      //     case 'R':
      //       address = e.street;
      //       break;
      //     case 'J':
      //       address = e.jibun;
      //       break;
      //   }
      //   dewself.fp_originAddr_tb.text(address);
      //   totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMPINFO_DTL']['ORIGIN_ADDR'] = address;
      // });
      dewself.$fp_deptCd_cp.on('setData', function(e1, e2) {
        console.log('e1, e2', e1, e2);
        totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMP_MST']['UP_DEPT_NM'] = e2.NM_UPDEPT;
        totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMPINFO_DTL']['CC_CD'] = e2.CC_CD;
        totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMPINFO_DTL']['CC_NM'] = e2.CC_NM;
        dewself.fp_ccCd_cp.setData({
          CC_CD: e2.CC_CD,
          CC_NM: e2.CC_NM
        });
      });
      dewself.$fp_odtyCd_ddl.on('change', function(e1) {
        totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMP_MST']['ODTY_NM'] = dewself.fp_odtyCd_ddl.text();
      });
    }

    // ▦▦▦▦▦▦ 실행 영역 ▦▦▦▦▦▦
    {
      if (!(dewself.mainEnv.drsCode == '10031' ||
          dewself.mainEnv.drsCode == 'BIZON' ||
          dewself.mainEnv.drsCode == '10005' ||
          dewself.mainEnv.drsCode == '10075' // 동아일보 자동조회 안함
         )) // 게임빌 자동조회 안함
            // 21.10.21 동서발전 자동조회 안함
      {
        dews.ui.mainbuttons.search.click();
      }else {
        makeComponentReadonly(true); // 컴포넌트 비활성화 및 읽기전용으로 변경
      }
    }

    // ▦▦▦▦▦▦ 사용자 정의 함수 ▦▦▦▦▦▦
    function setTotalEmpCount(count) {
      let counterContext = dewself.$content.find('.dews-ui-cardlist .k-grid-header th.k-header #empCounter');
      if (counterContext.length > 0) {
        counterContext.remove();
      }
      dewself.$content.find('.dews-ui-cardlist .k-grid-header th.k-header').prepend(dews.localize.get('<span id="empCounter" style="font-weight: bold;">총인원 &nbsp;&nbsp;', 'D0015333', '', 'PAMPHM00100') + count + dews.localize.get(' 명<span>', 'D0015334', '', 'PAMPHM00100'));
    }
    function saveTotalData() {
      //22.01.27 추가, 저장하기전 자동채번의 경우 채번규칙과 동일한 사원만 자동채번/ 아닐경우 도움창에서 입력 후 저장
      // 소스가 무거워지지만 여기서 한번더 검증. -> 도움창에서 필수값 입력후 바로 저장하기 위함.
      var autoRuleListArray = [];
      isTotalDataAutoCheck(autoRuleListArray);

      if(autoRuleListArray.length > 0 && CONFIG.NUMBERING.config.type === 'RULE') { // RULE(사번부여규칙 3:채번규칙으로부여)
        let initData = {
          autoRuleListArray: autoRuleListArray,
          totalData : totalData
        };
        dialog = dews.ui.dialog('PAMPHM00100_autoNumberCheck_POP', {
          url: '~/view/HR/PAMPHM00100_autoNumberCheck_POP',
          title: dews.localize.get('사원번호수기입력', 'D0100259', '', 'PAMPHM00100'),
          width: 600,
          height: 400,
          initData: initData,
          ok: function (data) {
            tempChangeRetrDateGempNo = new Array();
            totalData = {};
            dews.ui.snackbar.ok(dews.localize.get('저장되었습니다.', 'M0000031', '', 'PAMPHM00100'));
            dews.ui.mainbuttons.search.click();
          },
        });
        dialog.open();
      }else{
        dews.ui.loading.show();
        dews.api.post(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_empData_save'), {
          data: {
            totalData: JSON.stringify(totalData),
            menuID: 'PAMPHM00100'
          }
        }).done(function (data) {
          dews.ui.loading.hide();
          tempChangeRetrDateGempNo = new Array();
          totalData = {};
          dews.ui.snackbar.ok(dews.localize.get('저장되었습니다.', 'M0000031', '', 'PAMPHM00100'));
          dews.ui.mainbuttons.search.click();

          // // 현재 row에 포커스를 두고 totalData를 초기화해서 dirtyData를 제거함
          // let currentRow = EmpCardList.select();
          // let uid = EmpCardList.getValue(currentRow, 'uid');
          // totalData = {};
          // totalData[uid] = {};
          // totalData[uid] = getEmpData(EmpCardList.getValue(currentRow, 'EMP_NO'));
          // totalData[uid]['saveFlag'] = 'none';
          // totalData[uid]['empNo'] = EmpCardList.getValue(currentRow, 'EMP_NO');
          // totalData[uid]['validation'] = true;
        }).fail(function (xhr, status, error) {
          dews.ui.loading.hide();
          // dews.ui.error(error);
          dews.alert(error, "error");
        });
      }
    }
    function openSubpageTab(subtabId) {
      dews.ui.page.openSubPage('PAMPHM00100', {
        title: '',
        url: 'HR/PAMPHM00100_SUB',
        data: {
          CONFIG: CONFIG,
          selectId: subtabId,
          cardListDataSource: EmpCardListDataSource,
          cardListData: EmpCardListDataSource.data(),
          cardListPageSize: EmpCardListDataSource.pageSize(),
          cardListIndex: EmpCardList.select(),
          cardListScroll: dewself.$content.find('.k-grid-content.k-auto-scrollable').scrollTop(),
          cardListParam: cardListParam,
          detailConds: detailConds,
          keyword: dewself.cdt_keyword_tb.text(),
          objDdlDataSource: objDdlDataSource,
          hrSessionData: hrSessionData,
          companySessionData: companySessionData
        },
        callback: function(closeObj) {
          console.log(dews.localize.get('서브페이지닫음', 'D0080909', '', 'PAMPHM00100'));
          EmpCardListDataSource.data(closeObj.cardListData);
          dewself.mainTab.items.getById(closeObj.tabId).select();
          $('.k-grid-content.k-auto-scrollable').scrollTop(closeObj.scrollSize);
          // EmpCardListDataSource.pageSize(closeObj.pageSize); // 서브페이지에서 검색된 사원이 없는 상태에서, 메인페이지로 돌아올 때 에러 발생하여 주석처리함
          EmpCardList.select(closeObj.rowIndex);
          dewself.cdt_keyword_tb.text(closeObj.keyword);

          EmpCardListDataSource.options.transport.read.data = function () {
            console.log('detailConds', detailConds);
            dews.ui.loading.show();
            cardListParam.empy_tp_cd = '1';
            cardListParam.hlof_fg_cd = dewself.cdt_hlofFgCd_ddl.value();
            cardListParam.keyword = dewself.cdt_keyword_tb.text();
            return {
              empy_tp_cd: '1',
              hlof_fg_cd: dewself.cdt_hlofFgCd_ddl.value(),
              keyword: dewself.cdt_keyword_tb.text(),
              // 상세조건
              bizarea_cd_pipe: detailConds.bizarea_cd,
              dept_cd_pipe: detailConds.dept_cd,
              emp_tp_pipe: detailConds.emp_tp,
              ogrp_cd_pipe: detailConds.ogrp_cd,
              jknd_cd_pipe: detailConds.jknd_cd,
              duty_cd_pipe: detailConds.duty_cd,
              pstn_cd_pipe: detailConds.pstn_cd,
              // slst_cd_from: detailConds.slst_cd_from,
              // slst_cd_to: detailConds.slst_cd_to,
              slst_cd: detailConds.slst_cd,
              odty_cd_pipe: detailConds.odty_cd,
              posi_cd_pipe: detailConds.posi_cd,
              cc_cd_pipe: detailConds.cc_cd,
              pjt_cd_pipe: detailConds.pjt_cd,
            }
          };
        }
      });
    }
    // 추가 시 기본데이터 설정
    function setDefaultData(uid) {
      totalData[uid]['HR_EMP_MST']['EMPY_TP_CD'] = '1';
      // totalData[uid]['HR_EMPINFO_DTL']['FRGNR_CD'] = (hrSessionData.MA_COMPANY_NATION_CD === 'KR') ? '1' : '2';
      totalData[uid]['HR_EMPINFO_DTL']['FRGNR_CD'] = (companySessionData.NATION_CD === 'KR') ? '1' : '2';
      totalData[uid]['HR_EMPPAY_DTL']['RESIDNT_CD'] = '1';              //라디오버튼중 거주자구분만 특이하게 Y, N 이 아닌 1, 2로 구분
      totalData[uid]['HR_EMPPAY_DTL']['HLTHINS_INS_CD'] = 'Y';
      totalData[uid]['HR_EMPPAY_DTL']['NPNCRRENNC_CD'] = 'Y';
      totalData[uid]['HR_EMPPAY_DTL']['EMPYINSFO_TARGNO_CD'] = 'Y';
      totalData[uid]['HR_EMPPAY_DTL']['INDUSAC_INSU_TRGT_CD'] = 'Y';
      // 외국인단일세율 디폴트값 비해당(1) 추가 2021.01.05
      totalData[uid]['HR_EMPPAY_DTL']['FRNR_SINGL_TRTE_CD'] = '1';
      // 라디오버튼 디폴트값 N 추가 2021.01.15
      totalData[uid]['HR_EMPPAY_DTL']['SPO_CD'] = 'N';
      totalData[uid]['HR_EMPPAY_DTL']['LADY_HSHR_CD'] = 'N';
      totalData[uid]['HR_EMPPAY_DTL']['HSHR_YN_CD'] = 'N';
      totalData[uid]['HR_EMPPAY_DTL']['PR_DRCT_WKR_CD'] = 'N';
      totalData[uid]['HR_EMPPAY_DTL']['PR_FRMLA_M2500_YN'] = 'N';
      totalData[uid]['HR_EMPPAY_DTL']['DSPTC_LABOR_YN'] = 'N';
      totalData[uid]['HR_EMPPAY_DTL']['SCEPREPAY_TRGT_CD'] = 'N';

      // HR_EMP_SDTL 컴포넌트에 입력된 데이터 초기화
      $.each(StandardConfigSet, function(i, o) {
        totalData[uid]['HR_EMP_SDTL'].push({
          'COMPANY_CD' : null,
          'DATA_FG' : o.TYPE_FG,
          'EMP_NO' : null,
          'LINE_SQ' : null,
          'MCLS_CD' : o.MCLS_CD,
          'MNGD_CD' : null,
          'MNGD_NM' : null,
          'MNG_DC' : null,
          'ROWSTATE': 'added'
        });
      });
      totalData[uid]['HR_EMP_SDTL'].forEach(function(rowData, rowIndex) {
        StandardConfigSet.some(function(configItem, configIndex) {
          if (rowData.MCLS_CD === configItem.MCLS_CD) {
            rowData.MNG_DC = configItem.BASE_DC;
            return true;
          }
        });
      });
    }

    function isFocusValid(selectedRow) {
      return (selectedRow !== undefined);
    }

    function getCopiedObject(emptyModel) {
      return $.extend(true, {}, emptyModel);
    }

    function getCopiedArray(array) {
      return $.extend(true, [], array);
    }

    function getEmptyDataSet() {
      let emptyModel;
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_getEmptyDataSet'), {
        async: false,
      }).done(function (data) {
        if (data.length > 0) {
          emptyModel = data[0];
        }
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });

      return emptyModel;
    }

    function getEtcData() {
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_etcData_list'), {
        async: false,
      }).done(function (data) {
        objCodeDtl['ETC'] = {};
        $.each(data, function(index, item) {
          if (objCodeDtl['ETC'].hasOwnProperty(item.FIELD_CD) === false) {
            objCodeDtl['ETC'][item.FIELD_CD] = [];
          }
          objCodeDtl['ETC'][item.FIELD_CD].push(item);
        });
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });
    }

    function getEmpData(emp_no) {
      var result;
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_empData_list'), {
        async: false,
        data: {
          emp_no: emp_no,
          menuID: 'PAMPHM00100'
        }
      }).done(function (data) {
        if (data.length > 0) {
          result = data[0];
        }
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });
      return result;
    }

    // 코드자리수통제값 확인
    function getDigitUseYn() {
      let result = 'N';
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_getControlDigit'), {
        async: false,
        data: {
          empy_shape_cd: '1'
        }
      }).done(function (data) {
        if (0 < data.length) {
          result = data[0].USE_YN;
        }
      }).fail(function (xhr, status, error) {
      });

      return result;
    }

    // 코드자리수통제값 확인
    function getDigitSet(numberingConfig) {
      let result = false;
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_getControlDigit'), {
        async: false,
        data: {
          empy_shape_cd: '1'
        }
      }).done(function (data) {
        if (0 < data.length) {
          controlDigitData = data[0];
          console.log('controlDigitData', controlDigitData);
          console.log('numberingConfig', numberingConfig);
          if (controlDigitData.USE_YN === 'Y') { // '사원번호'의 코드자리수통제 사용여부
            switch(numberingConfig) { // numberingConfig:사번부여규칙
              case '1': // 1(자동부여)
                result = controlDigitData.AUTONUM_VALID === 'true' ? true : false;
                // AUTONUM_VALID: 사원번호의 자동채번 규칙의 길이가 [코드자리수통제 규칙]과 맞으면 true
                break;
              case '2': // 2(수동부여)
                result = true;
                break;
              case '3': // 3(채번규칙으로부여)
                result = controlDigitData.EXT_VALID === 'true' ? true : false;
                // EXT_VALID: [상용직의 사원번호 채번규칙내역 길이]가 [코드자리수통제 규칙]과 맞으면 true
                // 인사환경설정 > 사원부여규칙이 상용직이 아닌경우에도 사원번호 입력이 가능해야 함. M20220103163
                if(controlDigitData.EXT_VALID === 'false') {  // controlDigitData.EXT_VALID가 true이면 검증 정상
                  ruleIsExtValId = true;  // 자동채번 X
                }else{
                  ruleIsExtValId = false;  // 자동채번 O
                }
                // ruleIsExtValId = controlDigitData.EXT_VALID === 'false' ? true : false;
                // result = true;
                break;
              case '4': // 4(통합사원번호 부여)
                result = true;
                break;
              case 'Z01':
                result = true;
                break;
            }
          } else {
            result = true;
            if(numberingConfig === '3') { // 사번부여규칙: 3(채번규칙으로부여)
                ruleIsExtValId = false;  // 자동채번 O
            }
          }
        }
      }).fail(function (xhr, status, error) {
        dews.error(dews.localize.get('코드자리수통제 오류입니다.', 'M0005947', '', 'PAMPHM00100'));
      });

      return result;
    }

    function focusButtonAfterAlert() {
      setTimeout(function() {
        $('#dews-msgbox-alert button').focus();
      }, 500);
    }

    function focusButtonAfterConfirm() {
      setTimeout(function() {
        $('#dews-msgbox-confirm button.yes').focus();
      }, 500);
    }

    function makeComponentReadonly(value) {
      let saveFlag;
      if (currentRowUid !== undefined) {
        saveFlag = totalData[currentRowUid]['saveFlag'];
      }
      let componentArray = [];
      let exceptionArray = [];
      let componentRadioAndCheckboxArray = [];

      // 기본정보1, 기본정보2 탭
      componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-textbox'));
      componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-numerictextbox'));
      componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-maskedtextbox'));
      componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-dropdownlist'));
      componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-codepicker'));
      componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-datepicker'));
      componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-zipcodepicker'));
      exceptionArray.push(dewself.$content.find('li[id*="BasicInfo"] [data-custom-readonly="true"]'));
      exceptionArray.push(dewself.$content.find('li[id*="BasicInfo"] [data-custom-config-readonly="true"]'));

      // 급여기초 탭
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-textbox'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-numerictextbox'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-maskedtextbox'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-dropdownlist'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-codepicker'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-datepicker'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-zipcodepicker'));

      componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-radio-group'));
      componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-checkbox'));

      exceptionArray.push(dewself.$content.find('li[id*="PayBaseTab"] [data-custom-readonly="true"]'));
      exceptionArray.push(dewself.$content.find('li[id*="PayBaseTab"] [data-custom-config-readonly="true"]'));

      // 인적사항 탭
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-textbox'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-numerictextbox'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-maskedtextbox'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-dropdownlist'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-codepicker'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-datepicker'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-zipcodepicker'));
      exceptionArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] [data-custom-readonly="true"]'));
      exceptionArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] [data-custom-config-readonly="true"]'));

      $.each(componentArray, function(index, componentType) {
        $.each(componentType, function(i, o) {
          if(o.id !== '') {
            dewself[o.id].readonly(value);
          }
        });
      });

      $.each(exceptionArray, function(index, componentType) {
        $.each(componentType, function(i, o) {
          if(o.id !== '') {
            dewself[o.id].readonly(true);
          }
        });
      });

      $.each(componentRadioAndCheckboxArray, function(index, componentType) {
        $.each(componentType, function(i, o) {
          if(o.id !== '') {
            dewself[o.id].disable(value);
          }
        });
      });

      // 사원번호 readonly 추가작업
      if (CONFIG.NUMBERING.config.type === 'MANUAL' && saveFlag !== 'added') { // MANUAL(사번부여규칙 2:수동부여)
        dewself.fp_empNo_tb.readonly(true);
      }
      if (CONFIG.NUMBERING.config.type === 'MANUAL' && saveFlag === 'added') {
        dewself.fp_empNo_tb.readonly(false);
      }
      if (CONFIG.NUMBERING.config.type !== 'MANUAL') {
        // dewself.$content.find('#fp_empNo_tb').attr('data-custom-readonly', 'true');
        if(ruleIsExtValId && saveFlag === 'added'){ // 자동채번X
          dewself.fp_empNo_tb.readonly(false);
        }else{
          dewself.fp_empNo_tb.readonly(true);
        }
      }

      // 통합사원번호 readonly 추가작업
      if (ciCtrlConfig_CI00012 === '3') {   // 통합사원번호채번규칙이 수동
        if(dewself.$content.find('#btn_edit').hasClass('on')) {
          if (saveFlag === 'added') {
            dewself.fp_gempNo_tb.readonly(false);
            dewself.btn_gempNo.enable(true);
          } else {
            dewself.fp_gempNo_tb.readonly(true);
            dewself.btn_gempNo.enable(false);
          }
        }
        else {
          dewself.fp_gempNo_tb.readonly(true);
          dewself.btn_gempNo.enable(false);
        }
      }
      else {                                 // 통합사원번호채번규칙이 자동
        if(dewself.$content.find('#btn_edit').hasClass('on')) {
          if (saveFlag === 'added') {
            dewself.fp_gempNo_tb.readonly(true);
            dewself.btn_gempNo.enable(true);
          } else {
            dewself.fp_gempNo_tb.readonly(true);
            dewself.btn_gempNo.enable(false);
          }
        }
        else {
          dewself.fp_gempNo_tb.readonly(true);
          dewself.btn_gempNo.enable(false);
        }
      }

      if (value === false) {
        // 부서 코드피커 클릭시 사업장 입력여부 체크 (readonly 시 이벤트가 제거되서 이부분에 삽입)
        // dewself.$fp_deptCd_cp.siblings('.dews-codepicker-button').find('.dews-icon.icon-search').on('click', function (e) {
        //   if (dewself.fp_bizareaCd_cp.code() == null || dewself.fp_bizareaCd_cp.code() == '') {
        //     dews.alert(dews.localize.get('사업장은 필수입력 항목입니다.', 'M0004673', '', 'PAMPHM00100'), 'warning');
        //     e.stopImmediatePropagation(); // 이벤트 전파 막음 return false
        //     focusButtonAfterAlert();

        //   }
        // });

        setSalclassClickEvent();  // 호봉 코드피커 클릭시 조건항목들(직급, 급여기준등록>호봉관리기준) 입력여부 체크
      }

      // 퇴직사유 커스텀 버튼 활성처리
      if (value === false) {
        dewself.$content.find('.custom-picker-button').css('display', 'block');
      } else {
        dewself.$content.find('.custom-picker-button').css('display', 'none');
      }

      if(dewself.mainEnv.drsCode == '20126') { // 포스코건설
        dewself.fp_psnEmpNo_tb.readonly(true); // 인물번호
      }
    }

    function makeRadioGroupEnable() { // 라디오그룹 활성화
      let componentRadioAndCheckboxArray = [];

      componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-radio-group'));
      // componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-checkbox'));

      $.each(componentRadioAndCheckboxArray, function(index, componentType) {
        $.each(componentType, function(i, o) {
          if(o.id !== '') {
            dewself[o.id].disable(false);
          }
        });
      });
    }

    function bindDataToCardlistRow(dataObject, uid) {
      let cardRow = dewself.$content.find('tr[data-uid = "'+ uid +'"] .dews-cardlist-template');
      let selectRow = EmpCardList.select();
      let tableDataObject = dataObject.HR_EMP_MST;
      if (tableDataObject !== null) {
        let profileEmpNo = (tableDataObject.EMP_NO !== null) ? tableDataObject.EMP_NO : '';
        let profileName = (tableDataObject.KOR_NM !== null) ? tableDataObject.KOR_NM : '';
        let profileDept = (tableDataObject.DEPT_NM !== null) ? tableDataObject.DEPT_NM : '';

        EmpCardList.setValue(selectRow, 'EMP_NO', profileEmpNo);
        EmpCardList.setValue(selectRow, 'KOR_NM', profileName);
        EmpCardList.setValue(selectRow, 'DEPT_NM', profileDept);
      }
    }

    function bindDataToProfilePanel(dataObject) {
      let tableDataObject = dataObject.HR_EMP_MST;
      let profileName = (tableDataObject.KOR_NM !== null) ? tableDataObject.KOR_NM : '';
      let profilePosition = (tableDataObject.POSI_NM !== null) ? tableDataObject.POSI_NM : '';
      let profileBizarea = (tableDataObject.BIZAREA_NM !== null) ? tableDataObject.BIZAREA_NM : '';
      let profileUpdept = (tableDataObject.UP_DEPT_NM !== null) ? '-' + tableDataObject.UP_DEPT_NM : '';
      let profileDept = (tableDataObject.DEPT_NM !== null) ? '-' + tableDataObject.DEPT_NM : '';
      let profileDuty = (tableDataObject.ODTY_NM !== null) ? '(' + tableDataObject.ODTY_NM + ')': '';
      // let profileFileCount = `(${dataObject.HR_EMPFILE_INFO.length || 0})`;  // 업로드한 파일 개수
      let empFileLength = dataObject.HR_EMPFILE_INFO.length || 0;
      let profileFileCount = (dataObject.HR_EMPFILE_INFO !== null) ? '(' + empFileLength + ')': '(0)';

      dewself.$content.find('.dews-custom-profile-name').text(profileName);
      dewself.$content.find('.dews-custom-profile-bizarea').text(profileBizarea);
      dewself.$content.find('.dews-custom-profile-updept').text(profileUpdept);
      dewself.$content.find('.dews-custom-profile-dept').text(profileDept);
      dewself.$content.find('.dews-custom-profile-duty').text(profileDuty);
      dewself.$content.find('#fileCount').text(profileFileCount);

      // 프로필 부분 (소속 표시) drs처리 -> 관련핌스 : P20220509028
      if(dewself.mainEnv.drsCode == '10130'){
        dewself.$content.find('.dews-custom-profile-bizarea').text("");
        dewself.$content.find('.dews-custom-profile-updept').text("");

        profileDept = (tableDataObject.DEPT_NM !== null) ? tableDataObject.DEPT_NM : '';
        dewself.$content.find('.dews-custom-profile-dept').text(profileDept);
      }

      // 프로필 부분 (직급표시) drs처리 -> 관련핌스 : M20211130152
      if(dewself.mainEnv.drsCode != '10075'){
        dewself.$content.find('.dews-custom-profile-position').text(profilePosition);
      }

      // 프로필 부분 (사업장-부서-직책->'닉네임명'으로 변경) drs처리 -> 관련핌스 : M20230628313
      if(dewself.mainEnv.drsCode == '20189') {
        profileBizarea = (tableDataObject.MNG_DC !== null) ? tableDataObject.MNG_DC : '';

        dewself.$content.find('.dews-custom-profile-bizarea').text(profileBizarea);
        dewself.$content.find('.dews-custom-profile-updept').text("");
        dewself.$content.find('.dews-custom-profile-dept').text("");
        dewself.$content.find('.dews-custom-profile-duty').text("");
      }
    }

    function bindDataToPhotoObject(dataObject) {
      let photoDataObject = dataObject.CI_PHOTO_MST;
      let target = dewself.$content.find('.dews-custom-profile-photo');
      let path = (photoDataObject.ISNEW === 'true') ? '/download/image/' + photoDataObject.NEW_FILE_DC + ':' + photoDataObject.ORGL_FILE_DC : '/download/image/' + photoDataObject.NEW_FILE_DC ;
      target.css('background-image', 'url(' + path + '), url(/view/images/HR/hr_profile.png)');
      target.css('background-repeat', 'no-repeat');
      target.css('background-position', 'center');
      target.css('background-size', '80px 80px');
    }


    function bindDataToFormPanel(tableDataObject) {
      setDataToComponent('HR_EMP_MST', tableDataObject['HR_EMP_MST']);
      setDataToComponent('HR_EMPPAY_DTL', tableDataObject['HR_EMPPAY_DTL']);
      setDataToComponent('HR_EMPINFO_DTL', tableDataObject['HR_EMPINFO_DTL']);
      setDataToComponent('HR_EMP_SDTL', tableDataObject['HR_EMP_SDTL']);
      if(dewself.mainEnv.drsCode === '10062'){
        setDataToComponent('HR_PAYPEAK_MST', tableDataObject['HR_PAYPEAK_MST']);
      }
    }

    function fixRadioState(radioId, config) {
      // // 라디오버튼 필수입력 체크기능이 없음. 필수 표시 하는방법도 없음
      // if (config.required === 'Y') {
      //   // do something...
      // }
      if (config.readonly === 'Y') {
        dewself[radioId].disable(true);
      }
    }

    function setEtcTabVisible(configData) {
      $("#content_PAMPHM00100").find("#BasicInfo1Tab").removeAttr("style");
      $("#content_PAMPHM00100_subpage_2_PAMPHM00100").find("#BasicInfo1Tab").removeAttr("style");

      $("#content_PAMPHM00100").find("#BasicInfo2Tab").removeAttr("style");
      $("#content_PAMPHM00100_subpage_2_PAMPHM00100").find("#BasicInfo2Tab").removeAttr("style");

      $("#content_PAMPHM00100").find("#PayBaseTab").removeAttr("style");
      $("#content_PAMPHM00100_subpage_2_PAMPHM00100").find("#PayBaseTab").removeAttr("style");

      $("#content_PAMPHM00100").find("#PersonalInfoTab").removeAttr("style");
      $("#content_PAMPHM00100_subpage_2_PAMPHM00100").find("#PersonalInfoTab").removeAttr("style");

      $("#content_PAMPHM00100").find("#EtcInfoTab").removeAttr("style");
      $("#content_PAMPHM00100_subpage_2_PAMPHM00100").find("#EtcInfoTab").removeAttr("style");

      $("#content_PAMPHM00100").find("#AdditionalInfoTab").removeAttr("style");
      $("#content_PAMPHM00100_subpage_2_PAMPHM00100").find("#AdditionalInfoTab").removeAttr("style");

      $("#content_PAMPHM00100").find("#LookupTab").removeAttr("style");
      $("#content_PAMPHM00100_subpage_2_PAMPHM00100").find("#LookupTab").removeAttr("style");

      if (configData.use === true) {
        // dewself.$EtcInfoTab.css('display', 'block');
        $("#content_PAMPHM00100").find("#EtcInfoTab").removeAttr("style");
        $("#content_PAMPHM00100_subpage_2_PAMPHM00100").find("#EtcInfoTab").removeAttr("style");
        // dewself.mainTab.items.getById('EtcInfoTab').hide(false);
      } else {
        dewself.$EtcInfoTab.css('display', 'none');
        dewself.mainTab.items.getById('EtcInfoTab').hide(true);
      }
    }

    // 인사환경설정 탭권한설정값 적용
    function setTabAuthConfig(configData) {
      if (configData.use === true) {
        $.each(configData.config, function(tab, values) {
          if (values.available !== 'Y') {
            dewself.mainTab.items.getById(values.tabId).hide(true);
          }
        });

        // 가장 처음에 노출되는 탭 선택
        if (dewself.$content.find('#mainTab .dews-tab-item-title[style!="display: none;"]').length > 0) {
          dewself.$content.find('#mainTab .dews-tab-item-title[style!="display: none;"]')[0].click();
        }
      }
    }

    // 인사환경설정 통제항목설정값 적용
    function setControlConfig(configData) {
      if (configData.use === true) { // [인사환경설정]-사원등록항목통제 '사용'일 때
        $.each(configData.config, function(column, config) {
          var componentId = $('[data-custom-bind-column = ' + column + ']').attr('id');
          var isThisRadio = $('[data-custom-bind-column = ' + column + ']').hasClass('dews-ui-radio-group');

          if (componentId !== undefined) {
            if (isThisRadio === true) {
              fixRadioState(componentId, config);
            } else {
              if (config.required === 'Y') {
                if (typeof dewself[componentId].required === 'function') {    // 함수 존재여부 체크 후 required() 가 있으면 if 내부코드 실행 (radio버튼을 제외하기위함)
                  dewself[componentId].required(true);
                  dewself.$content.find('#' + componentId).addClass('required');    // .required(true) 사용시 datePicker는 required 클래스가 적용이안돼서 validate()에 걸리지 않음.
                  // dewself.$content.find('#' + componentId).siblings().addClass('required');    // .required(true) 사용시 numeric-text-box는 required 클래스가 적용이안돼서 validate()에 걸리지 않음.
                }
              }
              if (config.readonly === 'Y') {
                dewself.$content.find('#' + componentId).attr('data-custom-config-readonly', 'true');
                dewself[componentId].readonly(true);
              }
            }
          }
        });
        // [인사환경설정]-사원등록항목통제 '미사용'일 때
      } else {

      }
      // 사용여부 관계없이 아래 항목은 무조건 필수입력항목으로 만든다.
      dewself.fp_gempNo_tb.required(true);        // 통합사원번호
      dewself.fp_korNm_tb.required(true);         // 성명
      dewself.fp_resNo_mtb.required(true);        // 주민등록번호
      dewself.fp_bizareaCd_cp.required(true);     // 사업장
      dewself.fp_deptCd_cp.required(true);        // 부서
      dewself.fp_groupecnyDt_dp.required(true);   // 그룹입사일
      dewself.fp_jncoDt_dp.required(true);        // 입사일
      dewself.fp_retireStdr_dp.required(true);    // 퇴직기준일
      dewself.fp_hlofFgCd_ddl.required(true);     // 재직구분
      dewself.fp_empTp_ddl.required(true);        // 사원구분
      if (CONFIG.NUMBERING.config.type === 'MANUAL' || ruleIsExtValId) { // MANUAL(사번부여규칙 2:수동부여)
        dewself['fp_empNo_tb'].required(true);
      }
    }

    function setDataToTotalData(e) {
      let context;
      if (e.target.className.match('dews-ui-form-panel') === null ) {
        context = e.target;
      } else {
        context = e.$source.context;
      }

      if ((context.id||'BAD_CONTEXT') !== 'BAD_CONTEXT') {
        let targetId = context.id;
        let cardListData = EmpCardList.dataItem(EmpCardList.select());
        let column = dewself.$content.find('#' + targetId).attr('data-custom-bind-column');
        let text = dewself.$content.find('#' + targetId).attr('data-custom-bind-text');
        let table = dewself.$content.find('#' + targetId).attr('data-custom-bind-table');
        let getter = dewself.$content.find('#' + targetId).attr('data-custom-getter-type');
        let componentType = dewself.$content.find('#' + targetId).attr('data-custom-component-type');
        if (table === 'HR_EMP_SDTL') {
          let bindKey = dewself.$content.find('#' + targetId).attr('data-custom-bind-key');
          $.each(totalData[cardListData.uid][table], function(i, data) {
            if(bindKey === data.MCLS_CD) {
              totalData[cardListData.uid][table][i]['MNG_DC'] = dewself[targetId][getter]();
            }
          });
          if (totalData[cardListData.uid]['saveFlag'] !== 'added') {
            totalData[cardListData.uid][table]['ROWSTATE'] = 'updated';
            totalData[cardListData.uid]['saveFlag'] = 'updated';
            totalData[cardListData.uid]['changed'] = true;
          }
        } else {
          switch (componentType) {
            case 'code':
              totalData[cardListData.uid][table][column] = dewself[targetId][getter]();
              totalData[cardListData.uid][table][text] = dewself[targetId]['text']();
              break;
            case 'zipcode':
              totalData[cardListData.uid][table][column] = dewself[targetId][getter]();
              totalData[cardListData.uid][table][text] = dewself[context.dataset.dewsAddressBind]['text']();
              break;
            default:
              // 마스킹처리된 텍스트박스의 경우 text() 이벤트가 현재값을 가져오지 못함
              if(targetId === 'fp_baseResAddr_tb' || targetId === 'fp_dtlResAddr_tb' || targetId === 'fp_frnrInsertNo_tb') {
                totalData[cardListData.uid][table][column] = dewself[targetId]['maskedText']();
              }
              else if(targetId === 'repAccChk1' || targetId === 'repAccChk2') { // 대표계좌 체크박스 둘 중 하나의 클릭 이벤트 발생 시
                if(changeEndFlag == true) { // 마스터그리드의 change 이벤트가 끝났으면
                  if(secondRepAccCkhFlag == false) { // 대표계좌 체크박스 이벤트가 처음이면
                    totalData[cardListData.uid][table][column] = dewself[targetId][getter]();

                    var repAccChk1Val = dewself.repAccChk1.value();
                    var repAccChk2Val = dewself.repAccChk2.value();

                    if(targetId === 'repAccChk1') {
                      if(repAccChk2Val == "2") {
                        secondRepAccCkhFlag = true; // 아래 체크박스 이벤트 막기(대표계좌 체크박스 이벤트 두번 타는 것 막기)
                        dewself.repAccChk2.check(false); // 체크박스의 체크를 해제
                      }
                    }else if(targetId === 'repAccChk2') {
                      if(repAccChk1Val == "1") {
                        secondRepAccCkhFlag = true; // 아래 체크박스 이벤트 막기(대표계좌 체크박스 이벤트 두번 타는 것 막기)
                        dewself.repAccChk1.check(false); // 체크박스의 체크를 해제
                      }
                    }
                  }
                }
              }
              else
              {
                totalData[cardListData.uid][table][column] = dewself[targetId][getter]();
                if(targetId == "fp_retrDt_dp") { // 퇴사일자 변경 되면
                  totalData[cardListData.uid]['HR_EMP_MST']['RETR_DT_CHG_YN'] = "Y";  // 퇴사일자 변경여부 변경
                }
              }
              // 계좌 예금주 입력시 필요해서 넣음
              if(targetId === 'fp_korNm_tb') {
                totalData[cardListData.uid]['HR_EMPPAY_DTL']['KOR_NM'] = dewself[targetId][getter]();
              }
              // // 동서발전 거래처 TRAN_START_DT 입력시 필요해서 넣음
              // if(targetId === 'fp_jncoDt_dp') {
              //   totalData[cardListData.uid]['HR_EMPPAY_DTL']['JNCO_DT'] = dewself[targetId][getter]();
              // }
          }
          if(cardListData) {
            if (totalData[cardListData.uid]['saveFlag'] !== 'added') {
              if(targetId === 'repAccChk1' || targetId === 'repAccChk2') { // 대표계좌 체크박스 둘 중 하나의 클릭 이벤트 발생 시
                if(changeEndFlag == true) { // 마스터그리드의 change 이벤트가 끝났으면
                  totalData[cardListData.uid][table]['ROWSTATE'] = 'updated';
                  totalData[cardListData.uid]['saveFlag'] = 'updated';
                  totalData[cardListData.uid]['changed'] = true;
                  secondRepAccCkhFlag = false;
                }
              }else {
                totalData[cardListData.uid][table]['ROWSTATE'] = 'updated';
                totalData[cardListData.uid]['saveFlag'] = 'updated';
                totalData[cardListData.uid]['changed'] = true;
              }
            }
          }
        }
      }
    }

    function setDataToComponent(sourceTable, tableDataObject) {
      if (tableDataObject !== null) {
        let componentsByTable = dewself.$content.find('[data-custom-bind-table=' + sourceTable + ']');
        if (sourceTable === 'HR_EMP_SDTL') {
          $.each(componentsByTable, function(index, component) {
            let attribute = component.dataset;
            let bindKey = attribute.customBindKey;
            let bindCode = attribute.customBindColumn;
            let bindText = attribute.customBindText;
            let setterType = attribute.customSetterType;
            let componentType = attribute.customComponentType;
            $.each(tableDataObject, function(i, data) {
              if (data !== null && bindKey === data.MCLS_CD) {
                dewself[component.id][setterType](data.MNG_DC);
                return false;
              }
            });
          });
        } else {
          $.each(componentsByTable, function(index, component) {
            let attribute = component.dataset;
            let bindCode = attribute.customBindColumn;
            let bindText = attribute.customBindText;
            let setterType = attribute.customSetterType;
            let componentType = attribute.customComponentType;
            switch (componentType) {
              case 'code':
                let paramObject = {};
                let pickerCode = bindCode;
                let pickerText = bindText;
                if (attribute.dewsHelpCode === 'H_MA_CODEDTL_S') {
                  pickerCode = 'SYSDEF_CD';
                  pickerText = 'SYSDEF_NM';
                }
                if (attribute.dewsHelpCode === 'H_PS_PROJ_MST_S') {
                  pickerCode = 'PJT_NO';
                  pickerText = 'PJT_NM';
                }
                // if (attribute.dewsHelpCode === 'H_CI_BANK_MST_S') { 핌스 : M20211130082
                if (attribute.dewsHelpCode === 'H_HR_BANK_MST_S') {
                  pickerCode = 'BANK_CD';
                  pickerText = 'FNLT_NM';
                }
                if (attribute.dewsHelpCode === 'H_HR_CODEBASE_MST_S') {
                  pickerCode = 'HR_CD';
                  pickerText = 'HR_CD_NM';
                }
                paramObject[pickerCode] = tableDataObject[bindCode];
                paramObject[pickerText] = tableDataObject[bindText];
                dewself[component.id][setterType](paramObject, false);
                // console.log('Compo', component.id);
                // console.log('paramObject', paramObject);
                break;
              case 'zipcode':
                let zipCodeValue = (tableDataObject[bindCode] === null)
                                    ? '' : tableDataObject[bindCode];
                dewself[component.id][setterType](zipCodeValue);
                break;
              case 'radio':
                let radioId = component.id;
                let radioValue = tableDataObject[bindCode];
                dewself[radioId].select(radioValue, false);
                break;
              default:
              if(tableDataObject != undefined) { // 마스터그리드 change 되면
                if(component.id == "repAccChk1" && bindCode == "DLGT_ACNT_CD") {
                  changeEndFlag = false; // 마스터그리드 change 되면
                  if(tableDataObject[bindCode] == "1") {
                    dewself.repAccChk1.check(true);
                  }else {
                    dewself.repAccChk1.check(false);
                  }
                }

                if(component.id == "repAccChk2" && bindCode == "DLGT_ACNT_CD") {
                  if(tableDataObject[bindCode] == "2") {
                    dewself.repAccChk2.check(true);
                  }else {
                    dewself.repAccChk2.check(false);
                  }
                  changeEndFlag = true; // 마스터그리드 change 끝(마지막 대표계좌 체크박스 기준으로)
                }

                if(component.id == "fp_accttypeCd_ddl" && bindCode == "ACCTTYPE_CD") { // '계정유형'이면
                  if(configMstCom042 == '2') { // 사원등록계정유형변경사용여부
                    dewself.fp_accttypeCd_ddl.readonly(true); // dropdownlist을 읽기전용으로 설정
                  }
                }

                if(component.id == "fp_bgTpCd_cp" && bindCode == "BG_TP_CD") { // '예산유형'이면
                  if(configMstCom042 == '2') { // 사원등록계정유형변경사용여부
                    dewself.fp_bgTpCd_cp.readonly(true); // textbox 를 읽기전용으로 설정
                  }
                }

                dewself[component.id][setterType](tableDataObject[bindCode]);
              }

              if (component.id === 'fp_mltplcStdDt_dp') {
              }

              if (component.id === 'fp_posiCd_ddl') {
                // let isCodeDead = (dewself.fp_posiCd_ddl.dataItems().filter(function(s) {
                //   return (s.SYSDEF_CD === tableDataObject[bindCode] || tableDataObject[bindCode] === null);
                // }).length > 0) ? false : true;
                // if (isCodeDead) {
                //   dewself.$content.find('span[aria-owns="fp_posiCd_ddl_listbox"] span.k-input').text(tableDataObject[bindText]);
                // } else {
                //   dewself[component.id][setterType](tableDataObject[bindCode]||'');
                // }
              }
            }
          });
        }
      }
    }

    // 환경설정 객체 생성
    function makeConfigSettings(objConfigMst, objConfigDtl) {
      let configDataSet = {};

      if ((dewself.user.empCode||'UNREGISTERED') !== 'UNREGISTERED') {
        configDataSet['TABAUTH'] = {};

        configDataSet['TABAUTH']['config'] = getTabauthConfig(dewself.user.empCode);
        configDataSet['TABAUTH']['use'] = getConfigUseYn(objConfigMst.COM005);

      } else {
        configDataSet['TABAUTH'] = 'UNREGISTERED';
      }
      configDataSet['ETCTABAUTH'] = {};
      configDataSet['ETCTABAUTH']['use'] = getConfigUseYn(objConfigMst.COM024);
      configDataSet['NUMBERING'] = {};
      configDataSet['CONTROL'] = {};
      configDataSet['EXCEPTION'] = {};
      configDataSet['DIGIT'] = {};
      configDataSet['SALCLASS'] = {};
      configDataSet['HUAN'] = {};
      configDataSet['BUDGET'] = {};
      configDataSet['HLOFFGCD_N'] = {};
      configDataSet['NUMBERING']['config'] = getNumberingConfig(objConfigMst.COM001[0]); // objConfigMst.COM001[0]:사번부여규칙
      configDataSet['CONTROL']['config'] = getControlConfig(objConfigDtl.COM006);
      configDataSet['CONTROL']['use'] = getConfigUseYn(objConfigMst.COM006);
      configDataSet['EXCEPTION']['config'] = getExceptionCode(objConfigDtl.COM007);
      configDataSet['EXCEPTION']['use'] = getConfigUseYn(objConfigMst.COM007);
      configDataSet['DIGIT']['use'] = getDigitUseYn();
      configDataSet['DIGIT']['config'] = getDigitSet(objConfigMst.COM001[0].CHAR_CD_VAL_DC); // objConfigMst.COM001[0]:사번부여규칙
      configDataSet['DIGIT']['number'] = Number(controlDigitData.CTRL_CNT);
      configDataSet['DIGIT']['method'] = getDigitMethod(controlDigitData.CTRL_MTHD_TP);
      configDataSet['SALCLASS']['use'] = getConfigUseYn(objConfigMst.PAY016);
      configDataSet['SALCLASS']['type'] = getSalclassType(objConfigDtl.PAY016);
      configDataSet['HUAN']['use'] = getConfigUseYn(objConfigMst.ETC014);
      configDataSet['HUAN']['codes'] = getAvailableHuanCode(objConfigDtl.ETC014);
      configDataSet['BUDGET']['applyType'] = (0 < objConfigMst.SLA002.length) ? objConfigMst.SLA002[0].CHAR_CD_VAL_DC : '2';
      configDataSet['BUDGET']['useConnect'] = (0 < objConfigMst.SLA003.length) ? objConfigMst.SLA003[0].CHAR_CD_VAL_DC : '2';

      return configDataSet;
    }


    function getCurrentRowValue(grid, field, ifNull) {
      var value;
      if (grid.select() !== undefined) {
        if(grid.hasOwnProperty('_card') === true ){
          value = grid.getValue(grid.select(), field);
        } else {
          value = grid.getCellValue(grid.select(), field);
        }

        if (value === null || value === undefined) {
          return ifNull;
        } else {
          return value;
        }
      } else {
        return null;
      }
    }

    // // 근무조 코드 구하기
    // function getWorkgroupCode(obj) {
    //   let result = {};
    //   $.each(obj, function(index, o) {
    //     let tempObj = {};
    //     if (result[o.MENU_CD] === undefined) {
    //       result[o.MENU_CD] = [];
    //     }
    //     $.each(o, function(key, value) {
    //       if (key === 'HR_CD') {
    //         tempObj['SYSDEF_CD'] = value;
    //       }
    //       if (key === 'HR_CD_NM') {
    //         tempObj['SYSDEF_NM'] = value;
    //       }
    //     });
    //     result[o.MENU_CD].push(tempObj);
    //   });

    //   return result;
    // }

    // 환경설정항목 사용여부 리턴
    function getConfigUseYn(configCd) {
      let result = false;
      if (configCd.length > 0) {
        switch(configCd[0].CHAR_CD_VAL_DC) {
          case '1':
            result = true;
            break;
          case '2':
            result = false;
            break;
        }
      }

      return result;
    }

    function getNumberingConfig(data) {
      let configData = {};
      configData['code'] = data.CONFIG_CD;
      switch(data.CHAR_CD_VAL_DC) { // data.CHAR_CD_VAL_DC: 사번부여규칙
        case '1': // 1(자동부여)
          configData['type'] = 'AUTO';
          dewself.fp_empNo_tb.text('AUTO-NUMBERING');
          break;
        case '2': // 2(수동부여)
          configData['type'] = 'MANUAL';
          break;
        case '3': // 3(채번규칙으로부여)
          configData['type'] = 'RULE';
          if(!ruleIsExtValId){  // 자동채번
            dewself.fp_empNo_tb.text('AUTO-NUMBERING');
          }
          break;
        case '4': // 4(통합사원번호 부여)
          configData['type'] = 'SET_GEMP_NO';
          break;
      }

      return configData;
    }

    function getControlConfig(data) {
      let configData = {};
      $.each(data, function(i, items) {
        configData[items.SETUP_DATA1_DC] = {};
        configData[items.SETUP_DATA1_DC]['required'] = items.SETUP_DATA2_DC;
        configData[items.SETUP_DATA1_DC]['readonly'] = items.SETUP_DATA3_DC;
      });

      return configData;
    }

    function getExceptionCode(configData) {
      let result = {};
      $.each(configData, function(i, o) {
        if(result.hasOwnProperty(o.SETUP_DATA1_DC) === false) {
          result[o.SETUP_DATA1_DC] = {};
        }
        result[o.SETUP_DATA1_DC][o.SETUP_DATA2_DC] = o.SETUP_DATA3_DC;
      });

      return result;
    }

    function getTabauthConfig(empNo) {
      let configData = {};
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementHBCService', 'pamhbc00300_tabAuthByEmp_auth_list'), {
        async: false,
        data: {
          emp_no: empNo,
          // emp_no: '1',
        }
      }).done(function (data) {
        $.each(data, function(i, items) {
          if (configData[items.STDRTAB_ID] === undefined) {
            configData[items.STDRTAB_ID] = {};
            configData[items.STDRTAB_ID]['tabId'] = items.STDRTAB_ID;
            configData[items.STDRTAB_ID]['tabName'] = items.STDRTAB_NM;
            configData[items.STDRTAB_ID]['available'] = items.USE_YN;
            configData[items.STDRTAB_ID]['subtab'] = [];
          }
          if (items.SUB_TAB_ID !== '*') {
            let arcodienId;
            switch (items.STDRTAB_ID) {
              case 'LookupTab':
                arcodienId = 'arcodien_lookup';
                break;
              case 'AdditionalInfoTab':
                arcodienId = 'arcodien_addinfo';
                break;
            }
            configData[items.STDRTAB_ID]['subtab'].push({arcodienId: arcodienId, subtabId: items.SUB_TAB_ID, subtabName: items.STDRTEAM_NM, available: items.USE_YN});
            if (items.USE_YN === 'Y') {
              configData[items.STDRTAB_ID]['available'] = items.USE_YN;
            }
          }
        });
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });

      return configData;
    }

    function getSalclassType(config) {
      let type = null;
      if (config.length > 0) {
        switch(config[0].SETUP_DATA1_DC) {
          case '1':
            type = 'POSI_CD'
            break;
          case '2':
            type = 'JKND_CD'
            break;
          case '3':
            type = 'DUTY_CD'
            break;
          case '4':
            type = 'ODTY_CD'
            break;
        }
      }
      return type;
    }

    function getSalclassValue(config) {
      let value = null;
      if (config.length > 0) {
        switch(config[0].SETUP_DATA1_DC) {
          case '1':
            value = dewself.fp_posiCd_ddl.value();
            break;
          case '2':
            value = dewself.fp_jkndCd_ddl.value();
            break;
          case '3':
            value = dewself.fp_dutyCd_ddl.value();
            break;
          case '4':
            value = dewself.fp_odtyCd_ddl.value();
            break;
        }
      }
      return value;
    }

    function getAvailableHuanCode(config) {
      let huanCodesPipe;
      huanCodesPipe = config.filter(function(elem) {
        return elem.SETUP_DATA1_DC === 'Y';
      })
      .map(function(currValue) {
        return currValue.MCLS_CD;
      }).join('|');

      return huanCodesPipe;
    }


    function setBindingAttributes() {
      // data-custom-~~ 처럼 attribute를 주게되면 dataset 안에 data-를 제외하고 lowerCamelCase로 property가 저장된다.
      // data-custom-component-type -> customComponentType
      dewself.$content.find('.dews-ui-textbox').attr('data-custom-getter-type', 'text');
      dewself.$content.find('.dews-ui-textbox').attr('data-custom-setter-type', 'text');
      dewself.$content.find('.dews-ui-textbox').attr('data-custom-component-type', 'text');
      dewself.$content.find('.dews-ui-numerictextbox').attr('data-custom-getter-type', 'value');
      dewself.$content.find('.dews-ui-numerictextbox').attr('data-custom-setter-type', 'value');
      // dewself.$content.find('.dews-ui-maskedtextbox').attr('data-custom-getter-type', 'value');
      dewself.$content.find('.dews-ui-maskedtextbox').attr('data-custom-getter-type', 'raw');
      dewself.$content.find('.dews-ui-maskedtextbox').attr('data-custom-setter-type', 'value');
      dewself.$content.find('.dews-ui-dropdownlist').attr('data-custom-getter-type', 'value');
      dewself.$content.find('.dews-ui-dropdownlist').attr('data-custom-setter-type', 'value');
      dewself.$content.find('.dews-ui-codepicker').attr('data-custom-getter-type', 'code');
      dewself.$content.find('.dews-ui-codepicker').attr('data-custom-setter-type', 'setData');
      dewself.$content.find('.dews-ui-codepicker').attr('data-custom-component-type', 'code');
      dewself.$content.find('.dews-ui-datepicker').attr('data-custom-getter-type', 'value');
      dewself.$content.find('.dews-ui-datepicker').attr('data-custom-setter-type', 'value');
      dewself.$content.find('.dews-ui-zipcodepicker').attr('data-custom-getter-type', 'value');
      dewself.$content.find('.dews-ui-zipcodepicker').attr('data-custom-setter-type', 'value');
      dewself.$content.find('.dews-ui-zipcodepicker').attr('data-custom-component-type', 'zipcode');
      dewself.$content.find('.dews-ui-radio-group').attr('data-custom-getter-type', 'value');
      dewself.$content.find('.dews-ui-radio-group').attr('data-custom-setter-type', 'value');
      dewself.$content.find('.dews-ui-radio-group').attr('data-custom-component-type', 'radio');

      dewself.$content.find('.dews-ui-checkbox').attr('data-custom-getter-type', 'value');
      dewself.$content.find('.dews-ui-checkbox').attr('data-custom-setter-type', 'value');
    }

    function setSecureMask() {
      if (dewself.comEnv.mask.PAMPHM00100)
      {
        if (dewself.comEnv.mask.PAMPHM00100.RES_NO)
        {
          let docuItem = document.getElementById('fp_resNo_mtb');
          let docuItem2 = document.getElementById('fp_resNoMasked_mtb');
          docuItem.setAttribute('data-dews-secure-mask', dewself.comEnv.mask.PAMPHM00100.RES_NO);
          docuItem2.setAttribute('data-dews-secure-mask', dewself.comEnv.mask.PAMPHM00100.RES_NO);
        }

        if (dewself.comEnv.mask.PAMPHM00100.FRNR_INSERT_NO)
        {
          let docuItem = document.getElementById('fp_frnrInsertNo_tb');
          docuItem.setAttribute('data-dews-use-secure-mask', true);
          docuItem.setAttribute('data-dews-secure-mask', dewself.comEnv.mask.PAMPHM00100.FRNR_INSERT_NO);
        }

        if (dewself.comEnv.mask.PAMPHM00100.BASE_RES_ADDR)
        {
          let docuItem = document.getElementById('fp_baseResAddr_tb');
          docuItem.setAttribute('data-dews-use-secure-mask', true);
          docuItem.setAttribute('data-dews-secure-mask', dewself.comEnv.mask.PAMPHM00100.BASE_RES_ADDR);
        }

        if (dewself.comEnv.mask.PAMPHM00100.DTL_RES_ADDR)
        {
          let docuItem = document.getElementById('fp_dtlResAddr_tb');
          docuItem.setAttribute('data-dews-use-secure-mask', true);
          docuItem.setAttribute('data-dews-secure-mask', dewself.comEnv.mask.PAMPHM00100.DTL_RES_ADDR);
        }

      }

    }

    // 데이터 검사 로직 수행
    function isDataValid() {
      if (!isTotalDataValid()) {
        // dews.ui.snackbar.warning(dews.localize.get('입력되지 않은 필수값이 있습니다.', 'M0000036', '', 'PAMPHM00100'));
        openRequiredCheckDialog();
        return false;
      }
      if (!isEmpDataChanged()) {
        dews.ui.snackbar.info(dews.localize.get('변경된 데이터가 없습니다.', 'M0000020', '', 'PAMPHM00100'));
        return false;
      }
      if(!changeRetrDate()) {
        dews.ui.snackbar.info('퇴사자와 연결된 로그인ID로 다른 회사에 재직중인 사원이 있습니다.', {exposureTime: 3000});
        openConnectedAccountDialog();
        changeRetrDateGempNo = new Array();
        changeRetrDateList = new Map();
        return false;
      }

      changeRetrDateGempNo = new Array();
      changeRetrDateList = new Map();

      return true;
    }

    // 데이터 검사 로직 수행
    function isDataValid2() {
      if (!isTotalDataValid()) {
        // dews.ui.snackbar.warning(dews.localize.get('입력되지 않은 필수값이 있습니다.', 'M0000036', '', 'PAMPHM00100'));
        openRequiredCheckDialog();
        return false;
      }
      if(!changeRetrDate()) {
        dews.ui.snackbar.info('퇴사자와 연결된 로그인ID로 다른 회사에 재직중인 사원이 있습니다.', {exposureTime: 3000});
        openConnectedAccountDialog();
        changeRetrDateGempNo = new Array();
        changeRetrDateList = new Map();
        return false;
      }

      changeRetrDateGempNo = new Array();
      changeRetrDateList = new Map();

      return true;
    }

    function changeRetrDate() { // 퇴사일자 변경된 사원 체크
      var changeRetrDateResult = true;

      $.each(totalData, function(uid, value) {
        // 퇴직일자 변경 여부 확인
        var tempRetrDt = value['HR_EMP_MST']['RETR_DT']; // 퇴사일자
        var tempRetrDtChgYn = value['HR_EMP_MST']['RETR_DT_CHG_YN']; // 퇴사일자 변경 여부

        if(tempRetrDtChgYn == 'Y' && (tempRetrDt != null && tempRetrDt != undefined && tempRetrDt != "")) {
          var tempGempNo = value['HR_EMP_MST']['GEMP_NO'];
          changeRetrDateGempNo.push(tempGempNo);
          changeRetrDateList.set(tempGempNo, tempRetrDt);
        }
      });

      if(changeRetrDateGempNo.length > 0) {
        changeRetrDateResult = checkWorkGempNo();
      }

      tempChangeRetrDateGempNo = changeRetrDateGempNo;

      return changeRetrDateResult;
    }

    function checkWorkGempNo() {
      var checkWorkGempNoResult = true;
      dews.api.post(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_checkWorkGempNo'), {
        async: false,
        data: {
          gemp_no_pipe: changeRetrDateGempNo.join("|")
        }
      }).done(function (data) {
        // console.log("pamphm00100_checkWorkGempNo:", data);
        if(data.length > 0) {
          changeRetrDateGempNo = new Array();
          for(i=0; i<data.length; i++) {
            changeRetrDateGempNo.push(data[i].GEMP_NO);
          }
          checkWorkGempNoResult = false;
        }
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });

      return checkWorkGempNoResult;
    }

    function openConnectedAccountDialog() {
      let dialog;
      let initData;

      initData = {
        changeRetrDateGempNo: changeRetrDateGempNo,
        changeRetrDateList: changeRetrDateList
      };

      dialog = dews.ui.dialog('H_HR_CON_ACC_C', {
        url: '/codehelp/HR/H_HR_CON_ACC_C',
        title: '접속 계정 종료',
        // helpSize: "big",
        width: 900,
        height: 600,
        initData: initData,
        ok: function (data) {
          // console.log("접속 계정 종료 도움창:", data);

          $.each(totalData, function(uid, value) {
            for(i=0; i<data.length; i++) {
              if(value['HR_EMP_MST']['GEMP_NO'] == data[i]['GEMP_NO']) {
                totalData[uid]['HR_EMP_MST']['RETR_DT'] = dews.date.format(data[i]['RETR_DT'], 'yyyyMMdd'); // 도움창에서 입력한 퇴사일자로 변경
              }
            }
          });

          dews.api.post(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_saveRetrData'), {
            data: {
              checkedData: JSON.stringify(data)
            }
          }).done(function (data) {
            if (data === true) {
              // dews.ui.snackbar.info("접속 계정 종료가 적용되었습니다.", 'success');
              $.each(totalData, function(uid, value) {
                for(i=0; i<tempChangeRetrDateGempNo.length; i++) {
                  if(value['HR_EMP_MST']['GEMP_NO'] == tempChangeRetrDateGempNo[i]) { // [접속 계정 종료]도움창으로 보냈던 사원이면
                    // 퇴직일자 변경 여부 'N'으로 수정
                    var tempRetrDt = value['HR_EMP_MST']['RETR_DT']; // 퇴사일자
                    var tempRetrDtChgYn = value['HR_EMP_MST']['RETR_DT_CHG_YN']; // 퇴사일자 변경 여부

                    if(tempRetrDtChgYn == 'Y') {
                      totalData[uid]['HR_EMP_MST']['RETR_DT_CHG_YN'] = 'N';
                    }
                  }
                }
              });

              saveTotalData();
            }
          }).fail(function (xhr, status, error) {
            dews.ui.loading.hide();
            dews.error(error);
          });
        },
      });
      dialog.open();
    }

    // 필수값 입력 확인
    function isEmpDataValid() {
      let result = true;
      let target = dewself.$content.find('.dews-ui-form-panel');
      let uid = EmpCardList.getValue(EmpCardList.select(), 'uid');
      $.each(target, function(i, formPanel) {
        if (dewself[formPanel.id].validate({tooltip: false}) === false) {
          result = false;
          return false;
        }
      });

      totalData[uid]['validation'] = result;
      return result;
    }


    // 데이터 변경여부 확인
    function isEmpDataChanged() {
      let result = false;
      if (dewself._authority.save === '2') {

        $.each(totalData, function(i, o) {
          if (o.saveFlag !== 'none') {
            result = true;
            return false;
          }
        });
      } else {
        result = false;
      }

      return result;
    }

    // totalData 유효성 확인
    function isTotalDataValid() {
      validateResNo();
      let result = true;
      $.each(totalData, function(uid, value) {
        if (value.validation === false && value.saveFlag !== 'deleted') {
          result = false;
          return false;
        }
      });
      return result;
    }

    // 주민번호 유효성 확인
    function validateResNo() {
      $.each(totalData, function(uid, value) {
        // 내외국인 체인지에 따른 주민등록번호 / 외국인식별번호 필수값 입력 확인
        if(value['HR_EMPINFO_DTL']['FRGNR_CD'] == '1') {  // 내국인
          var tempResNo = value['HR_EMP_MST']['RES_NO'];
          if(tempResNo == null || tempResNo == undefined) {
            tempResNo = "";
          }

          tempResNo = tempResNo.replaceAll("*", "");
          if(tempResNo == null || tempResNo == undefined || tempResNo == "" || tempResNo.length != 13) {
            value.validation = false;
          }
        }
        else if(value['HR_EMPINFO_DTL']['FRGNR_CD'] == '2') {  // 외국인
          var tempFrnrInsertNo = value['HR_EMPINFO_DTL']['FRNR_INSERT_NO'];
          if(tempFrnrInsertNo == null || tempFrnrInsertNo == undefined || tempFrnrInsertNo == "") {
            value.validation = false;
          }
        }
        else {  // 내국인
          var tempResNo = value['HR_EMP_MST']['RES_NO'];
          if(tempResNo == null || tempResNo == undefined) {
            tempResNo = "";
          }

          tempResNo = tempResNo.replaceAll("*", "");
          if(tempResNo == null || tempResNo == undefined || tempResNo == "" || tempResNo.length != 13) {
            value.validation = false;
          }
        }
      });
    }

    // 입력값 유효성 확인
    function isInputValid(context) {
      let validation = false;
      let inputValue = dewself[context.id][context.dataset.customGetterType]();

      switch(context.id) {
        case 'fp_resNo_mtb':
          validation = inputValue.length === 13;
          break;
      }

      return validation;
    }

    // 자동채번 유효성 확인
    function isTotalDataAutoCheck(autoRuleListArray){
      let result = true;
      $.each(totalData, function(uid, value) {
        if (value.saveFlag === 'added') {
          result = false;
        }
      });
      if(!result && !ruleIsExtValId){
        // 자동채번이며 row추가되었을 경우, 채번규칙과 동일한지 확인
        dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_getnumbering_rules_check'), {
          async: false,
          data: {
            empy_shape_cd: '1'
          }
        }).done(function (data) {
          if (0 < data.length) {
            $.each(totalData, function(key, value){
              var autoRuleTempArray = [];
              var checking2 = false;
              $.each(data, function(i,data2){
                let emp_tp = data2.EMP_TP == "***" ? false : data2.EMP_TP;
                let sex_cd = data2.SEX_CD == "***" ? false : data2.SEX_CD;
                let nation_cd = data2.NATION_CD == "***" ? false : data2.NATION_CD;
                let jknd_cd = data2.JKND_CD == "***" ? false : data2.JKND_CD;
                let ogrp_cd = data2.OGRP_CD == "***" ? false : data2.OGRP_CD;
                let seri_cd = data2.SERI_CD == "***" ? false : data2.SERI_CD;
                // "***"(미사용)이 아니며, 입력한 값이 저장된값과 다른경우
                if((value.saveFlag === 'added') && ((emp_tp && emp_tp != value.HR_EMP_MST.EMP_TP) || (sex_cd && sex_cd != value.HR_EMP_MST.SEX_CD)
                  || (nation_cd && nation_cd != value.HR_EMPINFO_DTL.FRGNR_CD) || (jknd_cd && jknd_cd != value.HR_EMP_MST.JKND_CD)
                  || (ogrp_cd && ogrp_cd != value.HR_EMP_MST.OGRP_CD) || (seri_cd && seri_cd != value.HR_EMP_MST.SERI_CD))){
                    var checking = true;
                    if(autoRuleTempArray.length > 0){
                      // IE호환이 안되어서 filter 못씀.(데이터산업진흥원 인가?)
                      $.each(autoRuleTempArray, function(i, data3){
                        if(data3.UID == key){
                          checking = false;
                        }
                      });
                    }else{
                      checking = true;
                    }
                    if(checking && !checking2){
                      autoRuleTempArray.push({
                        'UID': key,
                        'BIZAREA_NM' : value.HR_EMP_MST.BIZAREA_NM,
                        'DEPT_NM' : value.HR_EMP_MST.DEPT_NM,
                        'EMP_NO' : "",
                        'KOR_NM' : value.HR_EMP_MST.KOR_NM
                      });
                    }
                } else if (value.saveFlag === 'added'){
                  // 위에 if문에서 다른경우가 걸러졌으니, 이부분은 전부 같은 데이터가 있음.(그럼 초기화)
                  autoRuleTempArray = [];
                  checking2 = true;
                }
              });
              if(autoRuleTempArray != ""){
                // for문에서 봤을땐 무조건 한사람씩 push
                autoRuleListArray.push(autoRuleTempArray[0])
              }
            });
          }
        }).fail(function (xhr, status, error) {
        });
      }
      return autoRuleListArray;
    }

    if(dews.ui.page.mainEnv.drsCode == '20171' || dews.ui.page.mainEnv.drsCode == '20172') {
      dewself.fp_slstCd_cp2.on('setData', function (e, e2) {
          // 코드피커의 데이터가 설정될 때 수행될 코드 작성
        // console.log("호봉 코드피커:", e);
        // console.log("호봉 코드피커2:", e2);
      });
    }

    function setCodepickerParams() {
      let paramValue = dewself.fp_pstnCd_ddl.value();  // 직급

      if(dews.ui.page.mainEnv.drsCode == '20171' || dews.ui.page.mainEnv.drsCode == '20172') {
        dewself.fp_slstCd_cp2.setHelpParams(function () {
          return {
            pstn_cd: paramValue
          };
        });
      }else {
        dewself.fp_slstCd_cp.setHelpParams(function () {
          return {
            pstn_cd: paramValue
          };
        });
      }

      // 부서코드피커 사업장파라미터 설정
      dewself.fp_deptCd_cp.setHelpParams(function () {
        return {
          auth_bizarea: dewself.fp_bizareaCd_cp.code()
        };
      });
      // 호봉코드피커 사업장파라미터 설정
      if(dews.ui.page.mainEnv.drsCode == '20171' || dews.ui.page.mainEnv.drsCode == '20172') {
        dewself.fp_slstCd_cp2.setHelpParams(function () {
          let grpJkndCd = null;

          return {
            pstn_cd: dewself.fp_pstnCd_ddl.value(),  // 직급
            grp_jknd_cd: getSalclassValue(objConfigDtl.PAY016)
          };
        });
      }else {
        dewself.fp_slstCd_cp.setHelpParams(function () {
          let grpJkndCd = null;

          return {
            pstn_cd: dewself.fp_pstnCd_ddl.value(),  // 직급
            grp_jknd_cd: getSalclassValue(objConfigDtl.PAY016)
          };
        });
      }

      // 예산유형코드피커 계정유형파라미터 설정
      dewself.fp_bgTpCd_cp.setHelpParams(function () {
        return {
          accttype_cd: dewself.fp_accttypeCd_ddl.value(),
          docu_cd: '11'
        };
      });
    }

    // 컨트롤 데이터 변경되거나 change 될때 타는 함수
    // 데이터 자동추출 로직 함수 시작
    function setAutoInputData(e, checkVal) {
      let uid = EmpCardList.getValue(EmpCardList.select(), 'uid');
      let context;

      if (e.target.className.match('dews-ui-form-panel') === null ) {
        context = e.target;
      } else {
        context = e.$source.context;
      }
      let targetId = context.id;
      switch(targetId) {
        case 'fp_biryymmDt_dp':
          if (dewself.mainEnv.drsCode === '10032') {
            totalData[uid]['HR_EMP_MST']['RES_UPPT_BIRYYMM_DT'] = dewself.fp_biryymmDt_dp.value();
          }
          console.log('birth:', totalData[uid]['HR_EMPINFO_DTL']['BIRYYMM_DT'],' / resBirth: ', totalData[uid]['HR_EMP_MST']['RES_UPPT_BIRYYMM_DT']);
          break;
        case 'fp_resNo_mtb':  // 주민등록번호
          let resData = getBirthAndSexFromResNo(dewself[targetId][context.dataset.customGetterType]());
          if (resData !== null) {
            if (dewself.fp_biryymmDt_dp.value() === null) {
              dewself.fp_biryymmDt_dp.value(resData.birth);
              totalData[uid]['HR_EMPINFO_DTL']['BIRYYMM_DT'] = resData.birth;
            }
            totalData[uid]['HR_EMP_MST']['RES_UPPT_BIRYYMM_DT'] = resData.birth;
            dewself.fp_sexCd_ddl.value(resData.sex);
            totalData[uid]['HR_EMP_MST']['SEX_CD'] = resData.sex;
            dewself.fp_atscolcCd_ddl.value('1');
            totalData[uid]['HR_EMPINFO_DTL']['ATSCOLC_CD'] = '1';

            // 2022.04.01
            // 통합사원번호 INSERT 로직 관련추가
            // 신규사원등록일때 주민등록번호, 외국인식별번호를 입력하면 도움창이 오픈된다.
            // 해당 도움창은 "타 회사에 등록된 동일사원" 에 대하여 통합사원번호를 공유해서 현재 회사의 신규사원을 등록할때
            // "같은 통합사원번호로 등록"되게끔 하는 로직.
            // 두번째 파라미터는 '1' = 주민등록번호 / '2' = 외국인식별번호
            if(checkVal.validation != undefined && totalData[uid].saveFlag === 'added') {  // 다른 사원등록 메뉴 개발을 위하여 조건에 false를 넣어둠
              getGempNoSearch(e, '1');
            }
          } else {
            // dews.ui.snackbar.warning('주민등록번호 형식이 맞지 않습니다.');
            dewself.fp_resNo_mtb.value(null);
            totalData[uid]['HR_EMP_MST']['RES_NO'] = null;
          }
          break;
        case 'fp_groupecnyDt_dp': // 그룹입사일
          let dateValue = dewself.fp_groupecnyDt_dp.value();
          dewself.fp_hlofFgCd_ddl.value('1');       // 재직구분(재직)
          totalData[uid]['HR_EMP_MST']['HLOF_FG_CD'] = '1';

          if (dewself.fp_retireStdr_dp.value() === null) {    // 퇴직기산일 값이 없을경우에만 입력합니다.
            dewself.fp_retireStdr_dp.value(dateValue);     // 퇴직기산일
            totalData[uid]['HR_EMP_MST']['RETIRESTDR_DT'] = dateValue;
          }
          if (dewself.fp_jncoDt_dp.value() === null) {    // 입사일 값이 없을경우에만 입력합니다.
            dewself.fp_jncoDt_dp.value(dateValue);         // 입사일
            totalData[uid]['HR_EMP_MST']['JNCO_DT'] = dateValue;
          }

          break;
        case 'fp_pstnCd_ddl': // 직급
          let paramValue = dewself.fp_pstnCd_ddl.value();
          if(dews.ui.page.mainEnv.drsCode == '20171' || dews.ui.page.mainEnv.drsCode == '20172') {
            dewself.fp_slstCd_cp2.setHelpParams(function () {
              return {
                pstn_cd: paramValue,
                grp_jknd_cd: getSalclassValue(objConfigDtl.PAY016)
              };
            });
          }else {
            dewself.fp_slstCd_cp.setHelpParams(function () {
              return {
                pstn_cd: paramValue,
                grp_jknd_cd: getSalclassValue(objConfigDtl.PAY016)
              };
            });
          }
          break;
        case 'fp_accttypeCd_ddl': // 계정유형
          // 계정유형이 변경되면 예산유형 값을 null로 초기화한다.
          dewself.fp_bgTpCd_cp.setData({'BG_TP_CD': null, 'BG_TP_NM': null});
          // 예산유형코드피커 계정유형파라미터 설정
          dewself.fp_bgTpCd_cp.setHelpParams(function () {
            return {
              accttype_cd: dewself.fp_accttypeCd_ddl.value(),
              docu_cd: '11'
            };
          });

          if(configMstCom042 == '1') {
            if(CONFIG.CONTROL.use == false) { // [인사환경설정]-'사원등록항목통제'가 '미사용' 이면
              if (CONFIG.BUDGET.applyType === '1' && CONFIG.BUDGET.useConnect === '1') { // [급여전표기준등록]의 '전표적용방식'이 '1'(사원)이고 '예산연결사용여부'가 '1'사용이면
                if (dewself.fp_accttypeCd_ddl.value() === '') {  // '계정유형'이 없는 경우 필수체크에서 제외함
                  dewself.fp_bgTpCd_cp.required(false);
                } else {
                  dewself.fp_bgTpCd_cp.required(true);  // '예산유형'은 필수값으로 통제
                  dews.api.get(dews.url.getApiUrl("HR", "PersonalAdministrationManagementPHMService", "pamphm00100_checkBgTpCd"), {
                    async: false,
                    data: {
                      accttype_cd: dewself.fp_accttypeCd_ddl.value()
                    }
                  }).done(function (data) {
                    if(data.length == 1) {
                      dewself.fp_bgTpCd_cp.setData({'BG_TP_CD': data[0].BG_TP_CD, 'BG_TP_NM': data[0].BG_TP_NM});
                    }
                  }).fail(function (xhr, status, error) {
                  });
                }
              }
            }
          }else if(configMstCom042 == '2') {
            dewself.fp_bgTpCd_cp.required(false);
            dewself.fp_accttypeCd_ddl.readonly(true); // '계정유형' 읽기전용으로 설정
            dewself.fp_bgTpCd_cp.readonly(true); // '예산유형' 읽기전용으로 설정
          }

          break;
        case 'fp_reductTrgtFg_ddl': // 감면대상자
          let fgValue = dewself.fp_reductTrgtFg_ddl.value();
          let age = getBirthAndSexFromResNo(totalData[uid]['HR_EMP_MST']['RES_NO_RAW']).age;
          if (fgValue === '') {
            dewself.fp_reductTpCd_ddl.value('');
            totalData[uid]['HR_EMPPAY_DTL']['REDUCT_TP_CD'] = '';
            dewself.fp_reductAplyFg_ddl.value('');
            totalData[uid]['HR_EMPPAY_DTL']['REDUCT_APLY_FG'] = '';
            dewself.fp_reductEndDt_dp.value('');
            totalData[uid]['HR_EMPPAY_DTL']['REDUCT_END_DT'] = '';
          } else if (fgValue === '1') {
            if (age >= 60 || totalData[uid]['HR_EMPINFO_DTL']['DSB_YN_CD'] === 'Y') {
              dewself.fp_reductTpCd_ddl.value('T12');
              totalData[uid]['HR_EMPPAY_DTL']['REDUCT_TP_CD'] = 'T12';
            } else {
              dewself.fp_reductTpCd_ddl.value('T13');
              totalData[uid]['HR_EMPPAY_DTL']['REDUCT_TP_CD'] = 'T13';
            }
            dewself.fp_reductAplyFg_ddl.value('1');
            totalData[uid]['HR_EMPPAY_DTL']['REDUCT_APLY_FG'] = '1';
            if (dewself.fp_reductEndDt_dp.value() === null) {
              dews.alert(dews.localize.get('감면종료일이 입력되지 않았습니다.', 'M0015478', '', 'PAMPHM00100'), 'warning');
            }
          } else {
            dewself.fp_reductTpCd_ddl.value('T12');
            totalData[uid]['HR_EMPPAY_DTL']['REDUCT_TP_CD'] = 'T12';
            dewself.fp_reductAplyFg_ddl.value('1');
            totalData[uid]['HR_EMPPAY_DTL']['REDUCT_APLY_FG'] = '1';
            if (dewself.fp_reductEndDt_dp.value() === null) {
              dews.alert(dews.localize.get('감면종료일이 입력되지 않았습니다.', 'M0015478', '', 'PAMPHM00100'), 'warning');
            }
          }
          break;
        case 'fp_frgnrCd_ddl':
          // 2021.05.31
          // 아래 해당 로직은 내외국인 드롭다운이 변경되었을때 (내 -> 외) 생년월일 컬럼을 다시 넣어주자는 취지.
          // 그러나 해당 부분 변경하기로함
          // 기존 생년월일이 들어가 있을떄는 어떠한 경우에도 생년월일 컨트롤에 값 넣지말기.

          // let frgnrCd = dewself[targetId][context.dataset.customGetterType]();
          // let frnrInsNo2 = dewself.fp_frnrInsertNo_tb.text();
          // if (frgnrCd === '2') {
          //   let birthFromFrnrInsNo = (dewself.fp_biryymmDt_dp.value() == "" || dewself.fp_biryymmDt_dp.value() == null || dewself.fp_biryymmDt_dp.value() == undefined) ? '' : dewself.fp_biryymmDt_dp.value();
          //   if (derp.HR.isResNoValid(frnrInsNo2)) {
          //     birthFromFrnrInsNo = getBirthFromResNo(frnrInsNo2);
          //   }
          //   dewself.fp_biryymmDt_dp.value(birthFromFrnrInsNo);
          //   totalData[uid]['HR_EMPINFO_DTL']['BIRYYMM_DT'] = birthFromFrnrInsNo;
          //   totalData[uid]['HR_EMP_MST']['RES_UPPT_BIRYYMM_DT'] = birthFromFrnrInsNo;
          // }

          let frgnrCd = dewself[targetId][context.dataset.customGetterType]();

          let resNoMtb_temp = dewself.fp_resNo_mtb.text();          //주민등록번호_임시
          let frnrInsNo_temp = dewself.fp_frnrInsertNo_tb.text();   //외국인식별번호_임시
          let resUpptBiryymmDt_temp;                                //주민등록상생년월일_임시

          // 내국인
          if (frgnrCd === '1') {
            if (resNoMtb_temp) {
              resUpptBiryymmDt_temp = getBirthFromResNo(resNoMtb_temp);
              dewself.fp_resUpptBiryymmDt_dp.value(resUpptBiryymmDt_temp);
              totalData[uid]['HR_EMP_MST']['RES_UPPT_BIRYYMM_DT'] = resUpptBiryymmDt_temp;
            }
          }
          // 외국인
          else if (frgnrCd === '2') {
            if (frnrInsNo_temp) {
              if (frnrInsNo_temp.length == 13 && isFrnrInsertNoValid(frnrInsNo_temp.substring(0,7))) {
                resUpptBiryymmDt_temp = getBirthAndSexFromResNo(frnrInsNo_temp);
                dewself.fp_resUpptBiryymmDt_dp.value(resUpptBiryymmDt_temp.birth);
                totalData[uid]['HR_EMP_MST']['RES_UPPT_BIRYYMM_DT'] = resUpptBiryymmDt_temp.birth;
              }
            }
          }
          else {
            // ~.~ 들어올일 없음.
          }

          // 신규카드리스트 데이터중에 change 가 일어나면
          if(totalData[uid].saveFlag === 'added') {
            // 자동일때
            if(ciCtrlConfig_CI00012 !== '3') {
              dewself.fp_gempNo_tb.text('AUTO-NUMBERING');
              totalData[uid]['HR_EMP_MST']['GEMP_NO'] = 'AUTO-NUMBERING';
            }
            // 수동일때
            else {
              dewself.fp_gempNo_tb.text('');
              totalData[uid]['HR_EMP_MST']['GEMP_NO'] = null;
            }
          }
          break;
        case 'fp_frnrInsertNo_tb':  // 외국인등록번호 포맷이 주민등록번호처럼 입력되는경우 생일자동입력되도록 처리.
          let frnrInsNo = dewself[targetId][context.dataset.customGetterType]();
          let foreignData = null;
          // 외국인등록번호 생년월일 계산할수 있는지 검증 수정 2021.02.05
          if (frnrInsNo.length == 13 && isFrnrInsertNoValid(frnrInsNo.substring(0,7))) {
            foreignData = getBirthAndSexFromResNo(frnrInsNo);
          }

          if (foreignData !== null) {
            if (dewself.fp_biryymmDt_dp.value() === null) {
              dewself.fp_biryymmDt_dp.value(foreignData.birth);
              totalData[uid]['HR_EMPINFO_DTL']['BIRYYMM_DT'] = foreignData.birth;
            }
            dewself.fp_resUpptBiryymmDt_dp.value(foreignData.birth);
            totalData[uid]['HR_EMP_MST']['RES_UPPT_BIRYYMM_DT'] = foreignData.birth;
            dewself.fp_sexCd_ddl.value(foreignData.sex);
            totalData[uid]['HR_EMP_MST']['SEX_CD'] = foreignData.sex;
            dewself.fp_atscolcCd_ddl.value('1');
            totalData[uid]['HR_EMPINFO_DTL']['ATSCOLC_CD'] = '1';

            // 2022.04.01
            // 통합사원번호 INSERT 로직 관련추가
            // 신규사원등록일때 주민등록번호, 외국인식별번호를 입력하면 도움창이 오픈된다.
            // 해당 도움창은 "타 회사에 등록된 동일사원" 에 대하여 통합사원번호를 공유해서 현재 회사의 신규사원을 등록할때
            // "같은 통합사원번호로 등록"되게끔 하는 로직.
            // 두번째 파라미터는 '1' = 주민등록번호 / '2' = 외국인식별번호
            if(totalData[uid].saveFlag === 'added') {   // 다른 사원등록 메뉴 개발을 위하여 조건에 false를 넣어둠
              getGempNoSearch(e, '2');
            }
          } else {
            // dews.ui.snackbar.warning('주민등록번호 형식이 맞지 않습니다.');
            // dewself.fp_frnrInsertNo_tb.text(null);
            // totalData[uid]['HR_EMPINFO_DTL']['FRNR_INSERT_NO'] = null;
            totalData[uid]['HR_EMP_MST']['RES_UPPT_BIRYYMM_DT'] = null;

            // 2022.04.01
            // 통합사원번호 INSERT 로직 관련추가
            // 신규사원등록일때 주민등록번호, 외국인식별번호를 입력하면 도움창이 오픈된다.
            // 해당 도움창은 "타 회사에 등록된 동일사원" 에 대하여 통합사원번호를 공유해서 현재 회사의 신규사원을 등록할때
            // "같은 통합사원번호로 등록"되게끔 하는 로직.
            // 두번째 파라미터는 '1' = 주민등록번호 / '2' = 외국인식별번호
            if(totalData[uid].saveFlag === 'added') {   // 다른 사원등록 메뉴 개발을 위하여 조건에 false를 넣어둠
              getGempNoSearch(e, '2');
            }
          }
        case 'fp_gempNo_tb':  // 통합환경설정-통합사원번호채번규칙 이 수기이고 신규추가일때 주민등록번호, 외국인식별번호 먼저 입력하게 하기위함
          if(ciCtrlConfig_CI00012 == '3' && totalData[uid].saveFlag === 'added') {
            // 내국인
            if(dewself.fp_frgnrCd_ddl.value() == '1') {
              if(totalData[uid]['HR_EMP_MST']['RES_NO'] == null
                  || totalData[uid]['HR_EMP_MST']['RES_NO'] == ''
                  || totalData[uid]['HR_EMP_MST']['RES_NO'] == undefined
              ){
                dews.ui.snackbar.error("주민등록번호를 먼저 입력해주세요.");
                dewself.fp_gempNo_tb.text("");
                totalData[uid]['HR_EMP_MST']['GEMP_NO'] == null
                return false
              }
              else {
                // 입력된 통합사원번호 같은회사에 존재하는지 중복체크
                dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_checkGempNo'), {
                  async: false,
                  data: {
                    gemp_no: totalData[uid]['HR_EMP_MST']['GEMP_NO']
                  }
                }).done(function (result) {
                  if(result.length > 0) {
                    dews.ui.snackbar.error("해당 회사에 같은 통합사원번호를 가진 사원이 존재합니다.");
                    dewself.fp_gempNo_tb.text("");
                    totalData[uid]['HR_EMP_MST']['GEMP_NO'] == null
                  }
                  else {
                    totalData[uid]['HR_EMP_MST']['GEMP_NO'] = dewself.fp_gempNo_tb.text();
                  }
                });
              }
            }
            // 외국인
            else if(dewself.fp_frgnrCd_ddl.value() == '2') {
              if(totalData[uid]['HR_EMPINFO_DTL']['FRNR_INSERT_NO'] == null
                  || totalData[uid]['HR_EMPINFO_DTL']['FRNR_INSERT_NO'] == ''
                  || totalData[uid]['HR_EMPINFO_DTL']['FRNR_INSERT_NO'] == undefined
              ){
                dews.ui.snackbar.error("외국인식별번호를 먼저 입력해주세요.");
                dewself.fp_gempNo_tb.text("");
                totalData[uid]['HR_EMP_MST']['GEMP_NO'] == null
                return false;
              }
              else {
                // 입력된 통합사원번호 같은회사에 존재하는지 중복체크
                dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_checkGempNo'), {
                  async: false,
                  data: {
                    gemp_no: totalData[uid]['HR_EMP_MST']['GEMP_NO']
                  }
                }).done(function (result) {
                  if(result.length > 0) {
                    dews.ui.snackbar.error("해당 회사에 같은 통합사원번호를 가진 사원이 존재합니다.");
                    dewself.fp_gempNo_tb.text("");
                    totalData[uid]['HR_EMP_MST']['GEMP_NO'] == null
                  }
                  else {
                    totalData[uid]['HR_EMP_MST']['GEMP_NO'] = dewself.fp_gempNo_tb.text();
                  }
                });
              }
            }
            // 내외국인도 아닌건 없으니까
            else {
              // 여기는 들어올일 없음.
            }
          }
          break;
        default:
      }
    }

    // 컴포넌트 연쇄 작용 처리
    function checkChainEvent(e) {
      if (e.$source !== undefined) {
        let uid = EmpCardList.getValue(EmpCardList.select(), 'uid');
        let targetId = e.$source.context.id;
        switch(targetId) {
          case 'fp_retrDt_dp':  // 퇴직일자
            if (dewself['fp_retrDt_dp'].value() === null) {
              dewself['fp_hlofFgCd_ddl'].value('1');
              totalData[uid]['HR_EMP_MST']['HLOF_FG_CD'] = '1';
              totalData[uid]['HR_EMPINFO_DTL']['RETR_REASON_CD'] = null;
              totalData[uid]['HR_EMPINFO_DTL']['RETR_DTL_REASON_DC'] = null;
              dewself['fp_retrReasonNm_tb'].text(null);
              dewself['fp_retrReasonNm_tb'].readonly(true);
              dewself.$content.find('.custom-picker-button').css('display', 'none');
            } else {
              dewself['fp_hlofFgCd_ddl'].value('3');
              totalData[uid]['HR_EMP_MST']['HLOF_FG_CD'] = '3';
              dewself['fp_retrReasonNm_tb'].readonly(false);
              dewself.$content.find('.custom-picker-button').css('display', 'block');
            }
            break;
          case 'fp_hlofFgCd_ddl': // 재직구분
            if (dewself['fp_hlofFgCd_ddl'].value() === '3') {
              dewself['fp_retrReasonNm_tb'].readonly(false);
              dewself.$content.find('.custom-picker-button').css('display', 'block');
            } else {
              totalData[uid]['HR_EMPINFO_DTL']['RETR_REASON_CD'] = null;
              totalData[uid]['HR_EMPINFO_DTL']['RETR_DTL_REASON_DC'] = null;
              dewself['fp_retrReasonNm_tb'].text(null);
              dewself['fp_retrReasonNm_tb'].readonly(true);
              dewself['fp_retrDt_dp'].value(null);
              totalData[uid]['HR_EMP_MST']['RETR_DT'] = null;
              dewself.$content.find('.custom-picker-button').css('display', 'none');
            }
            break;
          case 'fp_bizareaCd_cp': // 사업장
            totalData[uid]['HR_EMP_MST']['DEPT_CD'] = null;
            dewself['fp_deptCd_cp'].clearData();
            break;
          case 'fp_deptCd_cp':  // 부서
            break;
          case 'fp_mtrscFgCd_ddl':  // 병역구분
            totalData[uid]['HR_EMPINFO_DTL']['DMBLZ_FG_CD'] = null;
            totalData[uid]['HR_EMPINFO_DTL']['AMFT_CD'] = null;
            totalData[uid]['HR_EMPINFO_DTL']['MLH_CD'] = null;
            totalData[uid]['HR_EMPINFO_DTL']['EXMT_REASON_CD'] = null;
            totalData[uid]['HR_EMPINFO_DTL']['ENST_DT'] = null;
            totalData[uid]['HR_EMPINFO_DTL']['LAYOFF_DT'] = null;
            dewself['fp_dmblzFgCd_ddl'].value(null);
            dewself['fp_amftCd_ddl'].value(null);
            dewself['fp_mlhCd_ddl'].value(null);
            dewself['fp_exmtReasonCd_ddl'].value(null);
            dewself['fp_enstDt_dp'].value(null);
            dewself['fp_layoffDt_dp'].value(null);
            break;
          default:

        }
      }
    }

    // 생년월일 from 주민등록번호
    function getBirthAndSexFromResNo(resNo) {
      let result = null;
      // if (isResNoValid(resNo)) {
        result = extractDataFromResNo(resNo);
      // }
      return result;
    }

    // 주민등록번호 유효성 검사   2021.02.08 사용 X
    function isResNoValid(res_no) {
      var regExp = /^(?:[0-9]{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[1,2][0-9]|3[0,1]))[0-9][0-9]{6}$/;
      var tempArr = [];
      var tempSum = 0;
      var validKey = 2;
      var result = false;
      if (res_no.length === 13 && res_no.match(regExp) !== null) {
        for(var index = 0; index < res_no.length; index++) {
          tempArr.push(res_no.charAt(index));
        }
        for(var i = 0; i < res_no.length -1; i++) {
          if(validKey === 10) {
            validKey = 2;
          }
          tempSum += tempArr[i] * validKey;
          validKey++;
        }
        result = (11 - tempSum%11)%10 === Number(tempArr[12]);

        return result;
      } else {
        return false;
      }
    }

    // 외국인식별번호 유효성 검사 (외국인식별번호에 주민등록폼(XXXXXX-XXXXXXX 13자리)으로 값이 들어올 때) 2021.02.05
    function isFrnrInsertNoValid(frnr_insert_no) {
      var regExp = "";

      // 게임빌 전용 정규식으로 해당 업체에서는 외국인식별번호가 주민번호랑 같을때 뒷자리의 첫번째 숫자가 5, 6, 7, 8 뿐만 아니라 1, 2 도 존재한다고함.
      if(dewself.mainEnv.drsCode == '10031') {
        regExp = /^(?:[0-9]{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[1,2][0-9]|3[0,1]))([1-2]|[5-8])/;
      }
      else {
        regExp = /^(?:[0-9]{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[1,2][0-9]|3[0,1]))[5-8]/;
      }

      if (frnr_insert_no.match(regExp) !== null) {
        return true;
      } else {
        return false;
      }
    }

    // 주민번호 포맷 데이터에서 생년월일 얻기
    function getBirthFromResNo(resNo) {
      let century19 = ['1', '2', '5', '6'];
      let century20 = ['3', '4', '7', '8'];
      let century;
      let fullDate;
      let birth;
      try {
        if (century19.indexOf(resNo.substring(6, 7)) !== -1) {
          century = '19';
        } else if (century20.indexOf(resNo.substring(6, 7)) !== -1) {
          century = '20';
        } else {
          century = '19';
        }


        fullDate = century + resNo.substring(0, 6);
        birth = century.concat(resNo.substring(0, 6));
      } catch (error) {
        return null;
      }

      return birth;
    }

    // 주민등록번호로 부터 생년월일, 생일 추출
    function extractDataFromResNo(resNo) {
      let century19 = ['1', '2', '5', '6'];
      let century20 = ['3', '4', '7', '8'];
      let maleArr = ['1', '3', '5', '7'];
      let femaleArr = ['2', '4', '6', '8'];
      let century;
      let sex;
      let age;
      let fullDate;
      let result = {};
      try {
        if (century19.indexOf(resNo.substring(6, 7)) !== -1) {
          century = '19';
        } else if (century20.indexOf(resNo.substring(6, 7)) !== -1) {
          century = '20';
        } else {
          century = '19';
        }

        if (maleArr.indexOf(resNo.substring(6, 7)) !== -1) {
          sex = '1';
        } else if (femaleArr.indexOf(resNo.substring(6, 7)) !== -1) {
          sex = '2';
        } else {
          sex = '1';
        }

        fullDate = century + resNo.substring(0, 6);
        age = Math.trunc((((new Date() - new Date(fullDate.substring(0, 4), fullDate.substring(4, 6) - 1, fullDate.substring(6, 8)))/1000)/86400)/365);

        result.birth = century.concat(resNo.substring(0, 6));
        result.sex = sex;
        result.age = age;
      } catch (error) {
        dews.alert(dews.localize.get('생년월일 형식에 맞지 않습니다.', 'M0013409', '', 'PAMPHM00100'), 'warning');
      }

      return result;
    }

    // 주민등록번호 중복된 사원 체크 (일용직, 상용직)
    function isResNoDuplicate(res_no, e, uid) {
      var result = {};
      dews.api.get(dews.url.getApiUrl("HR", "PersonalAdministrationManagementPHMService", "pamphm00100_checkResNo"), {
        async: false,
        data: {
          res_no: res_no
        }
      }).done(function (data) {
        if(data.length > 0) {
          var apiResult = true;

          if (apiResult === true) {
            setTimeout(function() {
              focusButtonAfterConfirm();
              dews.confirm(dews.localize.get('이미 등록된 주민번호 입니다. \n허용하시겠습니까?', 'M0005949', '', 'PAMPHM00100'), 'question').yes(function () {
                result.validation = true;
                formPanelProcess(result, e, uid);
              }).no(function () {
                result.validation = false;
                result.message = dews.localize.get('중복된 주민번호입니다.', 'M0005950', '', 'PAMPHM00100');
                dewself.fp_resNo_mtb.value('');
                formPanelProcess(result, e, uid);
              });
            }, 500);

          } else {
            result.validation = true;
            formPanelProcess(result, e, uid);
          }
        }
        else {
          result.validation = true;
          formPanelProcess(result, e, uid);
        }
      }).fail(function (xhr, status, error) {
      });
    }

    // 라디오버튼 바인딩을 커스텀하게되면서 필요한 함수 (선택상태를 정상적으로 초기화시켜줌)
    function refreshRadioAttribute(radioId) {

      let uid = EmpCardList.getValue(EmpCardList.select(), 'uid');
      let table = dewself.$content.find('#' + radioId).attr('data-custom-bind-table');
      let column = dewself.$content.find('#' + radioId).attr('data-custom-bind-column');
      let currentData = totalData[uid][table][column];
      let currentRadioValue = dewself.$content.find('#' + radioId + ' option[selected="selected"]').attr('value');
      dewself.$content.find('#' + radioId + ' option[value!="' + currentRadioValue + '"]').removeAttr('selected');
    }

    // 입력값에 따른 컴포넌트 활성화처리
    function setComponentActivation(onoff) {
      // 기본정보1, 2 항목들은 수정 중일경우만 동작하도록.
      if (dewself.$content.find('#btn_edit').hasClass('on')) {
        // // 수정불가항목
        // 내외국인
        closeRelatedComponent('fp_frgnrCd_ddl', 'fp_ntnlCd_cp', '1', onoff, false);
        closeRelatedComponent('fp_frgnrCd_ddl', 'fp_frnrInsertNo_tb', '1', onoff, false);
        closeRelatedComponent('fp_frgnrCd_ddl', 'fp_resNo_mtb', '2', onoff, false);
        closeRelatedComponent('fp_frgnrCd_ddl', 'fp_stayQua_cd', '1', onoff, false);
        // 직급
        if(dews.ui.page.mainEnv.drsCode == '20171' || dews.ui.page.mainEnv.drsCode == '20172') {
          closeRelatedComponent('fp_pstnCd_ddl', 'fp_slstCd_cp2', '', onoff);
        }else {
          closeRelatedComponent('fp_pstnCd_ddl', 'fp_slstCd_cp', '', onoff);
        }
        closeRelatedComponent('fp_hlofFgCd_ddl', 'fp_retrReasonNm_tb', '1', onoff);

      }
      // 급여기초
      if(configMstCom042 == '1') {
        if(CONFIG.CONTROL.use == false) { // [인사환경설정]-'사원등록항목통제'가 '미사용' 이면
          if (CONFIG.BUDGET.applyType === '1' && CONFIG.BUDGET.useConnect === '1') { // [급여전표기준등록]의 '전표적용방식'이 '1'(사원)이고 '예산연결사용여부'가 '1'사용이면
            closeRelatedComponent('fp_accttypeCd_ddl', 'fp_bgTpCd_cp', '', onoff, true, '');    // 예산유형
          }
        }
      }else if(configMstCom042 == '2') {
        dewself.fp_bgTpCd_cp.required(false);
        dewself.fp_accttypeCd_ddl.readonly(true); // '계정유형' 읽기전용으로 설정
        dewself.fp_bgTpCd_cp.readonly(true); // '예산유형' 읽기전용으로 설정
      }

      closeRelatedComponent('fp_dsbYnCd_ddl', 'fp_dsbTp_ddl', 'N', onoff, true);        // 장애인여부
      closeRelatedComponent('fp_dsbYnCd_ddl', 'fp_dsbFgCd_ddl', 'N', onoff, true);
      closeRelatedComponent('fp_dsbYnCd_ddl', 'fp_dsbGrdCd_ddl', 'N', onoff, true);
      closeRelatedComponent('fp_dsbYnCd_ddl', 'fp_dsbAckDt_dp', 'N', onoff, true);
      if(dewself.mainEnv.drsCode === '10062'){
        closeRelatedComponent('fp_dsbYnCd_ddl', 'fp_dsbTmnn_dt', 'N', onoff, true);
      }

      closeRelatedComponent('fp_vtrnTrgtCd_ddl', 'fp_vtrnRelCd_ddl', 'N', onoff, true, 'N'); // 보훈여부
      closeRelatedComponent('fp_vtrnTrgtCd_ddl', 'fp_vtrnFgCd_ddl', 'N', onoff, true, 'N');
      closeRelatedComponent('fp_vtrnTrgtCd_ddl', 'fp_vtrnGrdCd_ddl', 'N', onoff, true, 'N');
      closeRelatedComponent('fp_vtrnTrgtCd_ddl', 'fp_vtrnNo_tb', 'N', onoff, true, 'N');
      closeRelatedComponent('fp_residntCd_rdo', 'fp_resdncCd_cp', '1', onoff, true);    // 거주지국
      closeRelatedComponent('fp_ocwCd_rdo', 'fp_noabrodCd_ddl', 'N', onoff, true);    // 국외근로여부
      closeRelatedComponent('fp_sceprepayTrgtCd_rdo', 'fp_sceprepayAmt_ntb', 'N', onoff, true);    // 학자금상환액
      // 병역구분
      closeRelatedComponent('fp_mtrscFgCd_ddl', 'fp_dmblzFgCd_ddl', '1', !onoff, false);    //
      closeRelatedComponent('fp_mtrscFgCd_ddl', 'fp_amftCd_ddl', '1', !onoff, false);    //
      closeRelatedComponent('fp_mtrscFgCd_ddl', 'fp_mlhCd_ddl', '1', !onoff, false);    //
      closeRelatedComponent('fp_mtrscFgCd_ddl', 'fp_enstDt_dp', '1', !onoff, false);    //
      closeRelatedComponent('fp_mtrscFgCd_ddl', 'fp_layoffDt_dp', '1', !onoff, false);    //
      closeRelatedComponent('fp_mtrscFgCd_ddl', 'fp_exmtReasonCd_ddl', '2|3', !onoff, false);    //
    }

    function closeRelatedComponent(componentId, relatedId, value, onoff, clear, defaultValue) {
      let uid = getCurrentRowValue(EmpCardList, 'uid', null);
      let dataset = dewself.$content.find('#' + relatedId)[0].dataset;
      let configColumn = CONFIG.CONTROL.config[dataset.customBindColumn] || 'NOT_COLUMN';
      let validValueArray = value.split('|');
      if (CONFIG.CONTROL.use === false || (CONFIG.CONTROL.use === true && configColumn !== 'NOT_COLUMN' && configColumn.readonly !== 'Y')) {
        // 비교해야하는 값에 비교할 값이 포함될때 2021.01.20
        if (validValueArray.includes(dewself[componentId].value() || defaultValue)) {
          if (clear === true) {
            switch(dataset.customComponentType) {
              case 'code':
                let param = {};
                param[dataset.dewsCodeField] = null;
                param[dataset.dewsTextField] = null;
                dewself[relatedId].setData(param, false);
                totalData[uid][dataset.customBindTable][dataset.customBindColumn] = null;
                break;
              case 'text':
                dewself[relatedId].text(null);
                totalData[uid][dataset.customBindTable][dataset.customBindColumn] = null;
                break;
              default:
                dewself[relatedId].value(null);
                totalData[uid][dataset.customBindTable][dataset.customBindColumn] = null;
            }
          }
          if (relatedId === 'fp_retrReasonNm_tb') {
            // 퇴직사유 커스텀 버튼 활성처리
            dewself.$content.find('.custom-picker-button').css('display', 'none');
          }
          // 사라진 코드피커버튼이벤트 추가
          setSalclassClickEvent(); // 호봉
          dewself[relatedId].readonly(onoff);

          if(relatedId === "fp_bgTpCd_cp") {
            if(configMstCom042 == '1') {
              if(CONFIG.CONTROL.use == false) { // [인사환경설정]-'사원등록항목통제'가 '미사용' 이면
                // 계정유형 change 시 null 값일 때 예산유형 required, readonly 적용 2021.01.28
                dewself[relatedId].readonly(false);
                dewself[relatedId].required(false);
              }
            }else if(configMstCom042 == '2') {
              dewself.fp_bgTpCd_cp.required(false);
              dewself.fp_accttypeCd_ddl.readonly(true); // '계정유형' 읽기전용으로 설정
              dewself.fp_bgTpCd_cp.readonly(true); // '예산유형' 읽기전용으로 설정
            }
          }
        }
        // 비교해야하는 값에 비교할 값이 없을때 2021.01.20
        else {
          if (relatedId === 'fp_retrReasonNm_tb') {
            // 퇴직사유 커스텀 버튼 활성처리
            dewself.$content.find('.custom-picker-button').css('display', 'block');
          }
          if(relatedId === "fp_bgTpCd_cp") {
            if(configMstCom042 == '1') {
              if(CONFIG.CONTROL.use == false) { // [인사환경설정]-'사원등록항목통제'가 '미사용' 이면
                // 계정유형 change 시 값이 있을 때 예산유형 required, readonly 적용 2021.01.28
                dewself[relatedId].required(true);
              }
            }else if(configMstCom042 == '2') {
              dewself.fp_bgTpCd_cp.required(false);
              dewself.fp_accttypeCd_ddl.readonly(true); // '계정유형' 읽기전용으로 설정
              dewself.fp_bgTpCd_cp.readonly(true); // '예산유형' 읽기전용으로 설정
            }
          }
          dewself[relatedId].readonly(!onoff);
        }
      }
    }

    // 사원번호, 코드자리수통제값 비교
    function checkEmpNoWithDigit(emp_no, e, uid) {
      let result = {};
      if (CONFIG.DIGIT.use === 'Y') {
        if (CONFIG.DIGIT.method === 'equal') {
          result.validation = emp_no.length === CONFIG.DIGIT.number;
          result.message = dews.localize.get("'코드자리수통제' 설정에 맞지 않습니다", 'D0015498', '', 'PAMPHM00100');
          formPanelProcess(result, e, uid);
        } else {
          result.validation = emp_no.length <= CONFIG.DIGIT.number;
          result.message = dews.localize.get("'코드자리수통제' 설정에 맞지 않습니다", 'D0015498', '', 'PAMPHM00100');
          formPanelProcess(result, e, uid);
        }
      } else {
        result.validation = true;
        result.message = dews.localize.get("'코드자리수통제' 미사용", 'D0073825', '', 'PAMPHM00100');
        formPanelProcess(result, e, uid);
      }
    }

    function selectMaxEmpNoAllCom() {
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_selectMaxEmpNoAllCom'), {
        async: false,
      }).done(function (data) {
        if(data.length > 0) {
          var alertMsg1 = 'MAX 사번은 ';
          var alertMsg2 = ' 입니다.';
          dews.alert(alertMsg1 + data[0].MAX_EMP_NO + alertMsg2);
        }
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });
    }

    // 주민번호 중복여부 검사
    function checkValidResNo(res_no, e, uid) {
      let result = {};
      if (res_no.length !== 13) {
        result.validation = false;
        result.message = dews.localize.get('주민등록번호 형식이 아닙니다.', 'M0013410', '', 'PAMPHM00100');
        dewself.fp_resNo_mtb.value('');
        focusButtonAfterAlert();
        formPanelProcess(result, e, uid);
      } else if (derp.HR.isResNoValid(res_no) === false) {
        focusButtonAfterConfirm();
        dews.confirm(dews.localize.get('주민등록번호가 맞지 않습니다. \n허용하시겠습니까?', 'M0013411', '', 'PAMPHM00100'), 'question').yes(function () {
          // 주민등록번호 중복된 사원 체크 (일용직, 상용직)
          isResNoDuplicate(res_no, e, uid);
        }).no(function () {
          result.validation = false;
          result.message = dews.localize.get('유효하지않은 주민번호입니다.', 'M0013412', '', 'PAMPHM00100');
          dewself.fp_resNo_mtb.value('');
          focusButtonAfterAlert();
          formPanelProcess(result, e, uid);
        });
      } else { // 주민번호가 옳바른 경우
        // result.validation = true;
        // formPanelProcess(result, e, uid);

        // 주민등록번호 중복된 사원 체크 (일용직, 상용직)
        isResNoDuplicate(res_no, e, uid);
      }
    }

    // 메일주소 유효성 검사
    function checkEmailAddress(email, e, uid) {
      let result = {};
      let regExp = /^[_]*[0-9a-zA-Z]([-_.]?[_]*[0-9a-zA-Z][_]*)*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
      if (email.match(regExp) !== null) {
        if(dewself.mainEnv.drsCode == '10075') { // 동아일보
          if(checkDupEamilId(email.split('@', 1))) {
            result.validation = false;
            result.message = dews.localize.get('중복된 메일계정 정보 입니다.', 'M0108267', '', 'PAMPHM00100');
            dewself.fp_emailNm_tb.text('');
            formPanelProcess(result, e, uid);
          }else {
            result.validation = true;
            formPanelProcess(result, e, uid);
          }
        }else {
          result.validation = true;
          formPanelProcess(result, e, uid);
        }
      } else {
        if (email == "") {
          result.validation = true;
          dewself.fp_emailNm_tb.text('');
          formPanelProcess(result, e, uid);
        }
        else {
          result.validation = false;
          result.message = dews.localize.get('올바른 메일 형식이 아닙니다.', 'M0006426', '', 'PAMPHM00100');
          dewself.fp_emailNm_tb.text('');
          formPanelProcess(result, e, uid);
        }
      }

      return result;
    }

    function checkDupEamilId(email_id) { // 이메일 계정 중복 체크
      let dupEamilIdResult = true;

      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_checkDupEamilId'), {
        async: false,
        data: {
          email_id: email_id.length > 0 ? email_id[0] : ""
        }
      }).done(function (result) {
        dupEamilIdResult = result;
      }).fail(function (xhr, status, error) {
        dews.error(dews.localize.get('이메일 계정 중복 체크 오류입니다.', 'M0108269'));
      });

      return dupEamilIdResult;
    }

    function checkFormInputDataValid(e, uid) {
      if (typeof e.$source !== 'undefined') {
        switch(e.$source.context.id) {
          case 'fp_empNo_tb':   // 사원등록
            checkEmpNoWithDigit(dewself.fp_empNo_tb.text(), e, uid);
            break;
          case 'fp_resNo_mtb':  // 주민등록번호
            checkValidResNo(dewself.fp_resNo_mtb.raw(), e, uid);
            break;
          case 'fp_emailNm_tb':  // 이메일
            checkEmailAddress(dewself.fp_emailNm_tb.text(), e, uid);
            break;
          default:
            var result = {};
            result.validation = true;
            formPanelProcess(result, e, uid);
            break;
        }
      }
    }

    function getDigitMethod(method_tp) {
      let methodType;
      switch(method_tp) {
        case '1':
          methodType = 'equal'
          break;
        case '2':
          methodType = 'below'
          break;
      }
      return methodType;
    }

    // 특정 DRS마다 변경되는 사항들 적용
    function setDrsProperties(drsCode) {
      switch(drsCode) {
        case '10005':
          dewself.$content.find('.drs-property-10005').css('display', 'block');
          //패키지 컬럼 삭제처리
          dewself.$content.find('#fp_retire_dp_li').css('display', 'none');
          document.querySelector("#fp_dutyCd_ddl_li").parentNode.removeChild(document.querySelector("#fp_dutyCd_ddl_li"))
          document.querySelector("#fp_dsbTmnn_dt_li_X10062").parentNode.removeChild(document.querySelector("#fp_dsbTmnn_dt_li_X10062"));
          break;
        case '10012': // JB
          dewself.$content.find('#fp_prmdmclAddr_tb').closest('li').children('label').text(dews.localize.get('등록기준지', 'D0073823', '', 'PAMPHM00100'));
          document.querySelector("#fp_dutyCd_ddl_li_x10005").parentNode.removeChild(document.querySelector("#fp_dutyCd_ddl_li_x10005"));
          document.querySelector("#fp_dsbTmnn_dt_li_X10062").parentNode.removeChild(document.querySelector("#fp_dsbTmnn_dt_li_X10062"));
          break;
        case '10062': // 가스공사
          dewself.$content.find('.drs-property-10062').css('display', 'block');
          document.querySelector("#fp_dutyCd_ddl_li_x10005").parentNode.removeChild(document.querySelector("#fp_dutyCd_ddl_li_x10005"));
          break;
        default:
          document.querySelector("#fp_dutyCd_ddl_li_x10005").parentNode.removeChild(document.querySelector("#fp_dutyCd_ddl_li_x10005"));
          document.querySelector("#fp_dsbTmnn_dt_li_X10062").parentNode.removeChild(document.querySelector("#fp_dsbTmnn_dt_li_X10062"));
          dewself.$content.find('.useBlock').css('display', 'none');
          if(drsCode != '20126' && drsCode != '20086') {
            dewself.$content.find('#fp_psnEmpNo_li').remove(); // 인물번호
          }

          if(drsCode != '20086') {
            dewself.$content.find("#std_Z0001_chk_btn").remove(); // 조합원번호 체크
          }
          break;
      }
    }
    function allowFirstTimeInput(configData) {
      // 사용할 때
      if (configData.use === true) {
        $.each(configData.config, function(column, config) {
          var componentId = $('[data-custom-bind-column = ' + column + ']').attr('id');
          var isThisRadio = $('[data-custom-bind-column = ' + column + ']').hasClass('dews-ui-radio-group');

          if (componentId !== undefined) {
            if (isThisRadio === true) {
              if (config.readonly === 'Y') {
                dewself[componentId].disable(false);
              }
            } else {
              if (config.required === 'Y') {
                if (typeof dewself[componentId].required === 'function') {    // 함수 존재여부 체크 후 required() 가 있으면 if 내부코드 실행 (radio버튼을 제외하기위함)
                  dewself[componentId].required(true);
                  dewself.$content.find('#' + componentId).addClass('required');    // .required(true) 사용시 datePicker는 required 클래스가 적용이안돼서 validate()에 걸리지 않음.
                  // dewself.$content.find('#' + componentId).siblings().addClass('required');    // .required(true) 사용시 numeric-text-box는 required 클래스가 적용이안돼서 validate()에 걸리지 않음.
                }
              }
              if (config.readonly === 'Y') {
                dewself.$content.find('#' + componentId).attr('data-custom-config-readonly', 'true');
                dewself[componentId].readonly(false);
              }
            }
          }
        });
        // 사용하지 않을 때
      } else {

      }
      // 사용여부 관계없이 아래 항목은 무조건 필수입력항목으로 만든다.
      dewself.fp_gempNo_tb.required(true);        // 통합사원번호
      dewself.fp_korNm_tb.required(true);         // 성명
      dewself.fp_resNo_mtb.required(true);        // 주민등록번호
      dewself.fp_bizareaCd_cp.required(true);     // 사업장
      dewself.fp_deptCd_cp.required(true);        // 부서
      dewself.fp_groupecnyDt_dp.required(true);   // 그룹입사일
      dewself.fp_jncoDt_dp.required(true);        // 입사일
      dewself.fp_retireStdr_dp.required(true);    // 퇴직기준일
      dewself.fp_hlofFgCd_ddl.required(true);     // 재직구분
      dewself.fp_empTp_ddl.required(true);        // 사원구분
      if (CONFIG.NUMBERING.config.type === 'MANUAL' || ruleIsExtValId) { // MANUAL(사번부여규칙 2:수동부여)
        dewself['fp_empNo_tb'].required(true);
      }
    }

    // 호봉 코드피커 이벤트 추가
    function setSalclassClickEvent() {
      let componentSelector;
      if(dews.ui.page.mainEnv.drsCode == '20171' || dews.ui.page.mainEnv.drsCode == '20172') {
        componentSelector = dewself.$fp_slstCd_cp2.siblings('.dews-codepicker-button').find('.dews-icon.icon-search');
      }else {
        componentSelector = dewself.$fp_slstCd_cp.siblings('.dews-codepicker-button').find('.dews-icon.icon-search');
      }

      componentSelector.off('click');
      componentSelector.on('click', function (e) {
        if (CONFIG.SALCLASS.use === true) {
          let standardId = dewself.$content.find('[data-custom-bind-column="'+ CONFIG.SALCLASS.type +'"]').attr('id');
          let pstnValue = dewself.fp_pstnCd_ddl.value() || 'NO_DATA';
          let standardValue = dewself[standardId].value() || 'NO_DATA';
          let standardLabel = dewself.$content.find('[data-custom-bind-column="'+ CONFIG.SALCLASS.type +'"]').parent().parent().siblings('label').text();
          let errMsg;
          errMsg = dews.localize.get('직급 또는 ', 'D0096225', '', 'PAMPHM00100') + standardLabel + dews.localize.get(' 값이 없습니다.', 'M0013413', '', 'PAMPHM00100');

          if (pstnValue === 'NO_DATA' || standardValue === 'NO_DATA') {
            dews.alert(errMsg, 'warning');
            e.stopImmediatePropagation(); // 이벤트 전파 막음 return false
          }
        }
      });
    }

    function clearEmpData(uid, e) {
      let componentId = e.$source.context.id;
      let component = dewself[componentId];
      clearComponentInputData(component);
      clearTotalDataColumn(uid, component);
      clearCardListPanel(uid, component);
    }
    function clearComponentInputData(component) {
      let componentType = component.element.context.dataset.customComponentType;
      let componentSetter = component.element.context.dataset.customSetterType;
      component[componentSetter]('');
    }

    function clearTotalDataColumn(uid, component) {
      let bindTable = component.element.context.dataset.customBindTable;
      let bindColumn = component.element.context.dataset.customBindColumn;
      totalData[uid][bindTable][bindColumn] = '';
    }

    function clearCardListPanel(uid, component) {
      let bindColumn = component.element.context.dataset.customBindColumn;

      switch (bindColumn) {
        case 'EMP_NO':
        case 'DEPT_NM':
        case 'KOR_NM':
          let panelTextId = dewself.$content.find('#EmpCardList tr[data-uid="' + uid + '"] div[custom-bind-data-column="' + bindColumn + '"] p');
          panelTextId.text('');
          break;
      }
    }

    function openRequiredCheckDialog() {
      let dialog;
      let initData;
      let invalidEmpList = [];
      $.each(totalData, function(key, value) {
        if (value.validation === false) {
          invalidEmpList.push({
            'BIZAREA_NM' : value.HR_EMP_MST.BIZAREA_NM,
            'DEPT_NM' : value.HR_EMP_MST.DEPT_NM,
            'EMP_NO' : value.HR_EMP_MST.EMP_NO,
            'GEMP_NO' : value.HR_EMP_MST.GEMP_NO,
            'KOR_NM' : value.HR_EMP_MST.KOR_NM
          });
        }
      });
      initData = {
        use: CONFIG.CONTROL.use,
        invalidEmpList: invalidEmpList,
        defaultRequiredItemList: defaultRequiredItemList,
        configRequiredItemList: configRequiredItemList
      };

      dialog = dews.ui.dialog('PAMPHM00100_requiredCheck_POP', {
        url: '/view/HR/PAMPHM00100_requiredCheck_POP',
        title: dews.localize.get('필수항목누락체크', 'D0080910', '', 'PAMPHM00100'),
        width: 600,
        height: 600,
        initData: initData,
        ok: function (data) {
        },
      });
      dialog.open();
    }

    // 좌측 카드리스트 -> 정렬순서 drsCode추가로 인해 함수화.
    function drsSortCardList(drs){
      var data;
      if(drs === "10057") {
        data = [
            { field: 'KOR_NM', title: dews.localize.get('성명 정렬', 'D0014194', '', 'PAMPHM00100') },
            { field: 'EMP_NO', title: dews.localize.get('사번 정렬', 'D0015490', '', 'PAMPHM00100') },
            { field: 'POSI_CD', title: dews.localize.get('직위 정렬', 'D0015491', '', 'PAMPHM00100') },
            { field: 'DEPT_CD', title: dews.localize.get('부서 정렬', 'D0014195', '', 'PAMPHM00100') }
        ];
      }if(drs === "20053") {
        data = [
            { field: 'POSI_CD', title: dews.localize.get('직위 정렬', 'D0015491', '', 'PAMPHM00100') },
            { field: 'EMP_NO', title: dews.localize.get('사번 정렬', 'D0015490', '', 'PAMPHM00100') },
            { field: 'KOR_NM', title: dews.localize.get('성명 정렬', 'D0014194', '', 'PAMPHM00100') },
            { field: 'DEPT_CD', title: dews.localize.get('부서 정렬', 'D0014195', '', 'PAMPHM00100') }
        ];
      }else {
        data = [
            { field: 'EMP_NO', title: dews.localize.get('사번 정렬', 'D0015490', '', 'PAMPHM00100') },
            { field: 'KOR_NM', title: dews.localize.get('성명 정렬', 'D0014194', '', 'PAMPHM00100') },
            { field: 'POSI_CD', title: dews.localize.get('직위 정렬', 'D0015491', '', 'PAMPHM00100') },
            { field: 'DEPT_CD', title: dews.localize.get('부서 정렬', 'D0014195', '', 'PAMPHM00100') },
            { field: 'JNCO_DT', title: dews.localize.get('입사일 정렬', 'D0113728', '', 'PAMPHM00100') },
            { field: 'PSTN_CD', title: dews.localize.get('직급 정렬', 'D0017146', '', 'PAMPHM00100') }
        ];
      }
      return data;
    }

    function getRequiredItemList() {
      let result = {
        config: [],
        default: []
      };
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementHBCService', 'pamhbc00300_controlItem_list'), {
        async: false,
        data: {
          keyword: ''
        }
      }).done(function (data) {
        $.each(data, function(i, o) {
          switch (o.SETUP_DATA1_DC) {
            case 'EMP_NO':
            case 'GEMP_NO':
            case 'RES_NO':
            case 'KOR_NM':
            case 'BIZAREA_CD':
            case 'DEPT_CD':
            case 'GROUPECNY_DT':
            case 'JNCO_DT':
            case 'RETIRESTDR_DT':
            case 'HLOF_FG_CD':
            case 'EMP_TP':
              result.default.push(o.SETUP_DATA1_NM);
              break;
          }
          if (o.SETUP_DATA2_DC === 'Y') {
            result.config.push(o.SETUP_DATA1_NM);
          }
        });
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });
      return result;
    }

    function checkDeadline(e, uid) {
      if (isEmpDeadline()) {
        let deadlineColumns = ['GROUPECNY_DT','JNCO_DT','RETIRESTDR_DT','APNTC_EXPY_DT','REDUCT_END_DT'];
        // 현재 수정중인 컬럼명
        let currentEditColumn = e.$source.context.dataset.customBindColumn;
        // 현재 수정한 컴포넌트가 마감여부체크하는 입력항목인지 검사
        if (deadlineColumns.includes(currentEditColumn)) {
          let empDeadlineData = getEmpDeadlineData();
          // 초기값
          let initValue = EmpCardList.getValue(EmpCardList.select(), currentEditColumn);
          // 현재 입력한 값
          let inputValue = dewself[e.$source.context.id][e.$source.context.dataset.customGetterType]();
          // 조회 초기 값이 마감여부데이터의 시작일, 종료일에 걸리는지 확인
          // 입력한 값이 마감여부데이터의 시작일, 종료일에 걸리는지 확인
          // 걸리면 마감사원 주의메시지창 출력
          if ((empDeadlineData.START_DT <= initValue && initValue <= empDeadlineData.END_DT)
              || (empDeadlineData.START_DT <= inputValue && inputValue <= empDeadlineData.END_DT)) {
            confirmDeadlineInput(e, uid);
          }
        }
      }
    }

    function getEmpDeadlineData() {
      let currentEmpBizareaCd = EmpCardList.getValue(EmpCardList.select(), 'BIZAREA_CD');
      let currentEmpEmpTp = EmpCardList.getValue(EmpCardList.select(), 'EMP_TP');
      let result = {};
      $.each(deadlineData, function(i, row) {
        if (row.BIZAREA_CD === currentEmpBizareaCd && row.EMP_TP === currentEmpEmpTp) {
          result = row;
          return false;
        }
      });

      return result;
    }

    function isEmpDeadline() {
      let currentEmpBizareaCd = EmpCardList.getValue(EmpCardList.select(), 'BIZAREA_CD');
      let currentEmpEmpTp = EmpCardList.getValue(EmpCardList.select(), 'EMP_TP');
      let result = false;
      $.each(deadlineData, function(i, row) {
        if (row.BIZAREA_CD === currentEmpBizareaCd && row.EMP_TP === currentEmpEmpTp) {
          result = true;
          return false;
        }
      });

      return result;
    }

    function confirmDeadlineInput(panelInfo, uid) {
      console.log('dead', panelInfo);
      dews.confirm(dews.localize.get('마감 대상 사원입니다.\n변경하시겠습니까?', 'M0015435', '', 'PAMPHM00100'), 'question').yes(function (e) {
      }).no(function (e) {

        let targetComp = panelInfo.$source.context.id;
        let targetInfo = panelInfo.$source.context.dataset;
        let orgData = EmpCardList.getValue(EmpCardList.select(), targetInfo.customBindColumn);
        dewself[targetComp][targetInfo.customSetterType](orgData);
        totalData[uid][targetInfo.customBindTable][targetInfo.customBindColumn] = orgData;

      });
    }

    function getPayDeadlineData() {
      let deadlineDataArr = [];
      dews.api.post(dews.url.getApiUrl('HR', 'HrCommonService', 'getListRmenu'), {
        async: false,
        data: {
          rvers_ym: dews.date.format(new Date(), 'yyyyMM'),
          menu_cd: 'PAMPHM00100',
          termfg_cd: null,
          bizarea_cd: null,
          // bizarea_cd: '1000|2000',
          // bizarea_cd: JSON.stringify(['1000', '2000']),
          empy_tp_cd: '1',
          emp_tp: null,
          ctrl_fg: null,
          basic_dt: null,
          from_dt: null,
          to_dt: null,
          close_yn: 'Y',
        }
      }).done(function (data) {
        console.log('getListRmenu:', data);
        deadlineDataArr = data;
      }).fail(function (xhr, status, error) {
        dews.ui.snackbar.warning(xhr.responseJSON.message);
        console.log(xhr, status, error);
      });

      return deadlineDataArr;
    }

   /* 퇴직자정보이관 로직 추가로 인한 퇴직정보반영여부에 따른 탭 활성화 여부 2021.01.04 */
   function retireCheckEnableTab(value) {
    let saveFlag;
    if (currentRowUid !== undefined) {
      saveFlag = totalData[currentRowUid]['saveFlag'];
    }
    let componentArray = [];
    let componentRadioAndCheckboxArray = [];
    let exceptionArray = [];

    // 수정 버튼 값에 구애받는 기본정보1, 기본정보2 는 retireCheckEnableTab 해당 함수의 파라미터가 false 일때(컨트롤들 활성화 시)는 타지않아야 함.
    // if (value) {
      // 기본정보1, 기본정보2
      {
        componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-textbox'));
        componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-numerictextbox'));
        componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-maskedtextbox'));
        componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-dropdownlist'));
        componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-codepicker'));
        componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-datepicker'));
        componentArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-zipcodepicker'));

        //componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="BasicInfo"] .dews-ui-radio'));

        // 필수값
        exceptionArray.push(dewself.$content.find('li[id*="BasicInfo"] [data-custom-readonly="true"]'));
        exceptionArray.push(dewself.$content.find('li[id*="BasicInfo"] [data-custom-config-readonly="true"]'));
      }
    // }
    // 급여기초
    {
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-textbox'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-numerictextbox'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-maskedtextbox'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-dropdownlist'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-codepicker'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-datepicker'));
      componentArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-zipcodepicker'));

      //componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-radio'));
      componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-radio-group'));
      componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="PayBaseTab"] .dews-ui-checkbox'));

      // 필수값
      exceptionArray.push(dewself.$content.find('li[id*="PayBaseTab"] [data-custom-readonly="true"]'));
      exceptionArray.push(dewself.$content.find('li[id*="PayBaseTab"] [data-custom-config-readonly="true"]'));
    }

    // 인적사항
    {
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-textbox'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-numerictextbox'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-maskedtextbox'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-dropdownlist'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-codepicker'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-datepicker'));
      componentArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-zipcodepicker'));

      //componentRadioAndCheckboxArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] .dews-ui-radio'));

      // 필수값
      exceptionArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] [data-custom-readonly="true"]'));
      exceptionArray.push(dewself.$content.find('li[id*="PersonalInfoTab"] [data-custom-config-readonly="true"]'));
    }

    $.each(componentArray, function(index, componentType) {
      $.each(componentType, function(i, o) {
        if(o.id !== '') {
          dewself[o.id].readonly(value);
        }
      });
    });

    $.each(exceptionArray, function(index, componentType) {
      $.each(componentType, function(i, o) {
        if(o.id !== '') {
          dewself[o.id].readonly(true);
        }
      });
    });

    $.each(componentRadioAndCheckboxArray, function(index, componentType) {
      $.each(componentType, function(i, o) {
        if(o.id !== '') {
          dewself[o.id].disable(value);
        }
      });
    });

    // 사원번호 readonly 추가작업
    if (CONFIG.NUMBERING.config.type === 'MANUAL' && saveFlag !== 'added') {  // MANUAL(사번부여규칙 2:수동부여)
        dewself.fp_empNo_tb.readonly(true);
      }
      if (CONFIG.NUMBERING.config.type === 'MANUAL' && saveFlag === 'added') {
        dewself.fp_empNo_tb.readonly(false);
      }
      if (CONFIG.NUMBERING.config.type !== 'MANUAL') {
        // dewself.$content.find('#fp_empNo_tb').attr('data-custom-readonly', 'true');
        if(ruleIsExtValId && saveFlag === 'added'){ // 자동채번X
          dewself.fp_empNo_tb.readonly(false);
        }else{
          dewself.fp_empNo_tb.readonly(true);
        }
      }

      // 통합사원번호 readonly 추가작업
      if (ciCtrlConfig_CI00012 === '3') {   // 통합사원번호채번규칙이 수동
        if(dewself.$content.find('#btn_edit').hasClass('on')) {
          if (saveFlag === 'added') {
            dewself.fp_gempNo_tb.readonly(false);
            dewself.btn_gempNo.enable(true);
          } else {
            dewself.fp_gempNo_tb.readonly(true);
            dewself.btn_gempNo.enable(false);
          }
        }
        else {
          dewself.fp_gempNo_tb.readonly(true);
          dewself.btn_gempNo.enable(false);
        }
      }
      else {                                 // 통합사원번호채번규칙이 자동
        if(dewself.$content.find('#btn_edit').hasClass('on')) {
          if (saveFlag === 'added') {
            dewself.fp_gempNo_tb.readonly(true);
            dewself.btn_gempNo.enable(true);
          } else {
            dewself.fp_gempNo_tb.readonly(true);
            dewself.btn_gempNo.enable(false);
          }
        }
        else {
          dewself.fp_gempNo_tb.readonly(true);
          dewself.btn_gempNo.enable(false);
        }
      }

      if(dewself.mainEnv.drsCode == '20126') { // 포스코건설
        dewself.fp_psnEmpNo_tb.readonly(true); // 인물번호
      }

/*
      if (flagYn) {
        // 탭 수정 활성화 2021.01.04
        dewself.mainTab.items[0].enable(true);
        dewself.mainTab.items[1].enable(true);
        dewself.mainTab.items[2].enable(true);
        dewself.mainTab.items[3].enable(true);
        dewself.mainTab.items[4].enable(true);
        dewself.mainTab.items[5].enable(true);
        dewself.mainTab.items[6].enable(true);

        // 수정, 파일 버튼 보이기
        dewself.$btn_edit.show();
        dewself.$btn_fileUpload.show();
      }
      else {
        // 탭 수정 비활성화 2021.01.04
        dewself.mainTab.items[0].enable(false);
        dewself.mainTab.items[1].enable(false);
        dewself.mainTab.items[2].enable(false);
        dewself.mainTab.items[3].enable(false);
        dewself.mainTab.items[4].enable(false);
        dewself.mainTab.items[5].enable(false);
        dewself.mainTab.items[6].enable(false);

        // 탭에 내용은 비활성화 시키되 각각의 탭 포커스는 살려둬서 조회는 할수 있게끔 수정. 2021.01.04
        dewself.$content.find('.dews-tab-item-title').removeClass('dews-state-disabled');

        // 수정, 파일 버튼 숨기기
        dewself.$btn_edit.hide();
        dewself.$btn_fileUpload.hide();
*/
    }

    // 우편번호피커 도로명/지번 주소
    function getZipcodeAddress(e) {

      let address = '';
      switch (e.userSelectedType) {
        case 'R':
          if (e.userLanguageType === 'E') {
            address = e.roadAddressEnglish;
          } else {
            address = e.street;
          }
          break;
        case 'J':
          if (e.userLanguageType === 'E') {
            address = e.jibunAddressEnglish;
          } else {
            address = e.jibun;
          }
          break;
        }
      return address;
    }

    // 코드데이터
    function getCodeData(module_cd, field_cd_pipe, syscode_yn, base_yn, foreign_yn, end_dt, keyword) {
      if (!objCodeDtl.hasOwnProperty(module_cd)) {
        objCodeDtl[module_cd] = {};
      }
      $.each(field_cd_pipe.split('|'), function (i, v) {
        if (v != null && v != '') {
          // objCodeDtl[cd_module][v] = [{ CD_SYSDEF: '', NM_SYSDEF: '' }];
          objCodeDtl[module_cd][v] = [];
        }
      });
      dews.api.get(dews.url.getApiUrl('CM', 'CommonCodeDtlService', 'common_codeDtl_list'), {
        async: false,
        data: {
          module_cd: module_cd,
          field_cd_pipe: field_cd_pipe,
          syscode_yn: syscode_yn,
          base_yn: base_yn,
          foreign_yn: foreign_yn,
          end_dt: end_dt,
          keyword: keyword,
        }
      }).done(function (data) {
        $.each(data, function (i, obj) {
          objCodeDtl[module_cd][obj.FIELD_CD].push(obj);
        });
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });
    }

    function getPermissionUseList() {
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00100_pop_permission_use_list'), {
        async: false,
      }).done(function (data) {
        // console.log("pamphm00100_pop_permission_use_list:", data);
        objCodeDtl.HR.P00220 = data;
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });
    }

    // 2022.04.01
    // 통합사원번호 INSERT 로직 관련추가
    // 신규사원등록일때 주민등록번호, 외국인식별번호를 입력하면 도움창이 오픈된다.
    // 해당 도움창은 "타 회사에 등록된 동일사원" 에 대하여 통합사원번호를 공유해서 현재 회사의 신규사원을 등록할때
    // "같은 통합사원번호로 등록"되게끔 하는 로직.
    // 두번째 파라미터(gubun_cd)는 [ '1' = 주민등록번호 | '2' = 외국인식별번호 ]
    function getGempNoSearch(e, gubun_fg) {
      var initData = {
          //searchText: dewself.grid.dataItem(dewself.grid.select()).KOR_NM,
          //addList: addList,
          //cdCompany: dewself.cpCdCompany.code()
          resOrFrnNoText: dewself[e.$source.context.id][e.$source.context.dataset.customGetterType]().toString(),
          gubun_fg: gubun_fg,
          selfIndex: 0,
          cdCompany: dewself.mainEnv.companyCd
        };

        // 입력된 주민등록번호, 외국인 식별번호로 매핑된 통합사원번호가 존재하는지 확인
        dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'pamphm00400_searchGempNo'), {
          async: false,
          data: {
            hlof_fg_cd: 'A',                                // 재직('A') 로 넘기면 재직구분 조회조건 반영안함 / 팝업창내 조회조건 때문에 추가
            frgnr_Cd: gubun_fg,                             // 내외국인 구분
            resOrFrn_no: dewself[e.$source.context.id][e.$source.context.dataset.customGetterType]().toString()
          }
        }).done(function (result) {
          // 없으면 없는거다
          if (result.length < 1) {
            return false;
          }
          // 두개 이상이면 도움창 띄워서 선택하게끔 한다
          else {
            var dialog = dews.ui.dialog("PAMPHM00100_searchGempNo_POP", {
            url: '/view/HR/PAMPHM00100_searchGempNo_POP',
            title:"통합사원번호연결",
            width: 746,
            height: 537,
            ok: function (data){
              if(data){
                // 자동입력일때
                if(ciCtrlConfig_CI00012 !== '3') {
                  dewself.fp_gempNo_tb.text(data.gemp_no);
                  totalData[EmpCardList.getValue(EmpCardList.select(), 'uid')]['HR_EMP_MST']['GEMP_NO'] = data.gemp_no;
                }
                // 수기입력일때
                else {
                  if(data.gemp_no == "AUTO-NUMBERING") {
                    // 팝업창 열기 이전데이터 유지
                  }
                  else {
                    dewself.fp_gempNo_tb.text(data.gemp_no);
                    totalData[dewself.EmpCardList.options.dataSource.data()[dewself.EmpCardList.select()].uid]['HR_EMP_MST']['GEMP_NO'] = data.gemp_no;
                  }
                }
              }
              else {
                // 팝업창 열기 이전데이터 유지
              }
            },
            close: function(){
            }
          });
          dialog.setInitData(initData);
          dialog.open();
          }
        }).fail(function (xhr, status, error) {
        });
    }

    function formPanelProcess(checkVal, e, uid) {
      if(uid) {
        if (checkVal.validation === false) {
          dews.ui.snackbar.warning(checkVal.message);
          clearEmpData(uid, e);
          // clearComponentInputData(e.$source.context.id);
          return false;
        }

        if(e.$source[0].id != "repAccChk1" && e.$source[0].id != "repAccChk2") {
          setComponentActivation(true);                               // 특정 항목 입력시 컴포넌트 활성/비활성 처리
        }

        setDataToTotalData(e);                                      // 입력된 데이터를 토탈데이터에 바인딩한다.
        bindDataToProfilePanel(totalData[uid]);                     // 입력된 데이터를 프로필패널 (탭 버튼 바로아래 상단영역)에 바인딩한다.
        bindDataToCardlistRow(totalData[uid], uid);                 // 입력된 데이터를 카드리스트 데이터영역에 바인딩한다.
        setAutoInputData(e, checkVal);                              // 특정 항목 입력시 자동입력되는 부분을 처리한다. (e.g. 주민등록번호 set -> 성별, 생일 자동입력처리)
        /* 특정 항목 입력시 컴포넌트 노출/숨김/비활성 처리를 한다. (e.g. 재직구분: 퇴직)
        * [FIXME]::checkChainEvent와 setComponentActivation의 존재의 이유가 비슷해서 합치는게 나아보임
        */

        if (totalData[uid]['HR_EMPINFO_DTL']['FRGNR_CD'] === '2') {  // 외국인
          dewself.fp_resNo_mtb.required(false);
          dewself.fp_frnrInsertNo_tb.required(true);
        } else {
          dewself.fp_resNo_mtb.required(true);
          dewself.fp_frnrInsertNo_tb.required(false);
        }
        checkChainEvent(e);
        // 급여마감 체크 (현재 사원의 사업장, 사원구분으로 저장된 마감여부데이터가 있는지 확인)
        checkDeadline(e, uid);
        isEmpDataValid();   // 폼패널의 필수항목들이 제대로 입력되었는지 확인한다.
      }
    }

    // 주민등록번호와 외국인식별번호 컨트롤을 내외국인 드롭다운 리스트가 바뀔때마다 display:none 으로 변경해주기 위한 function
    function changeResFrnNo(gubun_fg) {
      // 초기화
      dewself.find('#li_resNo').css('display', 'none');
      dewself.find('#li_temp').css('display', 'none');
      dewself.find('#li_frnNo').css('display', 'none');

      // 내국인
      if(gubun_fg == '1') {
        // 주민등록번호만 보여주기
        dewself.find('#li_resNo').css('display', 'inline-block');
      }
      // 외국인
      else if(gubun_fg == '2') {
        // 외국인식별번호만 보여주기
        dewself.find('#li_frnNo').css('display', 'inline-block');
      }
    }

    // 통합환경설정 가져오기 (회사아님 통합임)
    function getCiCtrlConfig(module_cd, ctrl_cd, use_yn) {
      dews.api.get(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementPHMService', 'common_ciCtrlConfig_string'), {
        async: false,
        data: {
          module_cd: module_cd,
          ctrl_cd: ctrl_cd,
          use_yn: use_yn
        }
      }).done(function (data) {
        ciCtrlConfig_CI00012 = data;
      }).fail(function (xhr, status, error) {
        dews.error(xhr.responseJSON.message);
      });
    }

    function makeReductDS() {
      var tempP01480 = objCodeDtl.HR.P01480.slice();
      var reductTpCdDS = new Array();
      var reductMgtMrtpDS = new Array();

      for(idx = 0; idx < tempP01480.length; idx++) {
        if(tempP01480[idx].SYSDEF_CD.substring(0,2) == "T1") {      // 감면율 드롭다운리스트
          reductTpCdDS.push(tempP01480[idx]);
        }else if(tempP01480[idx].SYSDEF_CD.substring(0,2) == "T3") {   // 경영성과급감면(중소) 드롭다운리스트
          reductMgtMrtpDS.push(tempP01480[idx]);
        }
      }

      objCodeDtl.HR.reductTpCdDS = reductTpCdDS;
      objCodeDtl.HR.reductMgtMrtpDS = reductMgtMrtpDS;
    }

    // 권한탭설정으로 서브탭만 설정했을 경우 서브페이지로 넘겨줘야 하기 때문에 마지막에 실행
    if (dewself.$content.find('#mainTab .dews-tab-item-title[style!="display: none;"]').length > 0) {
      dewself.$content.find('#mainTab .dews-tab-item-title[style!="display: none;"]')[0].click();
    }

  });
</script>
