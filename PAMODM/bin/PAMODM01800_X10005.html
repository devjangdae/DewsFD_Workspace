<!--##70f77497-fd62-42fe-9b0f-c6b323b7c9f4##-->
<!--##PAMODM01800_X10005##-->
<!--##1QDfntZe6KLum0dcgpCyUWlaCYxUmj/0fnvMUEh8ZimPRBOlP7QI+QYp+xXdNYrg##-->
<!--
  DEWS UI/UX IDE - Build Result - v1.5
  # PageID: PAMODM01800_X10005
  # PageTitle: 행사참가직원등록
  # Server: http://localhost:8090/
-->
<!--

-->

<div id="conditionpanel1" class="dews-ui-condition-panel">
  <ul class="required-area">
    <li>
      <label class="dews-ui-multilingual">사업장</label>
      <span>
        <select id="s_BIZAREA_CD" name="s_BIZAREA_CD" class="dews-ui-multicodepicker basic" data-dews-help-code="H_MA_BIZAREA_MST_S" data-dews-code-field="BIZAREA_CD" data-dews-text-field="BIZAREA_NM" data-dews-help-title="사업장 도움창" data-dews-help-custom="false" data-dews-help-size="medium" data-dews-ajax="true" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">부서</label>
      <span>
        <select id="s_DEPT_CD" name="s_DEPT_CD" class="dews-ui-multicodepicker" data-dews-help-code="H_MA_DEPT_MST_S" data-dews-code-field="DEPT_CD" data-dews-text-field="DEPT_NM" data-dews-help-title="부서 도움창" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">기간</label>
      <span>
        <span id="s_START_DT" class="dews-ui-periodpicker basic"></span>
      </span>
    </li>
    <li style="display: none;">
      <label class="dews-ui-multilingual">DEPT_CD</label>
      <span>
        <input id="DEPT_CD" name="DEPT_CD" type="text" class="dews-ui-textbox basic" />
      </span>
    </li>
    <li style="display: none;">
      <label class="dews-ui-multilingual">BIZAREA_CD</label>
      <span>
        <input id="BIZAREA_CD" name="BIZAREA_CD" type="text" class="dews-ui-textbox basic" />
      </span>
    </li>
  </ul>
  <ul class="optional-area">
    <li>
      <label class="dews-ui-multilingual">휴무유형</label>
      <span>
        <select id="s_DOF_TP" name="s_DOF_TP" class="dews-ui-dropdownlist basic" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-show-tooltip="true" data-dews-option-label-value="" data-dews-option-label-text="" data-dews-show-value-tooltip="true" data-dews-use-numkey="false"></select>
      </span>
    </li>
  </ul>
</div>
<div id="containerpanel1" class="dews-ui-container-panel" data-dews-fit-bottom="true">
  <div id="containerpanelitem1" class="dews-container-item" data-dews-position="normal">
    <div id="grid1" class="dews-ui-grid"></div>
  </div>
</div>

<style>
    
</style>



<script>
  dews.ready(function () {
    var self = this;
    self.version = self.version || {};
    self.version.view='1.0';


    /*b0c72068-ba69-4099-9af5-d9863bacd226*/ //# sourceURL=PAMODM01800.js
    /* 
      * 행사참가직원등록
      * 작성자 : 서장대
      * 작성일 : 2023-09-13
      */
    // 메인버튼 삭제 버튼의 기본 확인 메시지 사용 여부 설정 
    self.mainButtons.delete.useDefaultConfirm = false;
    
    var self = this;
    self.version.view = '1.0.23091501';
    self.version.service = 'HRPamodm01800_X10005Service';
    
    
    
    
    
    self.ds1 = dews.ui.dataSource('ds1', {
      grid: true,
      transport: {
        read: {
          type: 'post',
          url: dews.url.getApiUrl('HR', 'HRPamodm01800_X10005Service', 'list_HR_STRK_INFO_X10005MST'),
          data: function () {
            return {
              dof_tp: self.s_DOF_TP.value(),
              start_dt: self.s_START_DT.getStartDate(),
              end_dt: self.s_START_DT.getEndDate(),
              dept_cd: self.s_DEPT_CD.codes().join('|'),
              bizarea_cd: self.s_BIZAREA_CD.codes().join('|')
            };
          }
        }
      },
      schema: {
        model: {
          fields: [
            { field: 'COMPANY_CD', editable: false, dataType: 'string' }, 
            { field: 'EMP_NO', editable: false, dataType: 'string' }, 
            { field: 'ORG', editable: false, dataType: 'string' }, 
            { field: 'KOR_NM', editable: false, dataType: 'string' }, 
            { field: 'DEPT_CD', editable: false, dataType: 'string' }, 
            { field: 'OGRP_CD', editable: false, dataType: 'string' }, 
            { field: 'PSTN_CD', editable: false, dataType: 'string' }, 
            { field: 'JNCO_DT', editable: false, dataType: 'string' }, 
            { field: 'PRMT_DT', editable: false, dataType: 'string' }, 
            { field: 'RETM_DT', editable: false, dataType: 'string' }, 
            { field: 'START_DT', editable: false, dataType: 'string' }, 
            { field: 'ORIG_START_DT', editable: false, dataType: 'string' }, 
            { field: 'END_DT', editable: false, dataType: 'string' }, 
            { field: 'ORIG_END_DT', editable: false, dataType: 'string' }, 
            { field: 'TM_CD_NM', editable: false, dataType: 'string' }, 
            { field: 'DOF_TP', editable: false, dataType: 'string' }, 
            { field: 'START_TM', editable: false, dataType: 'string' }, 
            { field: 'END_TM', editable: false, dataType: 'string' }, 
            { field: 'DOF_TM_CNT', editable: false, dataType: 'number' }, 
            { field: 'LVE_TM_CNT', editable: false, dataType: 'number' }, 
            { field: 'INSERT_ID', editable: false, dataType: 'string' }, 
            { field: 'INSERT_IP', editable: false, dataType: 'string' }, 
            { field: 'INSERT_DTS', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_ID', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_DTS', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_IP', editable: false, dataType: 'string' }, 
            { field: 'INSERT_MCADDR_NM', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_MCADDR_NM', editable: false, dataType: 'string' }
          ]
    
        }
      }
    });
    dews.api.get(dews.url.getApiUrl('CM', 'CommonCodeDtlService', 'common_codeDtl_list'),{
      async: false,
      data: {
          end_dt: '',
          foreign_yn: '',
          field_cd_pipe: 'ZC01_10005',
          module_cd: 'HR',
          syscode_yn: '',
          keyword: '',
          base_yn: ''
      }
    }).done(function (data) {
      var ar_ZC01_10005 = new Array();
    
      for (var i = 0; i < data.length; i++) {
        if (data[i].FIELD_CD == "ZC01_10005") { 
          ar_ZC01_10005.push(data[i]); 
    
        }
      }
      self.pipeData_ZC01_10005 = dews.ui.dataSource('pipeData_ZC01_10005',  { data: ar_ZC01_10005 });
      self.pipeData = dews.ui.dataSource('pipeData', { data: data });
      
    });
    dews.api.get(dews.url.getApiUrl('CM', 'CommonCodeDtlService', 'common_codeDtl_list'),{
      async: false,
      data: {
          dept_cd: '',
          base_dt: '',
          end_dt: '',
          crud_fg: '',
          menu_cd: '',
          foreign_yn: '',
          up_sysdef_cd: '',
          field_cd_pipe: 'P00660|P00650',
          module_cd: 'HR',
          company_cd: '',
          syscode_yn: '',
          keyword: '',
          base_yn: ''
      }
    }).done(function (data) {
      var ar_P00660 = new Array();
      var ar_P00650 = new Array();
    
      for (var i = 0; i < data.length; i++) {
        if (data[i].FIELD_CD == "P00660") { 
          ar_P00660.push(data[i]); 
    
        }
        else if (data[i].FIELD_CD == "P00650") { 
          ar_P00650.push(data[i]); 
    
        }
      }
      self.pipeDataSource1_P00660 = dews.ui.dataSource('pipeDataSource1_P00660',  { data: ar_P00660 });
      self.pipeDataSource1_P00650 = dews.ui.dataSource('pipeDataSource1_P00650',  { data: ar_P00650 });
      self.pipeDataSource1 = dews.ui.dataSource('pipeDataSource1', { data: data });
      
    });
    
    
    dews.ui.mainbuttons.localize.disable(true);
    dews.ui.mainbuttons.approval.hide();
    dews.ui.mainbuttons.etnapproval.hide();
    dews.ui.mainbuttons.add.click(/*d1cbdcb0-8f4b-4a3e-9937-683f712ca116*/ function () {
        var dialog;
        dialog = dews.ui.dialog('PAMODM01800_X10005_EMP_POP', {
            url: '/view/HR/PAMODM01800_X10005_EMP_POP',
            title: '커커커1 도움창',
            width: 800,
            height: 400,
            //initData: initData,
            ok: function (data) {
                console.log(data);
    
                for (i = 0; i < data.length; i++) {
                    self.grid1.addRow();
                    self.grid1.setCellValue(self.grid1.select(), 'EMP_NO', data[i].EMP_NO);
                    self.grid1.setCellValue(self.grid1.select(), 'KOR_NM', data[i].KOR_NM);
                    self.grid1.setCellValue(self.grid1.select(), 'JNCO_DT', data[i].JNCO_DT);
    
                    //추가 행 데이터 setCellValue
                    get_org(data[i].COMPANY_CD, data[i].DEPT_CD);
                    get_ogrp_cd_pstn_cd(data[i].COMPANY_CD, data[i].OGRP_CD, data[i].PSTN_CD);
                    get_prmt_dt_retm_dt(data[i].COMPANY_CD, data[i].EMP_NO);
                }
    
            }
        });
        dialog.open();
    });
    dews.ui.mainbuttons.search.click(/*3516b08b-047a-4054-b023-cb9f10a0b781*/ function () {
        // conditionPanel의 조회조건의 필수값 검사가 필요한경우
        if (!self.conditionpanel1.validate()) {
            return;
        }
    
        if (self.ds1.getDirtyDataCount() != 0) {
            dews.confirm('저장하지 않은 데이터가 있습니다. \n조회를 계속하시겠습니까?', 'ico2').yes(function () {
                self.ds1.read();
            }).no(function () {
                dews.ui.snackbar.warning('취소되었습니다.');
                return false;
            });
        } else {
            try {
                dews.ui.loading.show({ // 로딩화면 보여주기
                    text: '조회중입니다.'
                });
                self.ds1.read();  // 데이터소스 Read
                dews.ui.loading.hide();
            } catch (error) {
                dews.ui.loading.hide();
            }
        }
    });
    dews.ui.mainbuttons.delete.click(/*0776659b-4e6d-4205-ae3d-e32d41f0c831*/ function () {
        // TODO: 삭제시 강제 팝업에 대한 알림창을 끕니다.
        // self.mainButtons.delete.useDefaultConfirm = false; (preReady 단에 넣어 주었음)
        try {
            // 체크된 행 인덱스를 가진 배열
            var checkArray = self.grid1.getCheckedIndex();
    
            if (checkArray.length == 0) { // 체크된 행이 없다면
                dews.ui.snackbar.warning("체크된 행이 없습니다."); // 스낵바 경고 띄우기
                return;
            }
            //삭제에 대한 confirm icon : ico2
            dews.confirm("삭제하시겠습니까?", "ico2")
                .yes(function () {
                    // 단일행
                    // self.grid1.removeRow(self.grid1.select());
                    // 체크
                    self.grid1.removeRow(checkArray); // 체크된 행 모두 삭제하기
                    dews.ui.snackbar.info("저장을 눌러 삭제를 완료하세요.")
                });
        } catch (error) {
            console.error(error);
            dews.error(error);
        }
    });
    dews.ui.mainbuttons.print.hide();
    dews.ui.mainbuttons.save.click(/*78e0612d-4142-4edb-9167-158e5496e7a0*/ function () {
        // // TODO: 데이터소스를 저장합니다.
        if (self.ds1.getDirtyDataCount() == 0) {
            dews.alert('변경된 데이터가 없습니다.');
            return false;
        }
    
        if (self.grid1.validate({ showTooltip: true }).result == false) {
            dews.ui.snackbar.warning('필수 값이 입력되지 않은 항목이 있습니다.');
            return false;
        }
    
        try {
            // TO-BE // 아무 문제 없다면 저장 재확인하기 -> yes 누르면 창 닫고 saveData
            dews.confirm("데이터를 저장 하시겠습니까?", "ico2").yes(function (confirm) {
                confirm.on("closed", function () {
                    // // 서비스 파라미터명과 데이터소스명이 다른경우
                    // @dzParam (key를 serviceParameter라고 부름) //dews.api.post 하면 Promise 객체 반환
    
                    dews.api.post(dews.url.getApiUrl('HR', 'HRPamodm01800_X10005Service', 'save_HR_STRK_INFO_X10005MST'), { // dews.url.getApiUrl
                        async: false,
                        data: {
                            //ServiceParameterName : ServiceParameterValue
                            dataSourceMst: JSON.stringify(self.ds1.getDirtyData()) //서비스 파라미터 명
                        }
                    }).done(function (data) {
                        dews.ui.snackbar.ok('자료가 정상적으로 저장되었습니다.');
                        self.ds1.read(); // 재조회
                    }).fail(function (xhr, status, error) {
                        //dews.error('저장이 실패하였습니다.', 'ico1');
                        dews.ui.snackbar.error(error);
                        console.error(error.responseJSON.message);
                    });
                });
            });
    
        } catch (error) {
            console.error(error);
            dews.error(error);
        }
    });
    self.s_BIZAREA_CD.setHelpParams(function () {
      return {
        auth_bizarea: self.BIZAREA_CD.text()
      };
    });
    self.s_DEPT_CD.setHelpParams(function () {
      return {
        auth_dept: self.DEPT_CD.text()
      };
    });
    self.$DEPT_CD.on('change', /*f2ee12d9-e6dd-4f6b-a7ec-5977f09c6f99*/ function (e) {
        self.DEPT_CD.text(self.user.deptCode);
    });
    self.$BIZAREA_CD.on('change', /*000219a0-bfbe-415c-96da-291df397b5b0*/ function (e) {
        self.BIZAREA_CD.text(self.user.bizAreaCode);
    });
    self.s_DOF_TP.setDataSource(self.pipeData_ZC01_10005);
    dews.ui.grid(self.$grid1, {
      dataSource: self.ds1,
      editable: true,
      selectable: true,
      sortable: false,
      noData: true,
      noDataMessage: '데이터가 없습니다',
      copyMode: 'cell',
      columns: [
        {
          field: 'COMPNAY_CD',
          title: '회사코드',
          width: 80,
          visible: false
        },
        {
          field: 'EMP_NO',
          title: '사원번호',
          width: 80,
          attributes: { class: 'readonly' }
        },
        {
          field: 'KOR_NM',
          title: '사원명',
          width: 75,
          align: 'left',
          attributes: { class: 'readonly' }
        },
        {
          field: 'ORG',
          title: '소속',
          width: 210,
          attributes: { class: 'readonly' }
        },
        {
          field: 'DEPT_CD',
          title: '부서코드',
          width: 80,
          visible: false,
          attributes: { class: 'readonly' }
        },
        {
          field: 'OGRP_CD',
          title: '직군',
          width: 60,
          attributes: { class: 'readonly' },
          editor: {
            type: 'dropDown',
            dataSource: self.pipeDataSource1,
            dataValueField: 'SYSDEF_CD',
            dataTextField: 'SYSDEF_NM',
            editable: false
          }
        },
        {
          field: 'PSTN_CD',
          title: '직급',
          width: 60,
          attributes: { class: 'readonly' },
          editor: {
            type: 'dropDown',
            dataSource: self.pipeDataSource1,
            dataValueField: 'SYSDEF_CD',
            dataTextField: 'SYSDEF_NM',
            editable: false
          }
        },
        {
          field: 'JNCO_DT',
          title: '입사일',
          width: 80,
          attributes: { class: 'readonly' },
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'PRMT_DT',
          title: '승격일',
          width: 60,
          attributes: { class: 'readonly' },
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'RETM_DT',
          title: '퇴직\n예정일',
          width: 60,
          attributes: { class: 'readonly' },
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'START_DT',
          title: '시작일',
          width: 80,
          attributes: { class: 'required' },
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'ORIG_START_DT',
          title: 'ORIG_시작일',
          width: 60,
          visible: false
        },
        {
          field: 'END_DT',
          title: '종료일',
          width: 80,
          attributes: { class: 'required' },
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'ORIG_END_DT',
          title: 'ORIG_종료일',
          width: 60,
          visible: false
        },
        {
          field: 'TM_CD_NM',
          title: '시간\n코드',
          width: 90,
          attributes: { class: 'readonly' }
        },
        {
          field: 'DOF_TP',
          title: '휴무\n유형',
          width: 60,
          editor: {
            type: 'dropDown',
            dataSource: self.pipeData,
            dataValueField: 'SYSDEF_CD',
            dataTextField: 'SYSDEF_NM'
          }
        },
        {
          field: 'START_TM',
          title: '시작\n시간',
          width: 60,
          formats: {
            type: 'time',
            format: 'HH:MM'
          },
          editor: {
            type: 'time',
            format: 'HH:mm'
          }
        },
        {
          field: 'END_TM',
          title: '종료\n시간',
          width: 60,
          formats: {
            type: 'time',
            format: 'HH:MM'
          },
          editor: {
            type: 'time',
            format: 'HH:mm'
          }
        },
        {
          field: 'DOF_TM_CNT',
          title: '휴무\n시간',
          width: 60,
          formats: {
            type: 'number',
            format: '###,###'
          },
          editor: {
            type: 'number',
            format: '###,###',
            min: 0,
            max: 99998.99,
            increaseType: 'plus',
            increaseValue: 1
          }
        },
        {
          field: 'LVE_TM_CNT',
          title: '이탈\n시간',
          width: 60,
          formats: {
            type: 'number',
            format: '###,###'
          },
          editor: {
            type: 'number',
            format: '###,###',
            min: 0,
            max: 99998.99,
            increaseType: 'plus',
            increaseValue: 1
          }
        }
      ],
      fixed: {
        colCount: 0,
        rightColCount: 0
      },
      save: /*30543e75-538d-43ed-b711-570a2e8757d6*/ function (e) {
            var thisGrid = e.grid;
    
            var startDate = e.row.data.START_DT; // 시작일
            var endDate = e.row.data.END_DT; // 종료일
            var startTime = e.row.data.START_TM; // 시작시간
            var endTime = e.row.data.END_TM; // 종료시간
    
            if (startDate != null) { // 시작일이 변경 되면
    
                thisGrid.setCellValue(e.row.index, 'START_DT', startDate, false);
    
                //추가 행 시작일 변경 시간코드 setCellValue
                //console.log(thisGrid.getCellValue(self.grid1.select(), 'START_DT'));
                var bwrk_dt = getFormatDate(thisGrid.getCellValue(self.grid1.select(), 'START_DT'));
                // data.COMPANY_CD   data.BIZAREA_CD 모름 이거 해결해야함.
                get_tm_cd_nm(e.row.data.EMP_NO, bwrk_dt);
            }
    
            if (startDate != null && endDate != null) { // 둘 다 입력 되면
                var dateDiff = ((endDate - startDate) / (60 * 60 * 24 * 1000)); // 시작일과 종료일의 일수 계산
                if (dateDiff < 0) {
                    var fieldName = e.cell.field;
                    if (fieldName == 'START_DT') {
                        dews.ui.snackbar.warning("시작일은 종료일과 같거나 이전 날짜이어야 합니다.");
                    } else if (fieldName == 'END_DT') {
                        dews.ui.snackbar.warning("종료일은 시작일과 같거나 이후 날짜이어야 합니다.");
                    }
                    thisGrid.setCellValue(e.row.index, fieldName, '', false); // 변경된 날짜 피커 초기화
                } else if (dateDiff == 0) { // 같은 날짜를 선택하면
                    if ((startTime != null && startTime != '' && startTime != undefined) && (endTime != null && endTime != '' && endTime != undefined)) { // 둘 다 입력 되면
                        var timeDiff = (endTime - startTime);
                        if (timeDiff <= 0) {
                            var fieldName = e.cell.field;
                            if (fieldName == 'START_TM') {
                                dews.ui.snackbar.warning("시작시간은 반드시 종료시간 이전으로 설정되어야 합니다.");
                                thisGrid.setCellValue(e.row.index, fieldName, '', false); // 현재 선택한 피커 초기화
                            } else if (fieldName == 'END_TM') {
                                dews.ui.snackbar.warning("종료시간은 반드시 시작시간 이후로 설정되어야 합니다.");
                                thisGrid.setCellValue(e.row.index, fieldName, '', false); // 현재 선택한 피커 초기화
                            } else {
                                dews.ui.snackbar.warning("날짜를 변경했습니다. 시작시간과 종료시간을 다시 입력하세요.");
                                thisGrid.setCellValue(e.row.index, 'START_TM', '', false); // 시간 피커 초기화
                                thisGrid.setCellValue(e.row.index, 'END_TM', '', false); // 시간 피커 초기화
                            }
                        }
                    }
                } else {
                    thisGrid.setCellValue(e.row.index, 'START_DT', startDate, false);
                    thisGrid.setCellValue(e.row.index, 'END_DT', endDate, false);
                }
            }
        }
    
    });
    
    
    
    
    /*07b6a485-770a-4d2f-9798-f0234f07f1fb*/ self.DEPT_CD.text(self.user.deptCode);
    self.BIZAREA_CD.text(self.user.bizAreaCode);
    
    function getFormatDate(date) {
        var year = date.getFullYear();              //yyyy
        //console.log("year: " + year);
    
        var month = (1 + date.getMonth());          //M
        //console.log("month: " + month);
        month = month >= 10 ? month : '0' + month;  //month 두자리로 저장
        //console.log("CC month: " + month);
    
        var day = date.getDate();                   //d
        //console.log("day" + day);
        day = day >= 10 ? day : '0' + day;          //day 두자리로 저장
        //console.log("CCday: " + day);
    
        //console.log("return: " + year + '' + month + '' + day);
    
        return year + '' + month + '' + day;
    }
    
    function get_org(company_cd, dept_cd) {
        dews.api.get(dews.url.getApiUrl("HR", "HRPamodm01800_X10005Service", "get_org"), {
            async: false,
            data: {
                company_cd: company_cd,
                dept_cd: dept_cd
            }
        }).done(function (data) {
            self.grid1.setCellValue(self.grid1.select(), 'ORG', data);
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
    }
    
    function get_ogrp_cd_pstn_cd(company_cd, ogrp_cd, pstn_cd) {
        dews.api.get(dews.url.getApiUrl("HR", "HRPamodm01800_X10005Service", "get_ogrp_cd_pstn_cd"), {
            async: false,
            data: {
                company_cd: company_cd,
                ogrp_cd: ogrp_cd,
                pstn_cd: pstn_cd
            }
        }).done(function (data) {
            self.grid1.setCellValue(self.grid1.select(), 'OGRP_CD', data[0].SYSDEF_NM);
            self.grid1.setCellValue(self.grid1.select(), 'PSTN_CD', data[1].SYSDEF_NM);
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
    }
    
    function get_prmt_dt_retm_dt(company_cd, emp_no) {
        dews.api.get(dews.url.getApiUrl("HR", "HRPamodm01800_X10005Service", "get_prmt_dt_retm_dt"), {
            async: false,
            data: {
                company_cd: company_cd,
                emp_no: emp_no
            }
        }).done(function (data) {
            self.grid1.setCellValue(self.grid1.select(), 'PRMT_DT', data[0].DATE_VALUE);
            self.grid1.setCellValue(self.grid1.select(), 'RETM_DT', data[1].DATE_VALUE);
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
    }
    
    function get_tm_cd_nm(emp_no, bwrk_dt) {
        dews.api.get(dews.url.getApiUrl("HR", "HRPamodm01800_X10005Service", "get_tm_cd_nm"), {
            async: false,
            data: {
                emp_no: emp_no,
                bwrk_dt: bwrk_dt
            }
        }).done(function (data) {
            self.grid1.setCellValue(self.grid1.select(), 'TM_CD_NM', data);
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
    }
    
    
    
    

  
  });

</script>