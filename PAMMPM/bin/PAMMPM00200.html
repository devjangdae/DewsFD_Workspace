<!--##a8a8c51d-88c6-406d-ac73-9eb5a58638f8##-->
<!--##PAMMPM00200##-->
<!--##Ct7XK9PlZYw3OszYgURV5P6trcTH1Mge3cZDTACUCdo=##-->
<!--
  DEWS UI/UX IDE - Build Result - v1.5
  # PageID: PAMMPM00200
  # PageTitle: 출산휴가확인서등록
  # Server: http://localhost:8090/
-->
<!--

-->

<div id="conditionPanel" class="dews-ui-condition-panel">
  <ul class="required-area">
    <li>
      <label class="dews-ui-multilingual">등록일</label>
      <span>
        <span id="s_WRT_DT" class="dews-ui-periodpicker required"></span>
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">신청종류</label>
      <span>
        <select id="s_IDNFR_FG" name="s_IDNFR_FG" class="dews-ui-dropdownlist basic" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-show-tooltip="true" data-dews-option-label-value="" data-dews-option-label-text="" data-dews-show-value-tooltip="true" data-dews-use-numkey="false"></select>
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">검색어</label>
      <span>
        <input id="textbox1" name="textbox1" type="text" class="dews-ui-textbox basic" />
      </span>
    </li>
  </ul>
</div>
<div class="dews-button-group" style="text-align: right;">
  <button class="dews-ui-button">신청서조회</button>
  <button id="finish" class="dews-ui-button">마감</button>
  <button class="dews-ui-button">마감취소</button>
</div>
<div class="dews-ui-container-panel">
  <div class="dews-container-item" data-dews-position="left" data-dews-width="495px">
    <div id="mtnityidnfMaster_grid" class="dews-ui-grid"></div>
  </div>
  <div class="dews-container-item" data-dews-position="normal">
    <div id="topReqPanel" class="dews-ui-form-panel">
      <ul>
        <li>
          <label>신청번호</label>
          <span>
            <input id="DOC_NO" name="DOC_NO" type="text" class="dews-ui-textbox" readonly="readonly" style="width: 132px;" />
            <button id="REQNO_B" class="dews-ui-button">?</button>
          </span>
        </li>
      </ul>
      <ul>
        <li>
          <label>등록일</label>
          <span>
            <input type="text" id="WRT_DT" name="WRT_DT" class="dews-ui-datepicker required" />
          </span>
        </li>
        <li>
          <label>신고일</label>
          <span>
            <input type="text" id="DECL_DT" name="DECL_DT" class="dews-ui-datepicker basic" />
          </span>
        </li>
      </ul>
    </div>
    <div id="xxx" class="dews-ui-arcodien" data-dews-arcodien-height="0" data-dews-item-height="0">
      <ul>
        <li class="dews-arcodien-item" data-dews-item-title="사업장정보" data-dews-item-height="0" data-dews-item-open="true">
          <div id="bizareaInfoPanel" class="dews-ui-form-panel">
            <ul>
              <li>
                <label>사업장관리번호</label>
                <span>
                  <input id="BIZAREA_MNG_NO" name="BIZAREA_MNG_NO" type="text" class="dews-ui-textbox basic" />
                </span>
              </li>
              <li>
                <label>사업장</label>
                <span>
                  <input type="text" id="BIZAREA_CD" name="BIZAREA_CD" class="dews-ui-codepicker basic" data-dews-help-code="H_MA_BIZAREA_MST_S" data-dews-code-field="BIZAREA_CD" data-dews-text-field="BIZAREA_NM" data-dews-help-title="사업장 도움창" data-dews-help-custom="false" data-dews-help-size="medium" data-dews-use-keyword="false" />
                </span>
              </li>
            </ul>
            <ul>
              <li class="col-2">
                <label>사업장소재지</label>
                <span>
                  <input id="POST_NO" class="dews-ui-zipcodepicker basic" />
                  <input id="BASE_ADDR" name="BASE_ADDR" type="text" class="dews-ui-textbox" style="width: 419px;" />
                </span>
              </li>
            </ul>
            <ul>
              <li class="col-2">
                <label>상세주소</label>
                <span>
                  <input id="DTL_ADDR" name="DTL_ADDR" type="text" class="dews-ui-textbox basic" />
                </span>
              </li>
            </ul>
            <ul>
              <li>
                <label>우선지원대상기업</label>
                <span>
                  <select id="PSPTCOM_YN" class="dews-ui-radio-group">
                    <option class="dews-ui-multilingual" value="1">해당</option>
                    <option class="dews-ui-multilingual" value="2">비해당</option>
                  </select>
                </span>
              </li>
              <li>
                <label>담당자</label>
                <span>
                  <input type="text" id="RSPT_EMP_NO" name="RSPT_EMP_NO" class="dews-ui-codepicker basic" data-dews-help-code="H_HR_EMP_MST_S" data-dews-code-field="EMP_NO" data-dews-text-field="KOR_NM" data-dews-help-title="사원 도움창" data-dews-help-custom="false" data-dews-help-size="big" data-dews-ajax="true" />
                </span>
              </li>
            </ul>
            <ul>
              <li>
                <label>전화번호</label>
                <span>
                  <input id="RSPT_TEL_NO" name="RSPT_TEL_NO" type="text" class="dews-ui-textbox basic" />
                </span>
              </li>
              <li>
                <label>이메일</label>
                <span>
                  <input id="RSPT_EMAIL_NM" name="RSPT_EMAIL_NM" type="text" class="dews-ui-textbox basic" />
                </span>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
    <div id="xxxx" class="dews-ui-arcodien" data-dews-arcodien-height="0" data-dews-item-height="0">
      <ul>
        <li class="dews-arcodien-item" data-dews-item-title="대상자정보" data-dews-item-height="0" data-dews-item-open="true">
          <div id="trgtpInfoPanel" class="dews-ui-form-panel">
            <ul>
              <li class="col-2">
                <label>신청종류</label>
                <span>
                  <select id="REQ_KND_FG" class="dews-ui-radio-group">
                    <option class="dews-ui-multilingual" value="1">출산전후휴가</option>
                    <option class="dews-ui-multilingual" value="3">유산,사산휴가</option>
                  </select>
                </span>
              </li>
            </ul>
            <ul>
              <li>
                <label>사원</label>
                <span>
                  <input type="text" id="KOR_NM" name="KOR_NM" class="dews-ui-codepicker basic" readonly="readonly" data-dews-help-code="H_HR_EMP_MST_S" data-dews-code-field="EMP_NO" data-dews-text-field="KOR_NM" data-dews-help-title="사원 도움창" data-dews-help-custom="false" data-dews-help-size="medium" data-dews-ajax="true" />
                </span>
              </li>
              <li>
                <label>주민등록번호</label>
                <span>
                  <input id="RES_NO" name="RES_NO" type="text" class="dews-ui-textbox basic" readonly="readonly" data-dews-use-secure-mask="true" data-dews-secure-mask="B,0,5" />
                </span>
              </li>
            </ul>
            <ul>
              <li>
                <label>출산(예정)일</label>
                <span>
                  <input type="text" id="CHLDBRTH_DT" name="CHLDBRTH_DT" class="dews-ui-datepicker basic" />
                </span>
              </li>
              <li>
                <label>분할사용여부</label>
                <span>
                  <select id="DIVD_YN" class="dews-ui-radio-group">
                    <option class="dews-ui-multilingual" value="Y">예</option>
                    <option class="dews-ui-multilingual" value="N">아니오</option>
                  </select>
                </span>
              </li>
            </ul>
            <ul>
              <li>
                <label>임신기간(유산,사산)</label>
                <span>
                  <select id="TERM_CD" name="TERM_CD" class="dews-ui-dropdownlist basic" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-show-tooltip="true" data-dews-show-value-tooltip="true" data-dews-use-numkey="false"></select>
                </span>
              </li>
              <li>
                <label>다태아여부</label>
                <span>
                  <select id="MLTPPRGN_YN" class="dews-ui-radio-group">
                    <option class="dews-ui-multilingual" value="Y">예</option>
                    <option class="dews-ui-multilingual" value="N">아니오</option>
                  </select>
                </span>
              </li>
            </ul>
            <ul>
              <li>
                <label>통상임금산정기준</label>
                <span>
                  <select id="USL_WAGE_CD" name="USL_WAGE_CD" class="dews-ui-dropdownlist basic" data-dews-value-field="SYSDEF_CD" data-dews-text-field="SYSDEF_NM" data-dews-show-tooltip="true" style="width: 71px;" data-dews-show-value-tooltip="true" data-dews-use-numkey="false"></select>
                </span>
              </li>
              <li>
                <label>통상임금</label>
                <span>
                  <input id="USL_WAGE_AMT" name="USL_WAGE_AMT" type="text" class="dews-ui-numerictextbox basic" data-dews-increase-type="multiple" data-dews-increase-value="1000" data-dews-round="round" />
                </span>
              </li>
            </ul>
            <ul>
              <li>
                <label>월소정근로시간</label>
                <span>
                  <input id="MM_FIXED_LABORTM_DY" name="MM_FIXED_LABORTM_DY" type="text" class="dews-ui-numerictextbox basic" data-dews-increase-type="multiple" data-dews-increase-value="1000" data-dews-round="round" />
                </span>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
    <div class="dews-ui-arcodien" data-dews-arcodien-height="0" data-dews-item-height="0">
      <ul>
        <li class="dews-arcodien-item" data-dews-item-title="대상기간급여내역" data-dews-item-height="0" data-dews-item-open="true">
          <div class="dews-button-group" style="text-align: right;">
            <button id="dtl_grid_add" class="dews-ui-button small">추가</button>
            <button id="dtl_grid_delete" class="dews-ui-button small">삭제</button>
          </div>
          <div id="MtnityidnfDtl_grid" class="dews-ui-grid"></div>
        </li>
      </ul>
    </div>
  </div>
</div>

<style>
    
</style>



<script>
  dews.ready(function () {
    var self = this;
    self.version = self.version || {};
    self.version.view='1.0';


    /*686d6dfe-5aef-496d-847d-f8b9362d31da*/ //# sourceURL=PAMMPM00200.js
    
    /* 
      * 출산휴가확인서등록
      * 작성자 : 서장대
      * 작성일 : 2023-08-25
      */
    //self.cdp1~~~
    
    
    // 메인버튼 삭제 버튼의 기본 확인 메시지 사용 여부 설정
    self.mainButtons.delete.useDefaultConfirm = false;
    
    self.s_WRT_DT.setStartDate(getStartDate());
    self.s_WRT_DT.setEndDate(new Date());
    
    
    
    
    self.mtnityidnfMaster_ds = dews.ui.dataSource('mtnityidnfMaster_ds', {
      grid: true,
      transport: {
        read: {
          type: 'post',
          url: dews.url.getApiUrl('HR', 'PAMMPM00200_Service', 'pammpm00200_selectAllData'),
          data: function () {
            return {
              wrtDt_start: self.s_WRT_DT.getStartDate(),
              wrtDt_end: self.s_WRT_DT.getEndDate(),
              req_knd_fg: self.s_IDNFR_FG.value()
            };
          }
        }
      },
      schema: {
        model: {
          fields: [
            { field: 'COMPANY_CD', editable: false, dataType: 'string' }, 
            { field: 'WRT_DT', editable: false, dataType: 'string' }, 
            { field: 'wrtDt_start', editable: false, dataType: 'string' }, 
            { field: 'wrtDt_end', editable: false, dataType: 'string' }, 
            { field: 'CLOSE_YN', editable: false, dataType: 'string' }, 
            { field: 'REQ_KND_FG', editable: false, dataType: 'string' }, 
            { field: 'EMP_NO', editable: false, dataType: 'string' }, 
            { field: 'KOR_NM', editable: false, dataType: 'string' }, 
            { field: 'DOC_NO', editable: false, dataType: 'string' }, 
            { field: 'DECL_DT', editable: false, dataType: 'string' }, 
            { field: 'BIZAREA_MNG_NO', editable: false, dataType: 'string' }, 
            { field: 'BIZAREA_CD', editable: false, dataType: 'string' }, 
            { field: 'BIZAREA_NM', editable: false, dataType: 'string' }, 
            { field: 'POST_NO', editable: false, dataType: 'string' }, 
            { field: 'ADDR_TP', editable: false, dataType: 'string' }, 
            { field: 'BASE_ADDR', editable: false, dataType: 'string' }, 
            { field: 'DTL_ADDR', editable: false, dataType: 'string' }, 
            { field: 'PSPTCOM_YN', editable: false, dataType: 'string' }, 
            { field: 'RSPT_EMP_NM', editable: false, dataType: 'string' }, 
            { field: 'RSPT_EMP_NO', editable: false, dataType: 'string' }, 
            { field: 'RSPT_TEL_NO', editable: false, dataType: 'string' }, 
            { field: 'RSPT_EMAIL_NM', editable: false, dataType: 'string' }, 
            { field: 'RES_NO', editable: false, dataType: 'string' }, 
            { field: 'CHLDBRTH_DT', editable: false, dataType: 'string' }, 
            { field: 'DIVD_YN', editable: false, dataType: 'string' }, 
            { field: 'TERM_CD', editable: false, dataType: 'string' }, 
            { field: 'MLTPPRGN_YN', editable: false, dataType: 'string' }, 
            { field: 'USL_WAGE_CD', editable: false, dataType: 'string' }, 
            { field: 'USL_WAGE_AMT', editable: false, dataType: 'number' }, 
            { field: 'MM_FIXED_LABORTM_DY', editable: false, dataType: 'number' }, 
            { field: '_uid', editable: false, dataType: 'string' }, 
            { field: 'INSERT_ID', editable: false, dataType: 'string' }, 
            { field: 'INSERT_IP', editable: false, dataType: 'string' }, 
            { field: 'INSERT_DTS', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_ID', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_DTS', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_IP', editable: false, dataType: 'string' }, 
            { field: 'INSERT_MCADDR_NM', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_MCADDR_NM', editable: false, dataType: 'string' }, 
            { field: 'SQ_NO', editable: false, dataType: 'string' }, 
            { field: 'RVERS_YM', editable: false, dataType: 'string' }, 
            { field: 'START_DT', editable: false, dataType: 'string' }, 
            { field: 'END_DT', editable: false, dataType: 'string' }, 
            { field: 'BWRK_DY', editable: false, dataType: 'number' }, 
            { field: 'PAY_YN', editable: false, dataType: 'string' }, 
            { field: 'PAY_AMT', editable: false, dataType: 'number' }
          ]
    
        }
      }
    });
    self.MtnityidnfDtl_ds = dews.ui.dataSource('MtnityidnfDtl_ds', {
      grid: true,
      transport: {
        read: {
          type: 'post',
          url: dews.url.getApiUrl('HR', 'PAMMPM00200_Service', 'pammpm00200_selectHrMtnityidnfDtl'),
          data: /*6c745ff6-5900-49ef-8e1a-6c59017267e4*/ function () {
        var currentRow = self.mtnityidnfMaster_grid.select();
        return {
            doc_no: (typeof currentRow === 'undefined' || currentRow < 0) ? '' : self.mtnityidnfMaster_grid.getCellValue(currentRow, 'DOC_NO'),
            emp_no: (typeof currentRow === 'undefined' || currentRow < 0) ? '' : self.mtnityidnfMaster_grid.getCellValue(currentRow, 'EMP_NO')
        }
    }
        }
      },
      schema: {
        model: {
          fields: [
            { field: 'COMPANY_CD', editable: false, dataType: 'string' }, 
            { field: 'WRT_DT', editable: false, dataType: 'string' }, 
            { field: 'wrtDt_start', editable: false, dataType: 'string' }, 
            { field: 'wrtDt_end', editable: false, dataType: 'string' }, 
            { field: 'CLOSE_YN', editable: false, dataType: 'string' }, 
            { field: 'REQ_KND_FG', editable: false, dataType: 'string' }, 
            { field: 'EMP_NO', editable: false, dataType: 'string' }, 
            { field: 'KOR_NM', editable: false, dataType: 'string' }, 
            { field: 'DOC_NO', editable: false, dataType: 'string' }, 
            { field: 'DECL_DT', editable: false, dataType: 'string' }, 
            { field: 'BIZAREA_MNG_NO', editable: false, dataType: 'string' }, 
            { field: 'BIZAREA_CD', editable: false, dataType: 'string' }, 
            { field: 'BIZAREA_NM', editable: false, dataType: 'string' }, 
            { field: 'POST_NO', editable: false, dataType: 'string' }, 
            { field: 'ADDR_TP', editable: false, dataType: 'string' }, 
            { field: 'BASE_ADDR', editable: false, dataType: 'string' }, 
            { field: 'DTL_ADDR', editable: false, dataType: 'string' }, 
            { field: 'PSPTCOM_YN', editable: false, dataType: 'string' }, 
            { field: 'RSPT_EMP_NM', editable: false, dataType: 'string' }, 
            { field: 'RSPT_EMP_NO', editable: false, dataType: 'string' }, 
            { field: 'RSPT_TEL_NO', editable: false, dataType: 'string' }, 
            { field: 'RSPT_EMAIL_NM', editable: false, dataType: 'string' }, 
            { field: 'RES_NO', editable: false, dataType: 'string' }, 
            { field: 'CHLDBRTH_DT', editable: false, dataType: 'string' }, 
            { field: 'DIVD_YN', editable: false, dataType: 'string' }, 
            { field: 'TERM_CD', editable: false, dataType: 'string' }, 
            { field: 'MLTPPRGN_YN', editable: false, dataType: 'string' }, 
            { field: 'USL_WAGE_CD', editable: false, dataType: 'string' }, 
            { field: 'USL_WAGE_AMT', editable: false, dataType: 'number' }, 
            { field: 'MM_FIXED_LABORTM_DY', editable: false, dataType: 'number' }, 
            { field: '_uid', editable: false, dataType: 'string' }, 
            { field: 'INSERT_ID', editable: false, dataType: 'string' }, 
            { field: 'INSERT_IP', editable: false, dataType: 'string' }, 
            { field: 'INSERT_DTS', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_ID', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_DTS', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_IP', editable: false, dataType: 'string' }, 
            { field: 'INSERT_MCADDR_NM', editable: false, dataType: 'string' }, 
            { field: 'UPDATE_MCADDR_NM', editable: false, dataType: 'string' }, 
            { field: 'SQ_NO', editable: false, dataType: 'string' }, 
            { field: 'RVERS_YM', editable: false, dataType: 'string' }, 
            { field: 'START_DT', editable: false, dataType: 'string' }, 
            { field: 'END_DT', editable: false, dataType: 'string' }, 
            { field: 'BWRK_DY', editable: false, dataType: 'number' }, 
            { field: 'PAY_YN', editable: false, dataType: 'string' }, 
            { field: 'PAY_AMT', editable: false, dataType: 'number' }
          ]
    
        }
      }
    });
    dews.api.get(dews.url.getApiUrl('CM', 'CommonCodeDtlService', 'common_ci_codeDtl_list'),{
      async: false,
      data: {
          end_dt: '',
          foreign_yn: '',
          field_cd_pipe: 'P00520|P02010|P03500|P03510|P03520|P03280',
          module_cd: 'HR',
          syscode_yn: '',
          keyword: '',
          base_yn: ''
      }
    }).done(function (data) {
      var ar_P00520 = new Array();
      var ar_P02010 = new Array();
      var ar_P03500 = new Array();
      var ar_P03510 = new Array();
      var ar_P03520 = new Array();
      var ar_P03280 = new Array();
    
      for (var i = 0; i < data.length; i++) {
        if (data[i].FIELD_CD == "P00520") { 
          ar_P00520.push(data[i]); 
    
        }
        else if (data[i].FIELD_CD == "P02010") { 
          ar_P02010.push(data[i]); 
    
        }
        else if (data[i].FIELD_CD == "P03500") { 
          ar_P03500.push(data[i]); 
    
        }
        else if (data[i].FIELD_CD == "P03510") { 
          ar_P03510.push(data[i]); 
    
        }
        else if (data[i].FIELD_CD == "P03520") { 
          ar_P03520.push(data[i]); 
    
        }
        else if (data[i].FIELD_CD == "P03280") { 
          ar_P03280.push(data[i]); 
    
        }
      }
      self.pipeDataSource1_P00520 = dews.ui.dataSource('pipeDataSource1_P00520',  { data: ar_P00520 });
      self.pipeDataSource1_P02010 = dews.ui.dataSource('pipeDataSource1_P02010',  { data: ar_P02010 });
      self.pipeDataSource1_P03500 = dews.ui.dataSource('pipeDataSource1_P03500',  { data: ar_P03500 });
      self.pipeDataSource1_P03510 = dews.ui.dataSource('pipeDataSource1_P03510',  { data: ar_P03510 });
      self.pipeDataSource1_P03520 = dews.ui.dataSource('pipeDataSource1_P03520',  { data: ar_P03520 });
      self.pipeDataSource1_P03280 = dews.ui.dataSource('pipeDataSource1_P03280',  { data: ar_P03280 });
      self.pipeDataSource1 = dews.ui.dataSource('pipeDataSource1', { data: data });
      
    });
    dews.api.get(dews.url.getApiUrl('CM', 'CommonCodeDtlService', 'common_ci_codeDtl_list'),{
      async: false,
      data: {
          end_dt: '',
          foreign_yn: '',
          field_cd_pipe: 'S00320',
          module_cd: 'MA',
          syscode_yn: '',
          keyword: '',
          base_yn: ''
      }
    }).done(function (data) {
      var ar_S00320 = new Array();
    
      for (var i = 0; i < data.length; i++) {
        if (data[i].FIELD_CD == "S00320") { 
          ar_S00320.push(data[i]); 
    
        }
      }
      self.pipeDataSource2_S00320 = dews.ui.dataSource('pipeDataSource2_S00320',  { data: ar_S00320 });
      self.pipeDataSource2 = dews.ui.dataSource('pipeDataSource2', { data: data });
      
    });
    dews.api.get(dews.url.getApiUrl('CM', 'CommonCodeDtlService', 'common_codeDtl_list'),{
      async: false,
      data: {
          dept_cd: '',
          base_dt: '',
          end_dt: '',
          crud_fg: '',
          menu_cd: '',
          foreign_yn: '',
          up_sysdef_cd: '',
          field_cd_pipe: 'P03280',
          module_cd: 'HR',
          company_cd: '',
          syscode_yn: '',
          keyword: '',
          base_yn: ''
      }
    }).done(function (data) {
      var ar_P03280 = new Array();
    
      for (var i = 0; i < data.length; i++) {
        if (data[i].FIELD_CD == "P03280") { 
          ar_P03280.push(data[i]); 
    
        }
      }
      self.YNPIPE_P03280 = dews.ui.dataSource('YNPIPE_P03280',  { data: ar_P03280 });
      self.YNPIPE = dews.ui.dataSource('YNPIPE', { data: data });
      
    });
    
    
    dews.ui.mainbuttons.information.disable(true);
    dews.ui.mainbuttons.localize.disable(true);
    dews.ui.mainbuttons.approval.hide();
    dews.ui.mainbuttons.etnapproval.hide();
    dews.ui.mainbuttons.add.click(/*1a3067fb-7e4f-4c2c-a900-7f6dfa9d490d*/ function () {
    
        // 초기 데이터 설정
        var dialog, initData = {
            mode: 'multi',
            code: 'H_HR_EMP_MST_S11',
            params: {},
            data: null
        };
    
        // 도움창 설정
        dialog = dews.ui.dialog("H_HR_EMP_MST_S11", {
            url: '~/CODEHELP.html',
            title: dews.localize.get('사원 도움창', 'D0010047', '', 'PAMMPM00200'),
            width: 746,
            height: 540,
            buttons: 'applyAndClose',
            ok: function (data) {
    
                // 선택된 데이터를 그리드에 추가하는 로직
                var idx;
                $.each(data, function (idx, obj) {
                    var mstGrid = self.mtnityidnfMaster_grid;
                    var dupleFlag = false;
    
                    // 중복 체크: 마스터 그리드에 동일한 사원이 있는지 확인
                    $.each(mstGrid.dataItems(), function (idx2, val2) {
                        if (val2.EMP_NO == obj.EMP_NO) {
                            dews.ui.snackbar.warning(dews.localize.get('마스터 그리드에 똑같은 사원이 있습니다.', 'M0012821', '', 'PAMMPM00200'));
                            dupleFlag = true;
                            return false; // 중복 발견시 반복 종료
                        }
                    });
    
                    // 중복이 없을 경우에만 그리드에 추가
                    if (!dupleFlag) {
                        mstGrid.addRow();
                        idx = mstGrid.select();
                        setCellValuesForEmployee(mstGrid, obj, idx);
                        bindPanelsToGrid();
                        enableEdit();
                    }
                });
            }
        });
    
        // 도움창을 초기화하고 열기
        dialog.setInitData(initData);
        dialog.open();
    });
    dews.ui.mainbuttons.search.click(/*3dceaecc-319c-43e3-a6bb-327bcace4a48*/ function () {
        var mstCnt = self.mtnityidnfMaster_ds.getDirtyDataCount();
        var dtlCnt = self.MtnityidnfDtl_ds.getDirtyDataCount();
    
        //dews.ui.loading.show();
        //self.mtnityidnfMaster_ds.read();
        console.log("awdwadwadwaadwadawd@@@@@@");
        //self.mtnityidnfMaster_ds.read();
        //self.MtnityidnfDtl_ds.read();
    
        if (isThisValidCondition()) { // 필수체크
            if (mstCnt + dtlCnt >= 1) { // 수정한 데이터가 있으면
                dews.confirm(dews.localize.get('저장되지 않은 데이터가 있습니다.\n그래도 조회 하시겠습니까?', 'M0012822', '', 'PAMMPM00200'), "question").yes(function () {
                    SearchData();
                }).no(function () {
                });
            } else {
                SearchData();
            }
        }
    }
    );
    dews.ui.mainbuttons.delete.click(/*1703f0ef-4051-4ffd-962e-11990ff25225*/ function () {
        var mstGrid = self.mtnityidnfMaster_grid;
        var checkedIndices = mstGrid.getCheckedIndex();
    
        if (checkedIndices.length == 0) {
            showWarning("삭제할 사원을 체크해주세요.", "M0012824");
            return;
        }
    
        dews.confirm(dews.localize.get('삭제하시겠습니까?', 'M0000120', '', 'PAMMPM00200'), "question")
            .yes(function () {
                $.each(checkedIndices, function (idx, rowIndex) {
                    var cellValue = mstGrid.getCellValue(rowIndex, 'CLOSE_YN');
                    
                    if (cellValue == 'N') {
                        mstGrid.removeRow(rowIndex);
                    } else if (cellValue == 'Y') {
                        showWarning("마감된 자료는 삭제할 수 없습니다.", "M0012825");
                    }
                });
            })
            .no(function () {});
    
        function showWarning(message, code) {
            dews.ui.snackbar.warning(dews.localize.get(message, code, '', 'PAMMPM00200'));
        }
    });
    dews.ui.mainbuttons.save.click(/*fe04b2fe-5748-44f6-9628-3e179f56225b*/ function () {
    
        self.mtnityidnfMaster_grid.commitCell();
        self.MtnityidnfDtl_grid.commitCell();
    
        var mstCnt = self.mtnityidnfMaster_ds.getDirtyDataCount();
        var dtlCnt = self.MtnityidnfDtl_ds.getDirtyDataCount();
    
        if (mstCnt + dtlCnt <= 0) {
            dews.ui.snackbar.warning(dews.localize.get("변경된 내용이 없습니다.", "M0000053", '', 'PAMMPM00200'));
        } else {
            if (Is_validate()) {
                dews.api.batchSave(dews.url.getApiUrl('HR', 'PAMMPM00200_Service', 'pammpm00200_MasterData_save'), self.mtnityidnfMaster_ds, self.MtnityidnfDtl_ds).done(function (data) {
                    dews.ui.snackbar.ok(dews.localize.get("저장 되었습니다.", "M0002498", '', 'PAMMPM00200'));
                    SearchData(); // 재조회
                }).fail(function (message) {
                    dews.ui.snackbar.warning(dews.localize.get("저장을 실패하였습니다.", "M0001114", '', 'PAMMPM00200'));
                });
            } else {
                dews.ui.snackbar.warning(dews.localize.get("필수값을 입력해주세요.", "M0001726", '', 'PAMMPM00200'));
            }
        }
    }
    );
    self.s_IDNFR_FG.setDataSource(self.pipeDataSource1_P03500);
    self.$finish.on('click', /*57640b1f-0dc2-4e42-93bd-f427ceb07f87*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        var checkedFg = false;  // 체크 여부
    
        // grid.setCellValue(grid.select(), 'CLOSE_YN', 'Y', false);
        // if($("#DECL_DT_datepicker").val()==null) {
        //   grid.setCellValue(grid.select(), 'DECL_DT', getTodayDate(), false); // 신고일 시스템일자로 업데이트
        //   self.DECL_DT_datepicker.value(getTodayDate());
        // }
    
        $.each(grid.getCheckedIndex(), function (idx, value) {
            grid.setCellValue(value, 'CLOSE_YN', 'Y', false); // 현재 ROW의 마감여부 Y로 변경
            if (grid.getCellValue(value, "DECL_DT") === null || grid.getCellValue(value, "DECL_DT") === undefined) { // 현재 ROW의 DECL_DT(신고일)가 NULL이면
                grid.setCellValue(value, 'DECL_DT', getTodayDate(), false); // 현재 ROW의 신고일 시스템일자로 변경
            }
    
            checkedFg = true;
        })
    
    
    
        if (checkedFg == true) {
            disableEdit(); // 수정 불가능하게 설정
    
            self.mtnityidnfMaster_ds.batchSave(dews.url.getApiUrl('HR', 'PersonalAdministrationManagementMPMService', 'Pammpm00200_MasterData_finish'), {  // 선택된 row만 저장
                async: false,
                callback: function (result) {
                }
            }).done(function (data) {
                self.mtnityidnfMaster_ds.read();
                dews.ui.snackbar.ok(dews.localize.get('마감되었습니다.', 'M0005177', '', 'PAMMPM00200'));
            }).fail(function (data) {
                dews.ui.snackbar.warning(dews.localize.get("마감을 실패하였습니다.", "M0012827", '', 'PAMMPM00200'));
            })
        } else if (checkedFg == false) {
            dews.ui.snackbar.warning(dews.localize.get("마감할 사원을 체크헤주세요.", "M0012828", '', 'PAMMPM00200'));
        }
    });
    dews.ui.grid(self.$mtnityidnfMaster_grid, {
      dataSource: self.mtnityidnfMaster_ds,
      height: 889,
      selectable: true,
      sortable: false,
      copyMode: 'cell',
      columns: [
        {
          field: 'WRT_DT',
          title: '등록일',
          width: 80,
          attributes: { class: 'required' }
        },
        {
          field: 'CLOSE_YN',
          title: '마감여부',
          width: 80,
          attributes: { class: 'readonly' }
        },
        {
          field: 'REQ_KND_FG',
          title: '신청종류',
          width: 80,
          align: 'left',
          attributes: { class: 'readonly' }
        },
        {
          field: 'EMP_NO',
          title: '사원번호',
          width: 80,
          align: 'left',
          attributes: { class: 'readonly' },
          editor: {
            type: 'codepicker',
            helpCode: 'H_HR_EMP_MST_S02',
            codeField: 'EMP_NO',
            textField: 'KOR_NM',
            helpTitle: '사원도움창',
            helpSize: 'big'
          }
        },
        {
          field: 'KOR_NM',
          title: '한글명',
          width: 90,
          align: 'left',
          attributes: { class: 'readonly' }
        },
        {
          field: 'DEPT_NM',
          title: '부서명',
          width: 90,
          align: 'left',
          visible: false
        },
        {
          field: 'DOC_NO',
          title: '문서번호',
          visible: false
        }
      ],
      fixed: {
        colCount: 0,
        rightColCount: 0
      },
      change: /*1b69d239-e35d-48dc-8154-cd450b87c595*/ function (e) {
            self.mtnityidnfMaster_grid.bindPanel(self.topReqPanel);
            self.mtnityidnfMaster_grid.bindPanel(self.bizareaInfoPanel);
            self.mtnityidnfMaster_grid.bindPanel(self.trgtpInfoPanel);
        }
    ,
      dataBound: /*fe8a81f9-acaa-4741-996c-4cdbae80d367*/ function (e) {
            dews.ui.loading.hide();
            self.mtnityidnfMaster_grid.bindPanel(self.topReqPanel);
            self.mtnityidnfMaster_grid.bindPanel(self.bizareaInfoPanel);
            self.mtnityidnfMaster_grid.bindPanel(self.trgtpInfoPanel);
        }
    ,
      save: /*1b25120e-fd4d-4d5b-92a1-9db105397f42*/ function (e) {
            console.log("ㅂㅈㄷㅂㅈㄷㅈㅂㄷ");
        }
    
    });
    self.$REQNO_B.on('click', /*f1bb4539-d221-4c33-a05a-3c3980a96d87*/ function (e) {
        alert(dews.localize.get("신청서를 조회합니다.\n현재 신청서가 없는 상태로 추후 구현", "D0072084", '', 'PAMMPM00200'));
    });
    self.$BIZAREA_MNG_NO.on('change', /*80a5e535-39fd-4b43-b3d7-4be44e510524*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'BIZAREA_MNG_NO', self.BIZAREA_MNG_NO.text(), false);
    });
    self.BIZAREA_CD.on('setData', /*0220a72c-8826-4737-bfeb-c8d50b571ed2*/ function (e, pickerData) {
        var mstGrid = self.mtnityidnfMaster_grid;
        mstGrid.setCellValue(mstGrid.select(), 'BIZAREA_CD', pickerData.BIZAREA_CD, false);
    
        GetBizareaInfo(pickerData.BIZAREA_CD); // 다른 주소 정보 변경
    
        self.mtnityidnfMaster_grid.bindPanel(self.topReqPanel);
        self.mtnityidnfMaster_grid.bindPanel(self.bizareaInfoPanel);
        self.mtnityidnfMaster_grid.bindPanel(self.trgtpInfoPanel);
    });
    self.POST_NO.on('setData', /*392222fa-4e11-4858-8c7a-abb26d2e619b*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
    
        grid.setCellValue(grid.select(), 'POST_NO', e.zonecode, false);
        grid.setCellValue(grid.select(), 'ADDR_TP', e.userSelectedType, false); // 주소 타입
    
        if (e.userSelectedType == 'R') {
            $("#BASE_ADDR").val(e.roadAddress);
            grid.setCellValue(grid.select(), 'BASE_ADDR', e.roadAddress, false);
            // console.log("주소 변경시 R 선택됨");
        } else if (e.userSelectedType == 'J') {
            $("#BASE_ADDR").val(e.jibunAddress);
            grid.setCellValue(grid.select(), 'BASE_ADDR', e.jibunAddress, false);
            // console.log("주소 변경시 J 선택됨");
        }
    });
    self.$DTL_ADDR.on('change', /*7318eb01-244f-4a84-8c1c-87d24b1f2bd5*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'DTL_ADDR', self.DTL_ADDR.text(), false); // grid에 상세주소 저장
    });
    self.PSPTCOM_YN.on('change', /*0cc05dc7-8ea0-41c7-a6e3-8b6e252eb9a7*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'PSPTCOM_YN', self.PSPTCOM_YN.value(), false); // 선택된 라디오 버튼 값으로 변경
    });
    self.RSPT_EMP_NO.on('setData', /*b6d4444c-8352-41a6-a1e3-ea4e78892482*/ function (e, pickerData) {
        //console.log('e.code  : ' + e.code + '   // e.text  : ' + e.text  + '  //  pickerData : ' + pickerData);
        var mstGrid = self.mtnityidnfMaster_grid;
        // console.log("담당자 변경시 이벤트 객체e:", e);
        // console.log("담당자 변경시 이벤트 객체pickerData:", pickerData);
        mstGrid.setCellValue(mstGrid.select(), 'RSPT_EMP_NO', pickerData.EMP_NO, false); // 담당자 사원번호 변경
        mstGrid.setCellValue(mstGrid.select(), 'RSPT_EMP_NM', pickerData.KOR_NM, false); // 담당자 사원명 변경
        GetLoginMemberInfo(pickerData.EMP_NO); // 담당자 전화번호, 이메일 변경
    
        self.mtnityidnfMaster_grid.bindPanel(self.topReqPanel);
        self.mtnityidnfMaster_grid.bindPanel(self.bizareaInfoPanel);
        self.mtnityidnfMaster_grid.bindPanel(self.trgtpInfoPanel);
    });
    self.$RSPT_TEL_NO.on('change', /*0f81bd29-7edc-4f6c-a083-9d0d3a4f50a9*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'RSPT_TEL_NO', self.RSPT_TEL_NO.text(), false);
    });
    self.$RSPT_EMAIL_NM.on('change', /*6bce4692-42f7-4732-9a70-7483aa8cfcae*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'RSPT_EMAIL_NM', self.RSPT_EMAIL_NM.text(), false);
    });
    self.REQ_KND_FG.on('change', /*8459e248-1de1-498b-8d7c-2935dcc72f9f*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'REQ_KND_FG', self.REQ_KND_FG_radioBtn.value(), false);
    });
    self.CHLDBRTH_DT.on('change', /*d32ab5c0-5190-469b-9d93-71840b86a847*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'CHLDBRTH_DT', self.CHLDBRTH_DT.value(), false);
    });
    self.DIVD_YN.on('change', /*05f9eda3-3df3-4c59-953d-883514827393*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'DIVD_YN', self.DIVD_YN.value(), false);
    });
    self.TERM_CD.setDataSource(self.pipeDataSource1_P03510);
    self.TERM_CD.on('change', /*ced356d4-f3c2-421e-beb9-cd287835cc01*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'TERM_CD', self.TERM_CD.value(), false);
    });
    self.MLTPPRGN_YN.on('change', /*37350323-402c-4f4f-84bf-a12ba0594113*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'MLTPPRGN_YN', self.MLTPPRGN_YN.value(), false);
    });
    self.USL_WAGE_CD.setDataSource(self.pipeDataSource1_P03520);
    self.USL_WAGE_CD.on('change', /*5649b48e-81bc-49a4-a9e8-2cf3f9cd710f*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'USL_WAGE_CD', self.USL_WAGE_CD.value(), false);
    });
    self.$USL_WAGE_AMT.on('change', /*32fdaa12-a104-4c1a-bac6-75a2d6f34a0c*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'USL_WAGE_AMT', self.USL_WAGE_AMT.value(), false);
    });
    self.$MM_FIXED_LABORTM_DY.on('change', /*2b41a048-e8ad-4d3d-94d3-af150947c0af*/ function (e) {
        var grid = self.mtnityidnfMaster_grid;
        grid.setCellValue(grid.select(), 'MM_FIXED_LABORTM_DY', self.MM_FIXED_LABORTM_DY.text(), false);
    });
    self.$dtl_grid_add.on('click', /*83964e89-d24d-4646-823e-cb546edecfa4*/ function (e) {
        var dtl_grid = self.MtnityidnfDtl_grid;
        dtl_grid.addRow(); // 해당 grid에 row 추가하기
        dtl_grid.setCellValue(dtl_grid.select(), 'PAY_YN', 'N', false); // 추가된 row의 PAY_YN을 디폴트 N으로 설정
    
    
        // 문서번호, 사원번호는  마스터그리드에서 가져와서 저장
        var mst_grid = self.mtnityidnfMaster_grid;
        dtl_grid.setCellValue(dtl_grid.select(), 'DOC_NO', mst_grid.getCellValue(mst_grid.select(), 'DOC_NO'), false); // 마스터그리드에서 현재 row의 문서번호 가져와 저장
        dtl_grid.setCellValue(dtl_grid.select(), 'EMP_NO', mst_grid.getCellValue(mst_grid.select(), 'EMP_NO'), false); // 마스터그리드에서 현재 row의 사원번호 가져와 저장 
        // SQ_NO를 하나 증가시킨다. (현재 있는 쿼리문에서 max+1(grid의 행중에 가장 큰 SQ_NO) 써서 사용한다.)
        // 서브쿼리 사용 시 : (select max(SQ_NO) from 테이블명)
    });
    self.$dtl_grid_delete.on('click', /*c5932274-a431-441d-ac89-efca2a7d61ef*/ function (e) {
        var grid = self.MtnityidnfDtl_grid;
        grid.removeRow(grid.select());
    });
    dews.ui.grid(self.$MtnityidnfDtl_grid, {
      dataSource: self.MtnityidnfDtl_ds,
      editable: true,
      selectable: true,
      sortable: false,
      autoBind: false,
      checkable: false,
      copyMode: 'cell',
      columns: [
        {
          field: 'TERMFG_CD',
          title: '기간구분',
          width: 80,
          visible: false
        },
        {
          field: 'START_DT',
          title: '시작일',
          width: 80,
          attributes: { class: 'required' },
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'END_DT',
          title: '종료일',
          width: 80,
          attributes: { class: 'required' },
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'BWRK_DY',
          title: '일수',
          width: 80,
          attributes: { class: 'readonly' },
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'number'
          }
        },
        {
          field: 'PAY_YN',
          title: '급여지급여부',
          width: 80,
          editor: {
            type: 'dropDown',
            dataSource: self.YNPIPE_P03280,
            dataValueField: 'SYSDEF_CD',
            dataTextField: 'SYSDEF_NM'
          }
        },
        {
          field: 'USL_WAGE_AMT',
          title: '통상임금지급액',
          width: 100,
          align: 'right',
          formats: {
            type: 'number',
            format: 'MA00003',
            predefined: true
          },
          editor: {
            type: 'number'
          }
        },
        {
          field: 'SQ_NO',
          title: '순번',
          visible: false
        }
      ],
      fixed: {
        colCount: 0,
        rightColCount: 0
      },
      save: /*69d0324f-9d3b-40fa-b2c7-98860320e18b*/ function (e) {
            var thisGrid = e.grid; // 지금 이벤트 발생하는 그리드 선택
    
            // var grid=self.MtnityidnfDtl_grid;
            // var data1=grid.getCellValue(grid.select(), 'START_DT');
            // console.log('data1', data1);
    
            var startDate = e.row.data.START_DT; // 변경된 시작일
            var endDate = e.row.data.END_DT; // 변경된 종료일
    
            if (startDate != null && endDate != null) { // 둘 다 선택되면
                var diff = ((endDate - startDate) / (60 * 60 * 24 * 1000)) + 1; // 시작일과 종료일의 일수 계산
                if (diff > 0) {
                    thisGrid.setCellValue(e.row.index, 'BWRK_DY', diff, false);
                } else if (diff <= 0) {
                    dews.ui.snackbar.warning(dews.localize.get("시작일은 종료일과 같거나 이전날짜를 선택해야 합니다.", "M0012831", '', 'PAMMPM00200'));
                    // console.log('e.row.index:', e.row.index);
                    // console.log('변경된 컬럼 이름:', e.cell.field);
                    thisGrid.setCellValue(e.row.index, 'BWRK_DY', 0, false); // 일수 0으로 초기화
                    thisGrid.setCellValue(e.row.index, e.cell.field, '', false); // 변경된 날짜 피커 초기화
                }
            }
        }
    
    });
    
    
    self.mtnityidnfMaster_grid.setDetail(self.MtnityidnfDtl_grid);
    
    
    /*d2692eed-91c6-4644-b7ca-3eed2f04ec7b*/ 
    self.s_WRT_DT.setStartDate(getStartDate());
    self.s_WRT_DT.setEndDate(new Date());
    
    function isThisValidCondition() {
        return self.conditionPanel.validate({ tooltip: true, message: dews.localize.get('필수입력 항목입니다.', 'M0005595', '', 'PAMMPM00200') });
    }
    
    function SearchData() {
        dews.ui.loading.show();
        self.mtnityidnfMaster_ds.read();
    }
    
    function getStartDate() {
        var date = new Date();
        var year = date.getFullYear();              //yyyy
        var month = (1 + date.getMonth());          //M
        month = month >= 10 ? month : '0' + month;  //month 두자리로 저장
        return year + '' + month + '01';
    }
    
    function getTodayDate() {
        var date = new Date();
        var year = date.getFullYear();              //yyyy
        var month = (1 + date.getMonth());          //M
        month = month >= 10 ? month : '0' + month;  //month 두자리로 저장
        var date = date.getDate();
        date = date >= 10 ? date : '0' + date; // 날짜
        return year + '' + month + '' + date;
    }
    
    function Is_validate() { // 그리드 필수값 검사
        return self.mtnityidnfMaster_grid.validate().result && self.MtnityidnfDtl_grid.validate().result;
    }
    
    function GetBizareaInfo(bizarea_cd) {
        dews.api.get(dews.url.getApiUrl("HR", "PAMMPM00200_Service", "pammpm00200_BizareaInfo"), {
            async: false,
            data: {
                bizarea_cd: bizarea_cd
            }
        }).done(function (data) {
            var grid = self.mtnityidnfMaster_grid;
            // $("#BIZAREA_NM").val(data[0].BIZAREA_NM);
            // $("#POST_NO").val(data[0].POST_NO);
            // $("#BASE_ADDR").val(data[0].BASE_ADDR);
            // $("#DTL_ADDR").val(data[0].DTL_ADDR);
            grid.setCellValue(grid.select(), 'BIZAREA_NM', data[0].BIZAREA_NM, false); // 사업장명
            grid.setCellValue(grid.select(), 'POST_NO', data[0].POST_NO, false); // 우편번호
            grid.setCellValue(grid.select(), 'ADDR_TP', data[0].ADDR_TP, false); // 주소타입
            grid.setCellValue(grid.select(), 'BASE_ADDR', data[0].BASE_ADDR, false); // 기본주소
            grid.setCellValue(grid.select(), 'DTL_ADDR', data[0].DTL_ADDR, false); // 상세주소
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
    }
    function GetLoginMemberInfo(emp_no) {
        dews.api.get(dews.url.getApiUrl("HR", "PAMMPM00200_Service", "pammpm00200_LoginMemberInfo"), {
            async: false,
            data: {
                emp_no: emp_no
            }
        }).done(function (data) {
            var grid = self.mtnityidnfMaster_grid;
    
    
            if (data != null) {
                // $("#RSPT_TEL_NO").val(data['TEL_NO']); // 화면상 전화번호 변경
                // $("#RSPT_EMAIL_NM").val(data['EMAIL_NM']); // 화면상 이메일 변경
                grid.setCellValue(grid.select(), 'RSPT_EMP_NM', data[0]['RSPT_EMP_NM'], false); // 사원명
                grid.setCellValue(grid.select(), 'RSPT_TEL_NO', data[0]['TEL_NO'], false); // 전화번호
                grid.setCellValue(grid.select(), 'RSPT_EMAIL_NM', data[0]['EMAIL_NM'], false); // 이메일
                console.log("성공");
            } else {
                // $("#RSPT_TEL_NO").val(''); // 화면상 전화번호 변경
                // $("#RSPT_EMAIL_NM").val(''); // 화면상 이메일 변경
                grid.setCellValue(grid.select(), 'RSPT_TEL_NO', '', false); // 전화번호
                grid.setCellValue(grid.select(), 'RSPT_EMAIL_NM', '', false); // 이메일
                console.log("실패");
            }
    
    
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
        console.log("완룟");
    }
    function GetMngNo(bizarea_cd) {
        dews.api.get(dews.url.getApiUrl("HR", "PAMMPM00200_Service", "pammpm00200_InsuValDc"), {
            async: false,
            data: {
                bizarea_cd: bizarea_cd
            }
        }).done(function (data) {
            var grid = self.mtnityidnfMaster_grid;
            grid.setCellValue(grid.select(), 'BIZAREA_MNG_NO', data[0].INSU_VAL_DC, false);
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
    }
    function GetPsptComYn() {
        dews.api.get(dews.url.getApiUrl("HR", "PAMMPM00200_Service", "pammpm00200_CharCdValDc"), {
            async: false,
            data: {
            }
        }).done(function (data) {
            var grid = self.mtnityidnfMaster_grid;
            grid.setCellValue(grid.select(), 'PSPTCOM_YN', data[0].PSPTCOM_YN, false); // 우선지원대상기업 여부
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
    }
    function GetResNo(emp_no) {
        dews.api.get(dews.url.getApiUrl("HR", "PAMMPM00200_Service", "pammpm00200_ResNo"), {
            async: false,
            data: {
                emp_no: emp_no
            }
        }).done(function (data) {
            var grid = self.mtnityidnfMaster_grid;
            grid.setCellValue(grid.select(), 'RES_NO', data, false);
        }).fail(function (xhr, status, error) {
            dews.error(xhr.responseJSON.message);
        });
    }
    function enableEdit() {
        self.s_WRT_DT.readonly(false); // 등록일 수정 가능
        self.DECL_DT.readonly(false); // 신고일 수정 가능
        self.BIZAREA_MNG_NO.readonly(false); // 사업장관리번호 수정 가능
        self.BIZAREA_CD.readonly(false); // 사업장 수정 가능  
        self.POST_NO.readonly(false); // 우편번호 수정 가능
        self.BASE_ADDR.readonly(false); // 기본주소 수정 가능
        self.DTL_ADDR.readonly(false); // 상세주소 수정 가능
        self.PSPTCOM_YN.disable(false); // 우선지원대상기업 수정 가능
        self.RSPT_EMP_NO.readonly(false); // 담당자 수정 가능
        self.RSPT_TEL_NO.readonly(false); // 전화번호 수정 가능
        self.RSPT_EMAIL_NM.readonly(false); // 이메일 수정 가능
    
        self.s_IDNFR_FG.readonly(false); // 신청종류 수정 가능
        self.CHLDBRTH_DT.readonly(false); // 출산일 수정 가능
        self.DIVD_YN.disable(false); // 분할사용여부 수정 가능
        self.TERM_CD.readonly(false); // 임신기간 수정 가능
        self.MLTPPRGN_YN.disable(false); // 다태아여부 수정 가능
        self.USL_WAGE_CD.readonly(false); // 통상임금산정기준 수정 가능
        self.USL_WAGE_AMT.readonly(false); // 통상임금 수정 가능
        self.MM_FIXED_LABORTM_DY.readonly(false); // 월소정근로시간 수정 가능
    
        $("#dtl_grid_add").removeAttr('disabled'); // 추가 버튼 활성화
        $("#dtl_grid_add").removeClass('k-state-disabled'); // 추가 버튼 비활성화 클래스 삭제
        $("#dtl_grid_delete").removeAttr('disabled'); // 삭제 버튼 활성화
        $("#dtl_grid_delete").removeClass('k-state-disabled'); // 추가 버튼 비활성화 클래스 삭제
    
        self.MtnityidnfDtl_grid.enable(true); // 디테일 그리드 활성화
    }
    
    function disableEdit() {
        self.WRT_DT_datepicker.readonly(true); // 등록일 수정 불가
        self.DECL_DT_datepicker.readonly(true); // 신고일 수정 불가
        self.BIZAREA_MNG_NO.readonly(true); // 사업장관리번호 수정 불가
        self.BIZAREA_CD.readonly(true); // 사업장 수정 불가  
        self.BIZAREA_MNG_NO.readonly(true); // 사업장관리번호 수정 불가
        self.BIZAREA_CD.readonly(true); // 사업장 수정 불가
        self.POST_NO.readonly(true); // 우편번호 수정 불가
        self.BASE_ADDR.readonly(true); // 기본주소 수정 불가
        self.DTL_ADDR.readonly(true); // 상세주소 수정 불가
        self.PSPTCOM_YN.disable(true); // 우선지원대상기업 수정 불가
        self.RSPT_EMP_NO.readonly(true); // 담당자 수정 불가
        self.RSPT_TEL_NO.readonly(true); // 전화번호 수정 불가
        self.RSPT_EMAIL_NM.readonly(true); // 이메일 수정 불가
    
        self.REQ_KND_FG_radioBtn.disable(true); // 신청종류 수정 불가
        self.CHLDBRTH_DT.readonly(true); // 출산일 수정 불가
        self.DIVD_YN.disable(true); // 분할사용여부 수정 불가
        self.TERM_CD.readonly(true); // 임신기간 수정 불가
        self.MLTPPRGN_YN.disable(true); // 다태아여부 수정 불가
        self.USL_WAGE_CD.readonly(true); // 통상임금산정기준 수정 불가
        self.USL_WAGE_AMT.readonly(true); // 통상임금 수정 불가
        self.MM_FIXED_LABORTM_DY.readonly(true); // 월소정근로시간 수정 불가
    
        $("#dtl_grid_add").attr('disabled', true); // 추가 버튼 비활성화
        $("#dtl_grid_add").addClass('k-state-disabled'); // 추가 버튼 비활성화 클래스 추가
        $("#dtl_grid_delete").attr('disabled', true); // 삭제 버튼 비활성화
        $("#dtl_grid_delete").addClass('k-state-disabled'); // 삭제 버튼 비활성화 클래스 추가
    
        self.MtnityidnfDtl_grid.enable(false); // 디테일 그리드 비활성화
    }
    function getCurrentDateFormatted() {
        const today = new Date();
    
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0'); // 월은 0부터 시작하므로 1을 더해줍니다.
        const dd = String(today.getDate()).padStart(2, '0');
    
        return `${yyyy}${mm}${dd}`;
    }
    
    function bindPanelsToGrid() {
        self.mtnityidnfMaster_grid.bindPanel(self.topReqPanel);
        self.mtnityidnfMaster_grid.bindPanel(self.bizareaInfoPanel);
        self.mtnityidnfMaster_grid.bindPanel(self.trgtpInfoPanel);
    }
    
    function setCellValuesForEmployee(mstGrid, obj, idx) {
        mstGrid.setCellValue(idx, 'WRT_DT', getCurrentDateFormatted(), false); // 등록일
        mstGrid.setCellValue(idx, 'CLOSE_YN', 'N', false);                     // 마감여부
        mstGrid.setCellValue(idx, 'REQ_KND_FG', '1', false);                  // 신청종류
        mstGrid.setCellValue(idx, 'EMP_NO', obj.EMP_NO, false);               // 사원번호
        mstGrid.setCellValue(idx, 'KOR_NM', obj.KOR_NM, false);                // 사원명
        mstGrid.setCellValue(idx, 'BIZAREA_CD', obj.BIZAREA_CD, false);       // 사업장코드
    
        GetMngNo(obj.BIZAREA_CD);
        GetBizareaInfo(obj.BIZAREA_CD);
        GetPsptComYn();
        GetResNo(obj.EMP_NO); // 주민번호 조회
    
        mstGrid.setCellValue(idx, "RSPT_EMP_NO", self.user['empCode'], false); // 담당자
        GetLoginMemberInfo(self.user['empCode']);
    
        mstGrid.setCellValue(idx, "DIVD_YN", 'N', false);                     // 분할여부
        mstGrid.setCellValue(idx, "TERM_CD", '1', false);                     // 임신기간
        mstGrid.setCellValue(idx, "MLTPPRGN_YN", 'N', false);                 // 다태아여부
        mstGrid.setCellValue(idx, "USL_WAGE_CD", '1', false);                 // 통상임금산정기준
    
        if (!obj.hasOwnProperty('DECL_DT')) {
            mstGrid.setCellValue(idx, 'DECL_DT', getTodayDate(), false);      // 신고일
        }
    }
    
    
    

  
  });

</script>